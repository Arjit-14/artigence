(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();var Hc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Pl={exports:{}},Nr={},Cl={exports:{}},$={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rn=Symbol.for("react.element"),Uc=Symbol.for("react.portal"),jc=Symbol.for("react.fragment"),Wc=Symbol.for("react.strict_mode"),Vc=Symbol.for("react.profiler"),Gc=Symbol.for("react.provider"),Zc=Symbol.for("react.context"),qc=Symbol.for("react.forward_ref"),Xc=Symbol.for("react.suspense"),Qc=Symbol.for("react.memo"),Yc=Symbol.for("react.lazy"),ma=Symbol.iterator;function Kc(t){return t===null||typeof t!="object"?null:(t=ma&&t[ma]||t["@@iterator"],typeof t=="function"?t:null)}var Rl={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Dl=Object.assign,kl={};function Ai(t,i,e){this.props=t,this.context=i,this.refs=kl,this.updater=e||Rl}Ai.prototype.isReactComponent={};Ai.prototype.setState=function(t,i){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,i,"setState")};Ai.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Fl(){}Fl.prototype=Ai.prototype;function ws(t,i,e){this.props=t,this.context=i,this.refs=kl,this.updater=e||Rl}var Ts=ws.prototype=new Fl;Ts.constructor=ws;Dl(Ts,Ai.prototype);Ts.isPureReactComponent=!0;var va=Array.isArray,Ll=Object.prototype.hasOwnProperty,xs={current:null},Ol={key:!0,ref:!0,__self:!0,__source:!0};function zl(t,i,e){var n,r={},o=null,s=null;if(i!=null)for(n in i.ref!==void 0&&(s=i.ref),i.key!==void 0&&(o=""+i.key),i)Ll.call(i,n)&&!Ol.hasOwnProperty(n)&&(r[n]=i[n]);var l=arguments.length-2;if(l===1)r.children=e;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)r[n]===void 0&&(r[n]=l[n]);return{$$typeof:Rn,type:t,key:o,ref:s,props:r,_owner:xs.current}}function Jc(t,i){return{$$typeof:Rn,type:t.type,key:i,ref:t.ref,props:t.props,_owner:t._owner}}function _s(t){return typeof t=="object"&&t!==null&&t.$$typeof===Rn}function $c(t){var i={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(e){return i[e]})}var ya=/\/+/g;function eo(t,i){return typeof t=="object"&&t!==null&&t.key!=null?$c(""+t.key):i.toString(36)}function $n(t,i,e,n,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Rn:case Uc:s=!0}}if(s)return s=t,r=r(s),t=n===""?"."+eo(s,0):n,va(r)?(e="",t!=null&&(e=t.replace(ya,"$&/")+"/"),$n(r,i,e,"",function(u){return u})):r!=null&&(_s(r)&&(r=Jc(r,e+(!r.key||s&&s.key===r.key?"":(""+r.key).replace(ya,"$&/")+"/")+t)),i.push(r)),1;if(s=0,n=n===""?".":n+":",va(t))for(var l=0;l<t.length;l++){o=t[l];var a=n+eo(o,l);s+=$n(o,i,e,a,r)}else if(a=Kc(t),typeof a=="function")for(t=a.call(t),l=0;!(o=t.next()).done;)o=o.value,a=n+eo(o,l++),s+=$n(o,i,e,a,r);else if(o==="object")throw i=String(t),Error("Objects are not valid as a React child (found: "+(i==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":i)+"). If you meant to render a collection of children, use an array instead.");return s}function Bn(t,i,e){if(t==null)return t;var n=[],r=0;return $n(t,n,"","",function(o){return i.call(e,o,r++)}),n}function eh(t){if(t._status===-1){var i=t._result;i=i(),i.then(function(e){(t._status===0||t._status===-1)&&(t._status=1,t._result=e)},function(e){(t._status===0||t._status===-1)&&(t._status=2,t._result=e)}),t._status===-1&&(t._status=0,t._result=i)}if(t._status===1)return t._result.default;throw t._result}var Ae={current:null},er={transition:null},th={ReactCurrentDispatcher:Ae,ReactCurrentBatchConfig:er,ReactCurrentOwner:xs};function Ml(){throw Error("act(...) is not supported in production builds of React.")}$.Children={map:Bn,forEach:function(t,i,e){Bn(t,function(){i.apply(this,arguments)},e)},count:function(t){var i=0;return Bn(t,function(){i++}),i},toArray:function(t){return Bn(t,function(i){return i})||[]},only:function(t){if(!_s(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$.Component=Ai;$.Fragment=jc;$.Profiler=Vc;$.PureComponent=ws;$.StrictMode=Wc;$.Suspense=Xc;$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=th;$.act=Ml;$.cloneElement=function(t,i,e){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Dl({},t.props),r=t.key,o=t.ref,s=t._owner;if(i!=null){if(i.ref!==void 0&&(o=i.ref,s=xs.current),i.key!==void 0&&(r=""+i.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in i)Ll.call(i,a)&&!Ol.hasOwnProperty(a)&&(n[a]=i[a]===void 0&&l!==void 0?l[a]:i[a])}var a=arguments.length-2;if(a===1)n.children=e;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Rn,type:t.type,key:r,ref:o,props:n,_owner:s}};$.createContext=function(t){return t={$$typeof:Zc,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Gc,_context:t},t.Consumer=t};$.createElement=zl;$.createFactory=function(t){var i=zl.bind(null,t);return i.type=t,i};$.createRef=function(){return{current:null}};$.forwardRef=function(t){return{$$typeof:qc,render:t}};$.isValidElement=_s;$.lazy=function(t){return{$$typeof:Yc,_payload:{_status:-1,_result:t},_init:eh}};$.memo=function(t,i){return{$$typeof:Qc,type:t,compare:i===void 0?null:i}};$.startTransition=function(t){var i=er.transition;er.transition={};try{t()}finally{er.transition=i}};$.unstable_act=Ml;$.useCallback=function(t,i){return Ae.current.useCallback(t,i)};$.useContext=function(t){return Ae.current.useContext(t)};$.useDebugValue=function(){};$.useDeferredValue=function(t){return Ae.current.useDeferredValue(t)};$.useEffect=function(t,i){return Ae.current.useEffect(t,i)};$.useId=function(){return Ae.current.useId()};$.useImperativeHandle=function(t,i,e){return Ae.current.useImperativeHandle(t,i,e)};$.useInsertionEffect=function(t,i){return Ae.current.useInsertionEffect(t,i)};$.useLayoutEffect=function(t,i){return Ae.current.useLayoutEffect(t,i)};$.useMemo=function(t,i){return Ae.current.useMemo(t,i)};$.useReducer=function(t,i,e){return Ae.current.useReducer(t,i,e)};$.useRef=function(t){return Ae.current.useRef(t)};$.useState=function(t){return Ae.current.useState(t)};$.useSyncExternalStore=function(t,i,e){return Ae.current.useSyncExternalStore(t,i,e)};$.useTransition=function(){return Ae.current.useTransition()};$.version="18.3.1";Cl.exports=$;var ye=Cl.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ih=ye,nh=Symbol.for("react.element"),rh=Symbol.for("react.fragment"),oh=Object.prototype.hasOwnProperty,sh=ih.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ah={key:!0,ref:!0,__self:!0,__source:!0};function Nl(t,i,e){var n,r={},o=null,s=null;e!==void 0&&(o=""+e),i.key!==void 0&&(o=""+i.key),i.ref!==void 0&&(s=i.ref);for(n in i)oh.call(i,n)&&!ah.hasOwnProperty(n)&&(r[n]=i[n]);if(t&&t.defaultProps)for(n in i=t.defaultProps,i)r[n]===void 0&&(r[n]=i[n]);return{$$typeof:nh,type:t,key:o,ref:s,props:r,_owner:sh.current}}Nr.Fragment=rh;Nr.jsx=Nl;Nr.jsxs=Nl;Pl.exports=Nr;var J=Pl.exports,Bl={exports:{}},Ye={},Il={exports:{}},Al={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function i(A,G){var Z=A.length;A.push(G);e:for(;0<Z;){var se=Z-1>>>1,pe=A[se];if(0<r(pe,G))A[se]=G,A[Z]=pe,Z=se;else break e}}function e(A){return A.length===0?null:A[0]}function n(A){if(A.length===0)return null;var G=A[0],Z=A.pop();if(Z!==G){A[0]=Z;e:for(var se=0,pe=A.length,Q=pe>>>1;se<Q;){var Je=2*(se+1)-1,kt=A[Je],$e=Je+1,st=A[$e];if(0>r(kt,Z))$e<pe&&0>r(st,kt)?(A[se]=st,A[$e]=Z,se=$e):(A[se]=kt,A[Je]=Z,se=Je);else if($e<pe&&0>r(st,Z))A[se]=st,A[$e]=Z,se=$e;else break e}}return G}function r(A,G){var Z=A.sortIndex-G.sortIndex;return Z!==0?Z:A.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var a=[],u=[],c=1,h=null,d=3,m=!1,y=!1,T=!1,P=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(A){for(var G=e(u);G!==null;){if(G.callback===null)n(u);else if(G.startTime<=A)n(u),G.sortIndex=G.expirationTime,i(a,G);else break;G=e(u)}}function R(A){if(T=!1,S(A),!y)if(e(a)!==null)y=!0,Ee(k);else{var G=e(u);G!==null&&xe(R,G.startTime-A)}}function k(A,G){y=!1,T&&(T=!1,v(B),B=-1),m=!0;var Z=d;try{for(S(G),h=e(a);h!==null&&(!(h.expirationTime>G)||A&&!X());){var se=h.callback;if(typeof se=="function"){h.callback=null,d=h.priorityLevel;var pe=se(h.expirationTime<=G);G=t.unstable_now(),typeof pe=="function"?h.callback=pe:h===e(a)&&n(a),S(G)}else n(a);h=e(a)}if(h!==null)var Q=!0;else{var Je=e(u);Je!==null&&xe(R,Je.startTime-G),Q=!1}return Q}finally{h=null,d=Z,m=!1}}var F=!1,N=null,B=-1,j=5,U=-1;function X(){return!(t.unstable_now()-U<j)}function q(){if(N!==null){var A=t.unstable_now();U=A;var G=!0;try{G=N(!0,A)}finally{G?re():(F=!1,N=null)}}else F=!1}var re;if(typeof w=="function")re=function(){w(q)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,Te=we.port2;we.port1.onmessage=q,re=function(){Te.postMessage(null)}}else re=function(){P(q,0)};function Ee(A){N=A,F||(F=!0,re())}function xe(A,G){B=P(function(){A(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,Ee(k))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return e(a)},t.unstable_next=function(A){switch(d){case 1:case 2:case 3:var G=3;break;default:G=d}var Z=d;d=G;try{return A()}finally{d=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,G){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var Z=d;d=A;try{return G()}finally{d=Z}},t.unstable_scheduleCallback=function(A,G,Z){var se=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?se+Z:se):Z=se,A){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=Z+pe,A={id:c++,callback:G,priorityLevel:A,startTime:Z,expirationTime:pe,sortIndex:-1},Z>se?(A.sortIndex=Z,i(u,A),e(a)===null&&A===e(u)&&(T?(v(B),B=-1):T=!0,xe(R,Z-se))):(A.sortIndex=pe,i(a,A),y||m||(y=!0,Ee(k))),A},t.unstable_shouldYield=X,t.unstable_wrapCallback=function(A){var G=d;return function(){var Z=d;d=G;try{return A.apply(this,arguments)}finally{d=Z}}}})(Al);Il.exports=Al;var lh=Il.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uh=ye,Qe=lh;function z(t){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+t,e=1;e<arguments.length;e++)i+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Hl=new Set,cn={};function li(t,i){Li(t,i),Li(t+"Capture",i)}function Li(t,i){for(cn[t]=i,t=0;t<i.length;t++)Hl.add(i[t])}var St=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ro=Object.prototype.hasOwnProperty,ch=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wa={},Ta={};function hh(t){return Ro.call(Ta,t)?!0:Ro.call(wa,t)?!1:ch.test(t)?Ta[t]=!0:(wa[t]=!0,!1)}function dh(t,i,e,n){if(e!==null&&e.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return n?!1:e!==null?!e.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function fh(t,i,e,n){if(i===null||typeof i>"u"||dh(t,i,e,n))return!0;if(n)return!1;if(e!==null)switch(e.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function He(t,i,e,n,r,o,s){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=e,this.propertyName=t,this.type=i,this.sanitizeURL=o,this.removeEmptyString=s}var Le={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Le[t]=new He(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var i=t[0];Le[i]=new He(i,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Le[t]=new He(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Le[t]=new He(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Le[t]=new He(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Le[t]=new He(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Le[t]=new He(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Le[t]=new He(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Le[t]=new He(t,5,!1,t.toLowerCase(),null,!1,!1)});var Es=/[\-:]([a-z])/g;function Ss(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var i=t.replace(Es,Ss);Le[i]=new He(i,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var i=t.replace(Es,Ss);Le[i]=new He(i,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var i=t.replace(Es,Ss);Le[i]=new He(i,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Le[t]=new He(t,1,!1,t.toLowerCase(),null,!1,!1)});Le.xlinkHref=new He("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Le[t]=new He(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ps(t,i,e,n){var r=Le.hasOwnProperty(i)?Le[i]:null;(r!==null?r.type!==0:n||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(fh(i,e,r,n)&&(e=null),n||r===null?hh(i)&&(e===null?t.removeAttribute(i):t.setAttribute(i,""+e)):r.mustUseProperty?t[r.propertyName]=e===null?r.type===3?!1:"":e:(i=r.attributeName,n=r.attributeNamespace,e===null?t.removeAttribute(i):(r=r.type,e=r===3||r===4&&e===!0?"":""+e,n?t.setAttributeNS(n,i,e):t.setAttribute(i,e))))}var Dt=uh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,In=Symbol.for("react.element"),fi=Symbol.for("react.portal"),pi=Symbol.for("react.fragment"),Cs=Symbol.for("react.strict_mode"),Do=Symbol.for("react.profiler"),bl=Symbol.for("react.provider"),Ul=Symbol.for("react.context"),Rs=Symbol.for("react.forward_ref"),ko=Symbol.for("react.suspense"),Fo=Symbol.for("react.suspense_list"),Ds=Symbol.for("react.memo"),Lt=Symbol.for("react.lazy"),jl=Symbol.for("react.offscreen"),xa=Symbol.iterator;function ji(t){return t===null||typeof t!="object"?null:(t=xa&&t[xa]||t["@@iterator"],typeof t=="function"?t:null)}var fe=Object.assign,to;function Yi(t){if(to===void 0)try{throw Error()}catch(e){var i=e.stack.trim().match(/\n( *(at )?)/);to=i&&i[1]||""}return`
`+to+t}var io=!1;function no(t,i){if(!t||io)return"";io=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(u){var n=u}Reflect.construct(t,[],i)}else{try{i.call()}catch(u){n=u}t.call(i.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),o=n.stack.split(`
`),s=r.length-1,l=o.length-1;1<=s&&0<=l&&r[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(r[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||r[s]!==o[l]){var a=`
`+r[s].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=s&&0<=l);break}}}finally{io=!1,Error.prepareStackTrace=e}return(t=t?t.displayName||t.name:"")?Yi(t):""}function ph(t){switch(t.tag){case 5:return Yi(t.type);case 16:return Yi("Lazy");case 13:return Yi("Suspense");case 19:return Yi("SuspenseList");case 0:case 2:case 15:return t=no(t.type,!1),t;case 11:return t=no(t.type.render,!1),t;case 1:return t=no(t.type,!0),t;default:return""}}function Lo(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case pi:return"Fragment";case fi:return"Portal";case Do:return"Profiler";case Cs:return"StrictMode";case ko:return"Suspense";case Fo:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ul:return(t.displayName||"Context")+".Consumer";case bl:return(t._context.displayName||"Context")+".Provider";case Rs:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ds:return i=t.displayName||null,i!==null?i:Lo(t.type)||"Memo";case Lt:i=t._payload,t=t._init;try{return Lo(t(i))}catch{}}return null}function gh(t){var i=t.type;switch(t.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=i.render,t=t.displayName||t.name||"",i.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lo(i);case 8:return i===Cs?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Gt(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Wl(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function mh(t){var i=Wl(t)?"checked":"value",e=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),n=""+t[i];if(!t.hasOwnProperty(i)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var r=e.get,o=e.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return r.call(this)},set:function(s){n=""+s,o.call(this,s)}}),Object.defineProperty(t,i,{enumerable:e.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function An(t){t._valueTracker||(t._valueTracker=mh(t))}function Vl(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var e=i.getValue(),n="";return t&&(n=Wl(t)?t.checked?"true":"false":t.value),t=n,t!==e?(i.setValue(t),!0):!1}function hr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Oo(t,i){var e=i.checked;return fe({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e??t._wrapperState.initialChecked})}function _a(t,i){var e=i.defaultValue==null?"":i.defaultValue,n=i.checked!=null?i.checked:i.defaultChecked;e=Gt(i.value!=null?i.value:e),t._wrapperState={initialChecked:n,initialValue:e,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Gl(t,i){i=i.checked,i!=null&&Ps(t,"checked",i,!1)}function zo(t,i){Gl(t,i);var e=Gt(i.value),n=i.type;if(e!=null)n==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+e):t.value!==""+e&&(t.value=""+e);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}i.hasOwnProperty("value")?Mo(t,i.type,e):i.hasOwnProperty("defaultValue")&&Mo(t,i.type,Gt(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(t.defaultChecked=!!i.defaultChecked)}function Ea(t,i,e){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var n=i.type;if(!(n!=="submit"&&n!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+t._wrapperState.initialValue,e||i===t.value||(t.value=i),t.defaultValue=i}e=t.name,e!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,e!==""&&(t.name=e)}function Mo(t,i,e){(i!=="number"||hr(t.ownerDocument)!==t)&&(e==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+e&&(t.defaultValue=""+e))}var Ki=Array.isArray;function Pi(t,i,e,n){if(t=t.options,i){i={};for(var r=0;r<e.length;r++)i["$"+e[r]]=!0;for(e=0;e<t.length;e++)r=i.hasOwnProperty("$"+t[e].value),t[e].selected!==r&&(t[e].selected=r),r&&n&&(t[e].defaultSelected=!0)}else{for(e=""+Gt(e),i=null,r=0;r<t.length;r++){if(t[r].value===e){t[r].selected=!0,n&&(t[r].defaultSelected=!0);return}i!==null||t[r].disabled||(i=t[r])}i!==null&&(i.selected=!0)}}function No(t,i){if(i.dangerouslySetInnerHTML!=null)throw Error(z(91));return fe({},i,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Sa(t,i){var e=i.value;if(e==null){if(e=i.children,i=i.defaultValue,e!=null){if(i!=null)throw Error(z(92));if(Ki(e)){if(1<e.length)throw Error(z(93));e=e[0]}i=e}i==null&&(i=""),e=i}t._wrapperState={initialValue:Gt(e)}}function Zl(t,i){var e=Gt(i.value),n=Gt(i.defaultValue);e!=null&&(e=""+e,e!==t.value&&(t.value=e),i.defaultValue==null&&t.defaultValue!==e&&(t.defaultValue=e)),n!=null&&(t.defaultValue=""+n)}function Pa(t){var i=t.textContent;i===t._wrapperState.initialValue&&i!==""&&i!==null&&(t.value=i)}function ql(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bo(t,i){return t==null||t==="http://www.w3.org/1999/xhtml"?ql(i):t==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Hn,Xl=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,e,n,r){MSApp.execUnsafeLocalFunction(function(){return t(i,e,n,r)})}:t}(function(t,i){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=i;else{for(Hn=Hn||document.createElement("div"),Hn.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Hn.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;i.firstChild;)t.appendChild(i.firstChild)}});function hn(t,i){if(i){var e=t.firstChild;if(e&&e===t.lastChild&&e.nodeType===3){e.nodeValue=i;return}}t.textContent=i}var en={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vh=["Webkit","ms","Moz","O"];Object.keys(en).forEach(function(t){vh.forEach(function(i){i=i+t.charAt(0).toUpperCase()+t.substring(1),en[i]=en[t]})});function Ql(t,i,e){return i==null||typeof i=="boolean"||i===""?"":e||typeof i!="number"||i===0||en.hasOwnProperty(t)&&en[t]?(""+i).trim():i+"px"}function Yl(t,i){t=t.style;for(var e in i)if(i.hasOwnProperty(e)){var n=e.indexOf("--")===0,r=Ql(e,i[e],n);e==="float"&&(e="cssFloat"),n?t.setProperty(e,r):t[e]=r}}var yh=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Io(t,i){if(i){if(yh[t]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(z(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(z(61))}if(i.style!=null&&typeof i.style!="object")throw Error(z(62))}}function Ao(t,i){if(t.indexOf("-")===-1)return typeof i.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ho=null;function ks(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bo=null,Ci=null,Ri=null;function Ca(t){if(t=Fn(t)){if(typeof bo!="function")throw Error(z(280));var i=t.stateNode;i&&(i=br(i),bo(t.stateNode,t.type,i))}}function Kl(t){Ci?Ri?Ri.push(t):Ri=[t]:Ci=t}function Jl(){if(Ci){var t=Ci,i=Ri;if(Ri=Ci=null,Ca(t),i)for(t=0;t<i.length;t++)Ca(i[t])}}function $l(t,i){return t(i)}function eu(){}var ro=!1;function tu(t,i,e){if(ro)return t(i,e);ro=!0;try{return $l(t,i,e)}finally{ro=!1,(Ci!==null||Ri!==null)&&(eu(),Jl())}}function dn(t,i){var e=t.stateNode;if(e===null)return null;var n=br(e);if(n===null)return null;e=n[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(e&&typeof e!="function")throw Error(z(231,i,typeof e));return e}var Uo=!1;if(St)try{var Wi={};Object.defineProperty(Wi,"passive",{get:function(){Uo=!0}}),window.addEventListener("test",Wi,Wi),window.removeEventListener("test",Wi,Wi)}catch{Uo=!1}function wh(t,i,e,n,r,o,s,l,a){var u=Array.prototype.slice.call(arguments,3);try{i.apply(e,u)}catch(c){this.onError(c)}}var tn=!1,dr=null,fr=!1,jo=null,Th={onError:function(t){tn=!0,dr=t}};function xh(t,i,e,n,r,o,s,l,a){tn=!1,dr=null,wh.apply(Th,arguments)}function _h(t,i,e,n,r,o,s,l,a){if(xh.apply(this,arguments),tn){if(tn){var u=dr;tn=!1,dr=null}else throw Error(z(198));fr||(fr=!0,jo=u)}}function ui(t){var i=t,e=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,i.flags&4098&&(e=i.return),t=i.return;while(t)}return i.tag===3?e:null}function iu(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function Ra(t){if(ui(t)!==t)throw Error(z(188))}function Eh(t){var i=t.alternate;if(!i){if(i=ui(t),i===null)throw Error(z(188));return i!==t?null:t}for(var e=t,n=i;;){var r=e.return;if(r===null)break;var o=r.alternate;if(o===null){if(n=r.return,n!==null){e=n;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===e)return Ra(r),t;if(o===n)return Ra(r),i;o=o.sibling}throw Error(z(188))}if(e.return!==n.return)e=r,n=o;else{for(var s=!1,l=r.child;l;){if(l===e){s=!0,e=r,n=o;break}if(l===n){s=!0,n=r,e=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===e){s=!0,e=o,n=r;break}if(l===n){s=!0,n=o,e=r;break}l=l.sibling}if(!s)throw Error(z(189))}}if(e.alternate!==n)throw Error(z(190))}if(e.tag!==3)throw Error(z(188));return e.stateNode.current===e?t:i}function nu(t){return t=Eh(t),t!==null?ru(t):null}function ru(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var i=ru(t);if(i!==null)return i;t=t.sibling}return null}var ou=Qe.unstable_scheduleCallback,Da=Qe.unstable_cancelCallback,Sh=Qe.unstable_shouldYield,Ph=Qe.unstable_requestPaint,ve=Qe.unstable_now,Ch=Qe.unstable_getCurrentPriorityLevel,Fs=Qe.unstable_ImmediatePriority,su=Qe.unstable_UserBlockingPriority,pr=Qe.unstable_NormalPriority,Rh=Qe.unstable_LowPriority,au=Qe.unstable_IdlePriority,Br=null,vt=null;function Dh(t){if(vt&&typeof vt.onCommitFiberRoot=="function")try{vt.onCommitFiberRoot(Br,t,void 0,(t.current.flags&128)===128)}catch{}}var ht=Math.clz32?Math.clz32:Lh,kh=Math.log,Fh=Math.LN2;function Lh(t){return t>>>=0,t===0?32:31-(kh(t)/Fh|0)|0}var bn=64,Un=4194304;function Ji(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gr(t,i){var e=t.pendingLanes;if(e===0)return 0;var n=0,r=t.suspendedLanes,o=t.pingedLanes,s=e&268435455;if(s!==0){var l=s&~r;l!==0?n=Ji(l):(o&=s,o!==0&&(n=Ji(o)))}else s=e&~r,s!==0?n=Ji(s):o!==0&&(n=Ji(o));if(n===0)return 0;if(i!==0&&i!==n&&!(i&r)&&(r=n&-n,o=i&-i,r>=o||r===16&&(o&4194240)!==0))return i;if(n&4&&(n|=e&16),i=t.entangledLanes,i!==0)for(t=t.entanglements,i&=n;0<i;)e=31-ht(i),r=1<<e,n|=t[e],i&=~r;return n}function Oh(t,i){switch(t){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zh(t,i){for(var e=t.suspendedLanes,n=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-ht(o),l=1<<s,a=r[s];a===-1?(!(l&e)||l&n)&&(r[s]=Oh(l,i)):a<=i&&(t.expiredLanes|=l),o&=~l}}function Wo(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function lu(){var t=bn;return bn<<=1,!(bn&4194240)&&(bn=64),t}function oo(t){for(var i=[],e=0;31>e;e++)i.push(t);return i}function Dn(t,i,e){t.pendingLanes|=i,i!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,i=31-ht(i),t[i]=e}function Mh(t,i){var e=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<e;){var r=31-ht(e),o=1<<r;i[r]=0,n[r]=-1,t[r]=-1,e&=~o}}function Ls(t,i){var e=t.entangledLanes|=i;for(t=t.entanglements;e;){var n=31-ht(e),r=1<<n;r&i|t[n]&i&&(t[n]|=i),e&=~r}}var ne=0;function uu(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var cu,Os,hu,du,fu,Vo=!1,jn=[],It=null,At=null,Ht=null,fn=new Map,pn=new Map,zt=[],Nh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ka(t,i){switch(t){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Ht=null;break;case"pointerover":case"pointerout":fn.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":pn.delete(i.pointerId)}}function Vi(t,i,e,n,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:i,domEventName:e,eventSystemFlags:n,nativeEvent:o,targetContainers:[r]},i!==null&&(i=Fn(i),i!==null&&Os(i)),t):(t.eventSystemFlags|=n,i=t.targetContainers,r!==null&&i.indexOf(r)===-1&&i.push(r),t)}function Bh(t,i,e,n,r){switch(i){case"focusin":return It=Vi(It,t,i,e,n,r),!0;case"dragenter":return At=Vi(At,t,i,e,n,r),!0;case"mouseover":return Ht=Vi(Ht,t,i,e,n,r),!0;case"pointerover":var o=r.pointerId;return fn.set(o,Vi(fn.get(o)||null,t,i,e,n,r)),!0;case"gotpointercapture":return o=r.pointerId,pn.set(o,Vi(pn.get(o)||null,t,i,e,n,r)),!0}return!1}function pu(t){var i=Jt(t.target);if(i!==null){var e=ui(i);if(e!==null){if(i=e.tag,i===13){if(i=iu(e),i!==null){t.blockedOn=i,fu(t.priority,function(){hu(e)});return}}else if(i===3&&e.stateNode.current.memoizedState.isDehydrated){t.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}t.blockedOn=null}function tr(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var e=Go(t.domEventName,t.eventSystemFlags,i[0],t.nativeEvent);if(e===null){e=t.nativeEvent;var n=new e.constructor(e.type,e);Ho=n,e.target.dispatchEvent(n),Ho=null}else return i=Fn(e),i!==null&&Os(i),t.blockedOn=e,!1;i.shift()}return!0}function Fa(t,i,e){tr(t)&&e.delete(i)}function Ih(){Vo=!1,It!==null&&tr(It)&&(It=null),At!==null&&tr(At)&&(At=null),Ht!==null&&tr(Ht)&&(Ht=null),fn.forEach(Fa),pn.forEach(Fa)}function Gi(t,i){t.blockedOn===i&&(t.blockedOn=null,Vo||(Vo=!0,Qe.unstable_scheduleCallback(Qe.unstable_NormalPriority,Ih)))}function gn(t){function i(r){return Gi(r,t)}if(0<jn.length){Gi(jn[0],t);for(var e=1;e<jn.length;e++){var n=jn[e];n.blockedOn===t&&(n.blockedOn=null)}}for(It!==null&&Gi(It,t),At!==null&&Gi(At,t),Ht!==null&&Gi(Ht,t),fn.forEach(i),pn.forEach(i),e=0;e<zt.length;e++)n=zt[e],n.blockedOn===t&&(n.blockedOn=null);for(;0<zt.length&&(e=zt[0],e.blockedOn===null);)pu(e),e.blockedOn===null&&zt.shift()}var Di=Dt.ReactCurrentBatchConfig,mr=!0;function Ah(t,i,e,n){var r=ne,o=Di.transition;Di.transition=null;try{ne=1,zs(t,i,e,n)}finally{ne=r,Di.transition=o}}function Hh(t,i,e,n){var r=ne,o=Di.transition;Di.transition=null;try{ne=4,zs(t,i,e,n)}finally{ne=r,Di.transition=o}}function zs(t,i,e,n){if(mr){var r=Go(t,i,e,n);if(r===null)mo(t,i,n,vr,e),ka(t,n);else if(Bh(r,t,i,e,n))n.stopPropagation();else if(ka(t,n),i&4&&-1<Nh.indexOf(t)){for(;r!==null;){var o=Fn(r);if(o!==null&&cu(o),o=Go(t,i,e,n),o===null&&mo(t,i,n,vr,e),o===r)break;r=o}r!==null&&n.stopPropagation()}else mo(t,i,n,null,e)}}var vr=null;function Go(t,i,e,n){if(vr=null,t=ks(n),t=Jt(t),t!==null)if(i=ui(t),i===null)t=null;else if(e=i.tag,e===13){if(t=iu(i),t!==null)return t;t=null}else if(e===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null);return vr=t,null}function gu(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ch()){case Fs:return 1;case su:return 4;case pr:case Rh:return 16;case au:return 536870912;default:return 16}default:return 16}}var Nt=null,Ms=null,ir=null;function mu(){if(ir)return ir;var t,i=Ms,e=i.length,n,r="value"in Nt?Nt.value:Nt.textContent,o=r.length;for(t=0;t<e&&i[t]===r[t];t++);var s=e-t;for(n=1;n<=s&&i[e-n]===r[o-n];n++);return ir=r.slice(t,1<n?1-n:void 0)}function nr(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Wn(){return!0}function La(){return!1}function Ke(t){function i(e,n,r,o,s){this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(e=t[l],this[l]=e?e(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Wn:La,this.isPropagationStopped=La,this}return fe(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=Wn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=Wn)},persist:function(){},isPersistent:Wn}),i}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ns=Ke(Hi),kn=fe({},Hi,{view:0,detail:0}),bh=Ke(kn),so,ao,Zi,Ir=fe({},kn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Zi&&(Zi&&t.type==="mousemove"?(so=t.screenX-Zi.screenX,ao=t.screenY-Zi.screenY):ao=so=0,Zi=t),so)},movementY:function(t){return"movementY"in t?t.movementY:ao}}),Oa=Ke(Ir),Uh=fe({},Ir,{dataTransfer:0}),jh=Ke(Uh),Wh=fe({},kn,{relatedTarget:0}),lo=Ke(Wh),Vh=fe({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),Gh=Ke(Vh),Zh=fe({},Hi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qh=Ke(Zh),Xh=fe({},Hi,{data:0}),za=Ke(Xh),Qh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jh(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Kh[t])?!!i[t]:!1}function Bs(){return Jh}var $h=fe({},kn,{key:function(t){if(t.key){var i=Qh[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=nr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Yh[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bs,charCode:function(t){return t.type==="keypress"?nr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?nr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ed=Ke($h),td=fe({},Ir,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ma=Ke(td),id=fe({},kn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bs}),nd=Ke(id),rd=fe({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),od=Ke(rd),sd=fe({},Ir,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ad=Ke(sd),ld=[9,13,27,32],Is=St&&"CompositionEvent"in window,nn=null;St&&"documentMode"in document&&(nn=document.documentMode);var ud=St&&"TextEvent"in window&&!nn,vu=St&&(!Is||nn&&8<nn&&11>=nn),Na=" ",Ba=!1;function yu(t,i){switch(t){case"keyup":return ld.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wu(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gi=!1;function cd(t,i){switch(t){case"compositionend":return wu(i);case"keypress":return i.which!==32?null:(Ba=!0,Na);case"textInput":return t=i.data,t===Na&&Ba?null:t;default:return null}}function hd(t,i){if(gi)return t==="compositionend"||!Is&&yu(t,i)?(t=mu(),ir=Ms=Nt=null,gi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return vu&&i.locale!=="ko"?null:i.data;default:return null}}var dd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ia(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!dd[t.type]:i==="textarea"}function Tu(t,i,e,n){Kl(n),i=yr(i,"onChange"),0<i.length&&(e=new Ns("onChange","change",null,e,n),t.push({event:e,listeners:i}))}var rn=null,mn=null;function fd(t){Lu(t,0)}function Ar(t){var i=yi(t);if(Vl(i))return t}function pd(t,i){if(t==="change")return i}var xu=!1;if(St){var uo;if(St){var co="oninput"in document;if(!co){var Aa=document.createElement("div");Aa.setAttribute("oninput","return;"),co=typeof Aa.oninput=="function"}uo=co}else uo=!1;xu=uo&&(!document.documentMode||9<document.documentMode)}function Ha(){rn&&(rn.detachEvent("onpropertychange",_u),mn=rn=null)}function _u(t){if(t.propertyName==="value"&&Ar(mn)){var i=[];Tu(i,mn,t,ks(t)),tu(fd,i)}}function gd(t,i,e){t==="focusin"?(Ha(),rn=i,mn=e,rn.attachEvent("onpropertychange",_u)):t==="focusout"&&Ha()}function md(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ar(mn)}function vd(t,i){if(t==="click")return Ar(i)}function yd(t,i){if(t==="input"||t==="change")return Ar(i)}function wd(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var ft=typeof Object.is=="function"?Object.is:wd;function vn(t,i){if(ft(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var e=Object.keys(t),n=Object.keys(i);if(e.length!==n.length)return!1;for(n=0;n<e.length;n++){var r=e[n];if(!Ro.call(i,r)||!ft(t[r],i[r]))return!1}return!0}function ba(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ua(t,i){var e=ba(t);t=0;for(var n;e;){if(e.nodeType===3){if(n=t+e.textContent.length,t<=i&&n>=i)return{node:e,offset:i-t};t=n}e:{for(;e;){if(e.nextSibling){e=e.nextSibling;break e}e=e.parentNode}e=void 0}e=ba(e)}}function Eu(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Eu(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Su(){for(var t=window,i=hr();i instanceof t.HTMLIFrameElement;){try{var e=typeof i.contentWindow.location.href=="string"}catch{e=!1}if(e)t=i.contentWindow;else break;i=hr(t.document)}return i}function As(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}function Td(t){var i=Su(),e=t.focusedElem,n=t.selectionRange;if(i!==e&&e&&e.ownerDocument&&Eu(e.ownerDocument.documentElement,e)){if(n!==null&&As(e)){if(i=n.start,t=n.end,t===void 0&&(t=i),"selectionStart"in e)e.selectionStart=i,e.selectionEnd=Math.min(t,e.value.length);else if(t=(i=e.ownerDocument||document)&&i.defaultView||window,t.getSelection){t=t.getSelection();var r=e.textContent.length,o=Math.min(n.start,r);n=n.end===void 0?o:Math.min(n.end,r),!t.extend&&o>n&&(r=n,n=o,o=r),r=Ua(e,o);var s=Ua(e,n);r&&s&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(i=i.createRange(),i.setStart(r.node,r.offset),t.removeAllRanges(),o>n?(t.addRange(i),t.extend(s.node,s.offset)):(i.setEnd(s.node,s.offset),t.addRange(i)))}}for(i=[],t=e;t=t.parentNode;)t.nodeType===1&&i.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<i.length;e++)t=i[e],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var xd=St&&"documentMode"in document&&11>=document.documentMode,mi=null,Zo=null,on=null,qo=!1;function ja(t,i,e){var n=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;qo||mi==null||mi!==hr(n)||(n=mi,"selectionStart"in n&&As(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),on&&vn(on,n)||(on=n,n=yr(Zo,"onSelect"),0<n.length&&(i=new Ns("onSelect","select",null,i,e),t.push({event:i,listeners:n}),i.target=mi)))}function Vn(t,i){var e={};return e[t.toLowerCase()]=i.toLowerCase(),e["Webkit"+t]="webkit"+i,e["Moz"+t]="moz"+i,e}var vi={animationend:Vn("Animation","AnimationEnd"),animationiteration:Vn("Animation","AnimationIteration"),animationstart:Vn("Animation","AnimationStart"),transitionend:Vn("Transition","TransitionEnd")},ho={},Pu={};St&&(Pu=document.createElement("div").style,"AnimationEvent"in window||(delete vi.animationend.animation,delete vi.animationiteration.animation,delete vi.animationstart.animation),"TransitionEvent"in window||delete vi.transitionend.transition);function Hr(t){if(ho[t])return ho[t];if(!vi[t])return t;var i=vi[t],e;for(e in i)if(i.hasOwnProperty(e)&&e in Pu)return ho[t]=i[e];return t}var Cu=Hr("animationend"),Ru=Hr("animationiteration"),Du=Hr("animationstart"),ku=Hr("transitionend"),Fu=new Map,Wa="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qt(t,i){Fu.set(t,i),li(i,[t])}for(var fo=0;fo<Wa.length;fo++){var po=Wa[fo],_d=po.toLowerCase(),Ed=po[0].toUpperCase()+po.slice(1);qt(_d,"on"+Ed)}qt(Cu,"onAnimationEnd");qt(Ru,"onAnimationIteration");qt(Du,"onAnimationStart");qt("dblclick","onDoubleClick");qt("focusin","onFocus");qt("focusout","onBlur");qt(ku,"onTransitionEnd");Li("onMouseEnter",["mouseout","mouseover"]);Li("onMouseLeave",["mouseout","mouseover"]);Li("onPointerEnter",["pointerout","pointerover"]);Li("onPointerLeave",["pointerout","pointerover"]);li("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));li("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));li("onBeforeInput",["compositionend","keypress","textInput","paste"]);li("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));li("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));li("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $i="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sd=new Set("cancel close invalid load scroll toggle".split(" ").concat($i));function Va(t,i,e){var n=t.type||"unknown-event";t.currentTarget=e,_h(n,i,void 0,t),t.currentTarget=null}function Lu(t,i){i=(i&4)!==0;for(var e=0;e<t.length;e++){var n=t[e],r=n.event;n=n.listeners;e:{var o=void 0;if(i)for(var s=n.length-1;0<=s;s--){var l=n[s],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==o&&r.isPropagationStopped())break e;Va(r,l,u),o=a}else for(s=0;s<n.length;s++){if(l=n[s],a=l.instance,u=l.currentTarget,l=l.listener,a!==o&&r.isPropagationStopped())break e;Va(r,l,u),o=a}}}if(fr)throw t=jo,fr=!1,jo=null,t}function le(t,i){var e=i[Jo];e===void 0&&(e=i[Jo]=new Set);var n=t+"__bubble";e.has(n)||(Ou(i,t,2,!1),e.add(n))}function go(t,i,e){var n=0;i&&(n|=4),Ou(e,t,n,i)}var Gn="_reactListening"+Math.random().toString(36).slice(2);function yn(t){if(!t[Gn]){t[Gn]=!0,Hl.forEach(function(e){e!=="selectionchange"&&(Sd.has(e)||go(e,!1,t),go(e,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Gn]||(i[Gn]=!0,go("selectionchange",!1,i))}}function Ou(t,i,e,n){switch(gu(i)){case 1:var r=Ah;break;case 4:r=Hh;break;default:r=zs}e=r.bind(null,i,e,t),r=void 0,!Uo||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(r=!0),n?r!==void 0?t.addEventListener(i,e,{capture:!0,passive:r}):t.addEventListener(i,e,!0):r!==void 0?t.addEventListener(i,e,{passive:r}):t.addEventListener(i,e,!1)}function mo(t,i,e,n,r){var o=n;if(!(i&1)&&!(i&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var l=n.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(s===4)for(s=n.return;s!==null;){var a=s.tag;if((a===3||a===4)&&(a=s.stateNode.containerInfo,a===r||a.nodeType===8&&a.parentNode===r))return;s=s.return}for(;l!==null;){if(s=Jt(l),s===null)return;if(a=s.tag,a===5||a===6){n=o=s;continue e}l=l.parentNode}}n=n.return}tu(function(){var u=o,c=ks(e),h=[];e:{var d=Fu.get(t);if(d!==void 0){var m=Ns,y=t;switch(t){case"keypress":if(nr(e)===0)break e;case"keydown":case"keyup":m=ed;break;case"focusin":y="focus",m=lo;break;case"focusout":y="blur",m=lo;break;case"beforeblur":case"afterblur":m=lo;break;case"click":if(e.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Oa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=jh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=nd;break;case Cu:case Ru:case Du:m=Gh;break;case ku:m=od;break;case"scroll":m=bh;break;case"wheel":m=ad;break;case"copy":case"cut":case"paste":m=qh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Ma}var T=(i&4)!==0,P=!T&&t==="scroll",v=T?d!==null?d+"Capture":null:d;T=[];for(var w=u,S;w!==null;){S=w;var R=S.stateNode;if(S.tag===5&&R!==null&&(S=R,v!==null&&(R=dn(w,v),R!=null&&T.push(wn(w,R,S)))),P)break;w=w.return}0<T.length&&(d=new m(d,y,null,e,c),h.push({event:d,listeners:T}))}}if(!(i&7)){e:{if(d=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",d&&e!==Ho&&(y=e.relatedTarget||e.fromElement)&&(Jt(y)||y[Pt]))break e;if((m||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,m?(y=e.relatedTarget||e.toElement,m=u,y=y?Jt(y):null,y!==null&&(P=ui(y),y!==P||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(T=Oa,R="onMouseLeave",v="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(T=Ma,R="onPointerLeave",v="onPointerEnter",w="pointer"),P=m==null?d:yi(m),S=y==null?d:yi(y),d=new T(R,w+"leave",m,e,c),d.target=P,d.relatedTarget=S,R=null,Jt(c)===u&&(T=new T(v,w+"enter",y,e,c),T.target=S,T.relatedTarget=P,R=T),P=R,m&&y)t:{for(T=m,v=y,w=0,S=T;S;S=di(S))w++;for(S=0,R=v;R;R=di(R))S++;for(;0<w-S;)T=di(T),w--;for(;0<S-w;)v=di(v),S--;for(;w--;){if(T===v||v!==null&&T===v.alternate)break t;T=di(T),v=di(v)}T=null}else T=null;m!==null&&Ga(h,d,m,T,!1),y!==null&&P!==null&&Ga(h,P,y,T,!0)}}e:{if(d=u?yi(u):window,m=d.nodeName&&d.nodeName.toLowerCase(),m==="select"||m==="input"&&d.type==="file")var k=pd;else if(Ia(d))if(xu)k=yd;else{k=md;var F=gd}else(m=d.nodeName)&&m.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(k=vd);if(k&&(k=k(t,u))){Tu(h,k,e,c);break e}F&&F(t,d,u),t==="focusout"&&(F=d._wrapperState)&&F.controlled&&d.type==="number"&&Mo(d,"number",d.value)}switch(F=u?yi(u):window,t){case"focusin":(Ia(F)||F.contentEditable==="true")&&(mi=F,Zo=u,on=null);break;case"focusout":on=Zo=mi=null;break;case"mousedown":qo=!0;break;case"contextmenu":case"mouseup":case"dragend":qo=!1,ja(h,e,c);break;case"selectionchange":if(xd)break;case"keydown":case"keyup":ja(h,e,c)}var N;if(Is)e:{switch(t){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else gi?yu(t,e)&&(B="onCompositionEnd"):t==="keydown"&&e.keyCode===229&&(B="onCompositionStart");B&&(vu&&e.locale!=="ko"&&(gi||B!=="onCompositionStart"?B==="onCompositionEnd"&&gi&&(N=mu()):(Nt=c,Ms="value"in Nt?Nt.value:Nt.textContent,gi=!0)),F=yr(u,B),0<F.length&&(B=new za(B,t,null,e,c),h.push({event:B,listeners:F}),N?B.data=N:(N=wu(e),N!==null&&(B.data=N)))),(N=ud?cd(t,e):hd(t,e))&&(u=yr(u,"onBeforeInput"),0<u.length&&(c=new za("onBeforeInput","beforeinput",null,e,c),h.push({event:c,listeners:u}),c.data=N))}Lu(h,i)})}function wn(t,i,e){return{instance:t,listener:i,currentTarget:e}}function yr(t,i){for(var e=i+"Capture",n=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=dn(t,e),o!=null&&n.unshift(wn(t,o,r)),o=dn(t,i),o!=null&&n.push(wn(t,o,r))),t=t.return}return n}function di(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ga(t,i,e,n,r){for(var o=i._reactName,s=[];e!==null&&e!==n;){var l=e,a=l.alternate,u=l.stateNode;if(a!==null&&a===n)break;l.tag===5&&u!==null&&(l=u,r?(a=dn(e,o),a!=null&&s.unshift(wn(e,a,l))):r||(a=dn(e,o),a!=null&&s.push(wn(e,a,l)))),e=e.return}s.length!==0&&t.push({event:i,listeners:s})}var Pd=/\r\n?/g,Cd=/\u0000|\uFFFD/g;function Za(t){return(typeof t=="string"?t:""+t).replace(Pd,`
`).replace(Cd,"")}function Zn(t,i,e){if(i=Za(i),Za(t)!==i&&e)throw Error(z(425))}function wr(){}var Xo=null,Qo=null;function Yo(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ko=typeof setTimeout=="function"?setTimeout:void 0,Rd=typeof clearTimeout=="function"?clearTimeout:void 0,qa=typeof Promise=="function"?Promise:void 0,Dd=typeof queueMicrotask=="function"?queueMicrotask:typeof qa<"u"?function(t){return qa.resolve(null).then(t).catch(kd)}:Ko;function kd(t){setTimeout(function(){throw t})}function vo(t,i){var e=i,n=0;do{var r=e.nextSibling;if(t.removeChild(e),r&&r.nodeType===8)if(e=r.data,e==="/$"){if(n===0){t.removeChild(r),gn(i);return}n--}else e!=="$"&&e!=="$?"&&e!=="$!"||n++;e=r}while(e);gn(i)}function bt(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return t}function Xa(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var e=t.data;if(e==="$"||e==="$!"||e==="$?"){if(i===0)return t;i--}else e==="/$"&&i++}t=t.previousSibling}return null}var bi=Math.random().toString(36).slice(2),mt="__reactFiber$"+bi,Tn="__reactProps$"+bi,Pt="__reactContainer$"+bi,Jo="__reactEvents$"+bi,Fd="__reactListeners$"+bi,Ld="__reactHandles$"+bi;function Jt(t){var i=t[mt];if(i)return i;for(var e=t.parentNode;e;){if(i=e[Pt]||e[mt]){if(e=i.alternate,i.child!==null||e!==null&&e.child!==null)for(t=Xa(t);t!==null;){if(e=t[mt])return e;t=Xa(t)}return i}t=e,e=t.parentNode}return null}function Fn(t){return t=t[mt]||t[Pt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function yi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function br(t){return t[Tn]||null}var $o=[],wi=-1;function Xt(t){return{current:t}}function ue(t){0>wi||(t.current=$o[wi],$o[wi]=null,wi--)}function oe(t,i){wi++,$o[wi]=t.current,t.current=i}var Zt={},Ne=Xt(Zt),je=Xt(!1),ni=Zt;function Oi(t,i){var e=t.type.contextTypes;if(!e)return Zt;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===i)return n.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in e)r[o]=i[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=r),r}function We(t){return t=t.childContextTypes,t!=null}function Tr(){ue(je),ue(Ne)}function Qa(t,i,e){if(Ne.current!==Zt)throw Error(z(168));oe(Ne,i),oe(je,e)}function zu(t,i,e){var n=t.stateNode;if(i=i.childContextTypes,typeof n.getChildContext!="function")return e;n=n.getChildContext();for(var r in n)if(!(r in i))throw Error(z(108,gh(t)||"Unknown",r));return fe({},e,n)}function xr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Zt,ni=Ne.current,oe(Ne,t),oe(je,je.current),!0}function Ya(t,i,e){var n=t.stateNode;if(!n)throw Error(z(169));e?(t=zu(t,i,ni),n.__reactInternalMemoizedMergedChildContext=t,ue(je),ue(Ne),oe(Ne,t)):ue(je),oe(je,e)}var Tt=null,Ur=!1,yo=!1;function Mu(t){Tt===null?Tt=[t]:Tt.push(t)}function Od(t){Ur=!0,Mu(t)}function Qt(){if(!yo&&Tt!==null){yo=!0;var t=0,i=ne;try{var e=Tt;for(ne=1;t<e.length;t++){var n=e[t];do n=n(!0);while(n!==null)}Tt=null,Ur=!1}catch(r){throw Tt!==null&&(Tt=Tt.slice(t+1)),ou(Fs,Qt),r}finally{ne=i,yo=!1}}return null}var Ti=[],xi=0,_r=null,Er=0,et=[],tt=0,ri=null,xt=1,_t="";function Yt(t,i){Ti[xi++]=Er,Ti[xi++]=_r,_r=t,Er=i}function Nu(t,i,e){et[tt++]=xt,et[tt++]=_t,et[tt++]=ri,ri=t;var n=xt;t=_t;var r=32-ht(n)-1;n&=~(1<<r),e+=1;var o=32-ht(i)+r;if(30<o){var s=r-r%5;o=(n&(1<<s)-1).toString(32),n>>=s,r-=s,xt=1<<32-ht(i)+r|e<<r|n,_t=o+t}else xt=1<<o|e<<r|n,_t=t}function Hs(t){t.return!==null&&(Yt(t,1),Nu(t,1,0))}function bs(t){for(;t===_r;)_r=Ti[--xi],Ti[xi]=null,Er=Ti[--xi],Ti[xi]=null;for(;t===ri;)ri=et[--tt],et[tt]=null,_t=et[--tt],et[tt]=null,xt=et[--tt],et[tt]=null}var Xe=null,qe=null,ce=!1,ct=null;function Bu(t,i){var e=it(5,null,null,0);e.elementType="DELETED",e.stateNode=i,e.return=t,i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)}function Ka(t,i){switch(t.tag){case 5:var e=t.type;return i=i.nodeType!==1||e.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(t.stateNode=i,Xe=t,qe=bt(i.firstChild),!0):!1;case 6:return i=t.pendingProps===""||i.nodeType!==3?null:i,i!==null?(t.stateNode=i,Xe=t,qe=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(e=ri!==null?{id:xt,overflow:_t}:null,t.memoizedState={dehydrated:i,treeContext:e,retryLane:1073741824},e=it(18,null,null,0),e.stateNode=i,e.return=t,t.child=e,Xe=t,qe=null,!0):!1;default:return!1}}function es(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ts(t){if(ce){var i=qe;if(i){var e=i;if(!Ka(t,i)){if(es(t))throw Error(z(418));i=bt(e.nextSibling);var n=Xe;i&&Ka(t,i)?Bu(n,e):(t.flags=t.flags&-4097|2,ce=!1,Xe=t)}}else{if(es(t))throw Error(z(418));t.flags=t.flags&-4097|2,ce=!1,Xe=t}}}function Ja(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xe=t}function qn(t){if(t!==Xe)return!1;if(!ce)return Ja(t),ce=!0,!1;var i;if((i=t.tag!==3)&&!(i=t.tag!==5)&&(i=t.type,i=i!=="head"&&i!=="body"&&!Yo(t.type,t.memoizedProps)),i&&(i=qe)){if(es(t))throw Iu(),Error(z(418));for(;i;)Bu(t,i),i=bt(i.nextSibling)}if(Ja(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8){var e=t.data;if(e==="/$"){if(i===0){qe=bt(t.nextSibling);break e}i--}else e!=="$"&&e!=="$!"&&e!=="$?"||i++}t=t.nextSibling}qe=null}}else qe=Xe?bt(t.stateNode.nextSibling):null;return!0}function Iu(){for(var t=qe;t;)t=bt(t.nextSibling)}function zi(){qe=Xe=null,ce=!1}function Us(t){ct===null?ct=[t]:ct.push(t)}var zd=Dt.ReactCurrentBatchConfig;function qi(t,i,e){if(t=e.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(z(309));var n=e.stateNode}if(!n)throw Error(z(147,t));var r=n,o=""+t;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===o?i.ref:(i=function(s){var l=r.refs;s===null?delete l[o]:l[o]=s},i._stringRef=o,i)}if(typeof t!="string")throw Error(z(284));if(!e._owner)throw Error(z(290,t))}return t}function Xn(t,i){throw t=Object.prototype.toString.call(i),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t))}function $a(t){var i=t._init;return i(t._payload)}function Au(t){function i(v,w){if(t){var S=v.deletions;S===null?(v.deletions=[w],v.flags|=16):S.push(w)}}function e(v,w){if(!t)return null;for(;w!==null;)i(v,w),w=w.sibling;return null}function n(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function r(v,w){return v=Vt(v,w),v.index=0,v.sibling=null,v}function o(v,w,S){return v.index=S,t?(S=v.alternate,S!==null?(S=S.index,S<w?(v.flags|=2,w):S):(v.flags|=2,w)):(v.flags|=1048576,w)}function s(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,w,S,R){return w===null||w.tag!==6?(w=Po(S,v.mode,R),w.return=v,w):(w=r(w,S),w.return=v,w)}function a(v,w,S,R){var k=S.type;return k===pi?c(v,w,S.props.children,R,S.key):w!==null&&(w.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Lt&&$a(k)===w.type)?(R=r(w,S.props),R.ref=qi(v,w,S),R.return=v,R):(R=cr(S.type,S.key,S.props,null,v.mode,R),R.ref=qi(v,w,S),R.return=v,R)}function u(v,w,S,R){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=Co(S,v.mode,R),w.return=v,w):(w=r(w,S.children||[]),w.return=v,w)}function c(v,w,S,R,k){return w===null||w.tag!==7?(w=ii(S,v.mode,R,k),w.return=v,w):(w=r(w,S),w.return=v,w)}function h(v,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Po(""+w,v.mode,S),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case In:return S=cr(w.type,w.key,w.props,null,v.mode,S),S.ref=qi(v,null,w),S.return=v,S;case fi:return w=Co(w,v.mode,S),w.return=v,w;case Lt:var R=w._init;return h(v,R(w._payload),S)}if(Ki(w)||ji(w))return w=ii(w,v.mode,S,null),w.return=v,w;Xn(v,w)}return null}function d(v,w,S,R){var k=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return k!==null?null:l(v,w,""+S,R);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case In:return S.key===k?a(v,w,S,R):null;case fi:return S.key===k?u(v,w,S,R):null;case Lt:return k=S._init,d(v,w,k(S._payload),R)}if(Ki(S)||ji(S))return k!==null?null:c(v,w,S,R,null);Xn(v,S)}return null}function m(v,w,S,R,k){if(typeof R=="string"&&R!==""||typeof R=="number")return v=v.get(S)||null,l(w,v,""+R,k);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case In:return v=v.get(R.key===null?S:R.key)||null,a(w,v,R,k);case fi:return v=v.get(R.key===null?S:R.key)||null,u(w,v,R,k);case Lt:var F=R._init;return m(v,w,S,F(R._payload),k)}if(Ki(R)||ji(R))return v=v.get(S)||null,c(w,v,R,k,null);Xn(w,R)}return null}function y(v,w,S,R){for(var k=null,F=null,N=w,B=w=0,j=null;N!==null&&B<S.length;B++){N.index>B?(j=N,N=null):j=N.sibling;var U=d(v,N,S[B],R);if(U===null){N===null&&(N=j);break}t&&N&&U.alternate===null&&i(v,N),w=o(U,w,B),F===null?k=U:F.sibling=U,F=U,N=j}if(B===S.length)return e(v,N),ce&&Yt(v,B),k;if(N===null){for(;B<S.length;B++)N=h(v,S[B],R),N!==null&&(w=o(N,w,B),F===null?k=N:F.sibling=N,F=N);return ce&&Yt(v,B),k}for(N=n(v,N);B<S.length;B++)j=m(N,v,B,S[B],R),j!==null&&(t&&j.alternate!==null&&N.delete(j.key===null?B:j.key),w=o(j,w,B),F===null?k=j:F.sibling=j,F=j);return t&&N.forEach(function(X){return i(v,X)}),ce&&Yt(v,B),k}function T(v,w,S,R){var k=ji(S);if(typeof k!="function")throw Error(z(150));if(S=k.call(S),S==null)throw Error(z(151));for(var F=k=null,N=w,B=w=0,j=null,U=S.next();N!==null&&!U.done;B++,U=S.next()){N.index>B?(j=N,N=null):j=N.sibling;var X=d(v,N,U.value,R);if(X===null){N===null&&(N=j);break}t&&N&&X.alternate===null&&i(v,N),w=o(X,w,B),F===null?k=X:F.sibling=X,F=X,N=j}if(U.done)return e(v,N),ce&&Yt(v,B),k;if(N===null){for(;!U.done;B++,U=S.next())U=h(v,U.value,R),U!==null&&(w=o(U,w,B),F===null?k=U:F.sibling=U,F=U);return ce&&Yt(v,B),k}for(N=n(v,N);!U.done;B++,U=S.next())U=m(N,v,B,U.value,R),U!==null&&(t&&U.alternate!==null&&N.delete(U.key===null?B:U.key),w=o(U,w,B),F===null?k=U:F.sibling=U,F=U);return t&&N.forEach(function(q){return i(v,q)}),ce&&Yt(v,B),k}function P(v,w,S,R){if(typeof S=="object"&&S!==null&&S.type===pi&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case In:e:{for(var k=S.key,F=w;F!==null;){if(F.key===k){if(k=S.type,k===pi){if(F.tag===7){e(v,F.sibling),w=r(F,S.props.children),w.return=v,v=w;break e}}else if(F.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Lt&&$a(k)===F.type){e(v,F.sibling),w=r(F,S.props),w.ref=qi(v,F,S),w.return=v,v=w;break e}e(v,F);break}else i(v,F);F=F.sibling}S.type===pi?(w=ii(S.props.children,v.mode,R,S.key),w.return=v,v=w):(R=cr(S.type,S.key,S.props,null,v.mode,R),R.ref=qi(v,w,S),R.return=v,v=R)}return s(v);case fi:e:{for(F=S.key;w!==null;){if(w.key===F)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){e(v,w.sibling),w=r(w,S.children||[]),w.return=v,v=w;break e}else{e(v,w);break}else i(v,w);w=w.sibling}w=Co(S,v.mode,R),w.return=v,v=w}return s(v);case Lt:return F=S._init,P(v,w,F(S._payload),R)}if(Ki(S))return y(v,w,S,R);if(ji(S))return T(v,w,S,R);Xn(v,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(e(v,w.sibling),w=r(w,S),w.return=v,v=w):(e(v,w),w=Po(S,v.mode,R),w.return=v,v=w),s(v)):e(v,w)}return P}var Mi=Au(!0),Hu=Au(!1),Sr=Xt(null),Pr=null,_i=null,js=null;function Ws(){js=_i=Pr=null}function Vs(t){var i=Sr.current;ue(Sr),t._currentValue=i}function is(t,i,e){for(;t!==null;){var n=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,n!==null&&(n.childLanes|=i)):n!==null&&(n.childLanes&i)!==i&&(n.childLanes|=i),t===e)break;t=t.return}}function ki(t,i){Pr=t,js=_i=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&i&&(Ue=!0),t.firstContext=null)}function rt(t){var i=t._currentValue;if(js!==t)if(t={context:t,memoizedValue:i,next:null},_i===null){if(Pr===null)throw Error(z(308));_i=t,Pr.dependencies={lanes:0,firstContext:t}}else _i=_i.next=t;return i}var $t=null;function Gs(t){$t===null?$t=[t]:$t.push(t)}function bu(t,i,e,n){var r=i.interleaved;return r===null?(e.next=e,Gs(i)):(e.next=r.next,r.next=e),i.interleaved=e,Ct(t,n)}function Ct(t,i){t.lanes|=i;var e=t.alternate;for(e!==null&&(e.lanes|=i),e=t,t=t.return;t!==null;)t.childLanes|=i,e=t.alternate,e!==null&&(e.childLanes|=i),e=t,t=t.return;return e.tag===3?e.stateNode:null}var Ot=!1;function Zs(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uu(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Et(t,i){return{eventTime:t,lane:i,tag:0,payload:null,callback:null,next:null}}function Ut(t,i,e){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ee&2){var r=n.pending;return r===null?i.next=i:(i.next=r.next,r.next=i),n.pending=i,Ct(t,e)}return r=n.interleaved,r===null?(i.next=i,Gs(n)):(i.next=r.next,r.next=i),n.interleaved=i,Ct(t,e)}function rr(t,i,e){if(i=i.updateQueue,i!==null&&(i=i.shared,(e&4194240)!==0)){var n=i.lanes;n&=t.pendingLanes,e|=n,i.lanes=e,Ls(t,e)}}function el(t,i){var e=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,e===n)){var r=null,o=null;if(e=e.firstBaseUpdate,e!==null){do{var s={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};o===null?r=o=s:o=o.next=s,e=e.next}while(e!==null);o===null?r=o=i:o=o.next=i}else r=o=i;e={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=e;return}t=e.lastBaseUpdate,t===null?e.firstBaseUpdate=i:t.next=i,e.lastBaseUpdate=i}function Cr(t,i,e,n){var r=t.updateQueue;Ot=!1;var o=r.firstBaseUpdate,s=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var a=l,u=a.next;a.next=null,s===null?o=u:s.next=u,s=a;var c=t.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==s&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=a))}if(o!==null){var h=r.baseState;s=0,c=u=a=null,l=o;do{var d=l.lane,m=l.eventTime;if((n&d)===d){c!==null&&(c=c.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,T=l;switch(d=i,m=e,T.tag){case 1:if(y=T.payload,typeof y=="function"){h=y.call(m,h,d);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=T.payload,d=typeof y=="function"?y.call(m,h,d):y,d==null)break e;h=fe({},h,d);break e;case 2:Ot=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,d=r.effects,d===null?r.effects=[l]:d.push(l))}else m={eventTime:m,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=m,a=h):c=c.next=m,s|=d;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;d=l,l=d.next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}while(!0);if(c===null&&(a=h),r.baseState=a,r.firstBaseUpdate=u,r.lastBaseUpdate=c,i=r.shared.interleaved,i!==null){r=i;do s|=r.lane,r=r.next;while(r!==i)}else o===null&&(r.shared.lanes=0);si|=s,t.lanes=s,t.memoizedState=h}}function tl(t,i,e){if(t=i.effects,i.effects=null,t!==null)for(i=0;i<t.length;i++){var n=t[i],r=n.callback;if(r!==null){if(n.callback=null,n=e,typeof r!="function")throw Error(z(191,r));r.call(n)}}}var Ln={},yt=Xt(Ln),xn=Xt(Ln),_n=Xt(Ln);function ei(t){if(t===Ln)throw Error(z(174));return t}function qs(t,i){switch(oe(_n,i),oe(xn,t),oe(yt,Ln),t=i.nodeType,t){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Bo(null,"");break;default:t=t===8?i.parentNode:i,i=t.namespaceURI||null,t=t.tagName,i=Bo(i,t)}ue(yt),oe(yt,i)}function Ni(){ue(yt),ue(xn),ue(_n)}function ju(t){ei(_n.current);var i=ei(yt.current),e=Bo(i,t.type);i!==e&&(oe(xn,t),oe(yt,e))}function Xs(t){xn.current===t&&(ue(yt),ue(xn))}var he=Xt(0);function Rr(t){for(var i=t;i!==null;){if(i.tag===13){var e=i.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var wo=[];function Qs(){for(var t=0;t<wo.length;t++)wo[t]._workInProgressVersionPrimary=null;wo.length=0}var or=Dt.ReactCurrentDispatcher,To=Dt.ReactCurrentBatchConfig,oi=0,de=null,Se=null,Re=null,Dr=!1,sn=!1,En=0,Md=0;function Oe(){throw Error(z(321))}function Ys(t,i){if(i===null)return!1;for(var e=0;e<i.length&&e<t.length;e++)if(!ft(t[e],i[e]))return!1;return!0}function Ks(t,i,e,n,r,o){if(oi=o,de=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,or.current=t===null||t.memoizedState===null?Ad:Hd,t=e(n,r),sn){o=0;do{if(sn=!1,En=0,25<=o)throw Error(z(301));o+=1,Re=Se=null,i.updateQueue=null,or.current=bd,t=e(n,r)}while(sn)}if(or.current=kr,i=Se!==null&&Se.next!==null,oi=0,Re=Se=de=null,Dr=!1,i)throw Error(z(300));return t}function Js(){var t=En!==0;return En=0,t}function gt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Re===null?de.memoizedState=Re=t:Re=Re.next=t,Re}function ot(){if(Se===null){var t=de.alternate;t=t!==null?t.memoizedState:null}else t=Se.next;var i=Re===null?de.memoizedState:Re.next;if(i!==null)Re=i,Se=t;else{if(t===null)throw Error(z(310));Se=t,t={memoizedState:Se.memoizedState,baseState:Se.baseState,baseQueue:Se.baseQueue,queue:Se.queue,next:null},Re===null?de.memoizedState=Re=t:Re=Re.next=t}return Re}function Sn(t,i){return typeof i=="function"?i(t):i}function xo(t){var i=ot(),e=i.queue;if(e===null)throw Error(z(311));e.lastRenderedReducer=t;var n=Se,r=n.baseQueue,o=e.pending;if(o!==null){if(r!==null){var s=r.next;r.next=o.next,o.next=s}n.baseQueue=r=o,e.pending=null}if(r!==null){o=r.next,n=n.baseState;var l=s=null,a=null,u=o;do{var c=u.lane;if((oi&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=h,s=n):a=a.next=h,de.lanes|=c,si|=c}u=u.next}while(u!==null&&u!==o);a===null?s=n:a.next=l,ft(n,i.memoizedState)||(Ue=!0),i.memoizedState=n,i.baseState=s,i.baseQueue=a,e.lastRenderedState=n}if(t=e.interleaved,t!==null){r=t;do o=r.lane,de.lanes|=o,si|=o,r=r.next;while(r!==t)}else r===null&&(e.lanes=0);return[i.memoizedState,e.dispatch]}function _o(t){var i=ot(),e=i.queue;if(e===null)throw Error(z(311));e.lastRenderedReducer=t;var n=e.dispatch,r=e.pending,o=i.memoizedState;if(r!==null){e.pending=null;var s=r=r.next;do o=t(o,s.action),s=s.next;while(s!==r);ft(o,i.memoizedState)||(Ue=!0),i.memoizedState=o,i.baseQueue===null&&(i.baseState=o),e.lastRenderedState=o}return[o,n]}function Wu(){}function Vu(t,i){var e=de,n=ot(),r=i(),o=!ft(n.memoizedState,r);if(o&&(n.memoizedState=r,Ue=!0),n=n.queue,$s(qu.bind(null,e,n,t),[t]),n.getSnapshot!==i||o||Re!==null&&Re.memoizedState.tag&1){if(e.flags|=2048,Pn(9,Zu.bind(null,e,n,r,i),void 0,null),De===null)throw Error(z(349));oi&30||Gu(e,i,r)}return r}function Gu(t,i,e){t.flags|=16384,t={getSnapshot:i,value:e},i=de.updateQueue,i===null?(i={lastEffect:null,stores:null},de.updateQueue=i,i.stores=[t]):(e=i.stores,e===null?i.stores=[t]:e.push(t))}function Zu(t,i,e,n){i.value=e,i.getSnapshot=n,Xu(i)&&Qu(t)}function qu(t,i,e){return e(function(){Xu(i)&&Qu(t)})}function Xu(t){var i=t.getSnapshot;t=t.value;try{var e=i();return!ft(t,e)}catch{return!0}}function Qu(t){var i=Ct(t,1);i!==null&&dt(i,t,1,-1)}function il(t){var i=gt();return typeof t=="function"&&(t=t()),i.memoizedState=i.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sn,lastRenderedState:t},i.queue=t,t=t.dispatch=Id.bind(null,de,t),[i.memoizedState,t]}function Pn(t,i,e,n){return t={tag:t,create:i,destroy:e,deps:n,next:null},i=de.updateQueue,i===null?(i={lastEffect:null,stores:null},de.updateQueue=i,i.lastEffect=t.next=t):(e=i.lastEffect,e===null?i.lastEffect=t.next=t:(n=e.next,e.next=t,t.next=n,i.lastEffect=t)),t}function Yu(){return ot().memoizedState}function sr(t,i,e,n){var r=gt();de.flags|=t,r.memoizedState=Pn(1|i,e,void 0,n===void 0?null:n)}function jr(t,i,e,n){var r=ot();n=n===void 0?null:n;var o=void 0;if(Se!==null){var s=Se.memoizedState;if(o=s.destroy,n!==null&&Ys(n,s.deps)){r.memoizedState=Pn(i,e,o,n);return}}de.flags|=t,r.memoizedState=Pn(1|i,e,o,n)}function nl(t,i){return sr(8390656,8,t,i)}function $s(t,i){return jr(2048,8,t,i)}function Ku(t,i){return jr(4,2,t,i)}function Ju(t,i){return jr(4,4,t,i)}function $u(t,i){if(typeof i=="function")return t=t(),i(t),function(){i(null)};if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function ec(t,i,e){return e=e!=null?e.concat([t]):null,jr(4,4,$u.bind(null,i,t),e)}function ea(){}function tc(t,i){var e=ot();i=i===void 0?null:i;var n=e.memoizedState;return n!==null&&i!==null&&Ys(i,n[1])?n[0]:(e.memoizedState=[t,i],t)}function ic(t,i){var e=ot();i=i===void 0?null:i;var n=e.memoizedState;return n!==null&&i!==null&&Ys(i,n[1])?n[0]:(t=t(),e.memoizedState=[t,i],t)}function nc(t,i,e){return oi&21?(ft(e,i)||(e=lu(),de.lanes|=e,si|=e,t.baseState=!0),i):(t.baseState&&(t.baseState=!1,Ue=!0),t.memoizedState=e)}function Nd(t,i){var e=ne;ne=e!==0&&4>e?e:4,t(!0);var n=To.transition;To.transition={};try{t(!1),i()}finally{ne=e,To.transition=n}}function rc(){return ot().memoizedState}function Bd(t,i,e){var n=Wt(t);if(e={lane:n,action:e,hasEagerState:!1,eagerState:null,next:null},oc(t))sc(i,e);else if(e=bu(t,i,e,n),e!==null){var r=Ie();dt(e,t,n,r),ac(e,i,n)}}function Id(t,i,e){var n=Wt(t),r={lane:n,action:e,hasEagerState:!1,eagerState:null,next:null};if(oc(t))sc(i,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=i.lastRenderedReducer,o!==null))try{var s=i.lastRenderedState,l=o(s,e);if(r.hasEagerState=!0,r.eagerState=l,ft(l,s)){var a=i.interleaved;a===null?(r.next=r,Gs(i)):(r.next=a.next,a.next=r),i.interleaved=r;return}}catch{}finally{}e=bu(t,i,r,n),e!==null&&(r=Ie(),dt(e,t,n,r),ac(e,i,n))}}function oc(t){var i=t.alternate;return t===de||i!==null&&i===de}function sc(t,i){sn=Dr=!0;var e=t.pending;e===null?i.next=i:(i.next=e.next,e.next=i),t.pending=i}function ac(t,i,e){if(e&4194240){var n=i.lanes;n&=t.pendingLanes,e|=n,i.lanes=e,Ls(t,e)}}var kr={readContext:rt,useCallback:Oe,useContext:Oe,useEffect:Oe,useImperativeHandle:Oe,useInsertionEffect:Oe,useLayoutEffect:Oe,useMemo:Oe,useReducer:Oe,useRef:Oe,useState:Oe,useDebugValue:Oe,useDeferredValue:Oe,useTransition:Oe,useMutableSource:Oe,useSyncExternalStore:Oe,useId:Oe,unstable_isNewReconciler:!1},Ad={readContext:rt,useCallback:function(t,i){return gt().memoizedState=[t,i===void 0?null:i],t},useContext:rt,useEffect:nl,useImperativeHandle:function(t,i,e){return e=e!=null?e.concat([t]):null,sr(4194308,4,$u.bind(null,i,t),e)},useLayoutEffect:function(t,i){return sr(4194308,4,t,i)},useInsertionEffect:function(t,i){return sr(4,2,t,i)},useMemo:function(t,i){var e=gt();return i=i===void 0?null:i,t=t(),e.memoizedState=[t,i],t},useReducer:function(t,i,e){var n=gt();return i=e!==void 0?e(i):i,n.memoizedState=n.baseState=i,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},n.queue=t,t=t.dispatch=Bd.bind(null,de,t),[n.memoizedState,t]},useRef:function(t){var i=gt();return t={current:t},i.memoizedState=t},useState:il,useDebugValue:ea,useDeferredValue:function(t){return gt().memoizedState=t},useTransition:function(){var t=il(!1),i=t[0];return t=Nd.bind(null,t[1]),gt().memoizedState=t,[i,t]},useMutableSource:function(){},useSyncExternalStore:function(t,i,e){var n=de,r=gt();if(ce){if(e===void 0)throw Error(z(407));e=e()}else{if(e=i(),De===null)throw Error(z(349));oi&30||Gu(n,i,e)}r.memoizedState=e;var o={value:e,getSnapshot:i};return r.queue=o,nl(qu.bind(null,n,o,t),[t]),n.flags|=2048,Pn(9,Zu.bind(null,n,o,e,i),void 0,null),e},useId:function(){var t=gt(),i=De.identifierPrefix;if(ce){var e=_t,n=xt;e=(n&~(1<<32-ht(n)-1)).toString(32)+e,i=":"+i+"R"+e,e=En++,0<e&&(i+="H"+e.toString(32)),i+=":"}else e=Md++,i=":"+i+"r"+e.toString(32)+":";return t.memoizedState=i},unstable_isNewReconciler:!1},Hd={readContext:rt,useCallback:tc,useContext:rt,useEffect:$s,useImperativeHandle:ec,useInsertionEffect:Ku,useLayoutEffect:Ju,useMemo:ic,useReducer:xo,useRef:Yu,useState:function(){return xo(Sn)},useDebugValue:ea,useDeferredValue:function(t){var i=ot();return nc(i,Se.memoizedState,t)},useTransition:function(){var t=xo(Sn)[0],i=ot().memoizedState;return[t,i]},useMutableSource:Wu,useSyncExternalStore:Vu,useId:rc,unstable_isNewReconciler:!1},bd={readContext:rt,useCallback:tc,useContext:rt,useEffect:$s,useImperativeHandle:ec,useInsertionEffect:Ku,useLayoutEffect:Ju,useMemo:ic,useReducer:_o,useRef:Yu,useState:function(){return _o(Sn)},useDebugValue:ea,useDeferredValue:function(t){var i=ot();return Se===null?i.memoizedState=t:nc(i,Se.memoizedState,t)},useTransition:function(){var t=_o(Sn)[0],i=ot().memoizedState;return[t,i]},useMutableSource:Wu,useSyncExternalStore:Vu,useId:rc,unstable_isNewReconciler:!1};function lt(t,i){if(t&&t.defaultProps){i=fe({},i),t=t.defaultProps;for(var e in t)i[e]===void 0&&(i[e]=t[e]);return i}return i}function ns(t,i,e,n){i=t.memoizedState,e=e(n,i),e=e==null?i:fe({},i,e),t.memoizedState=e,t.lanes===0&&(t.updateQueue.baseState=e)}var Wr={isMounted:function(t){return(t=t._reactInternals)?ui(t)===t:!1},enqueueSetState:function(t,i,e){t=t._reactInternals;var n=Ie(),r=Wt(t),o=Et(n,r);o.payload=i,e!=null&&(o.callback=e),i=Ut(t,o,r),i!==null&&(dt(i,t,r,n),rr(i,t,r))},enqueueReplaceState:function(t,i,e){t=t._reactInternals;var n=Ie(),r=Wt(t),o=Et(n,r);o.tag=1,o.payload=i,e!=null&&(o.callback=e),i=Ut(t,o,r),i!==null&&(dt(i,t,r,n),rr(i,t,r))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var e=Ie(),n=Wt(t),r=Et(e,n);r.tag=2,i!=null&&(r.callback=i),i=Ut(t,r,n),i!==null&&(dt(i,t,n,e),rr(i,t,n))}};function rl(t,i,e,n,r,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,s):i.prototype&&i.prototype.isPureReactComponent?!vn(e,n)||!vn(r,o):!0}function lc(t,i,e){var n=!1,r=Zt,o=i.contextType;return typeof o=="object"&&o!==null?o=rt(o):(r=We(i)?ni:Ne.current,n=i.contextTypes,o=(n=n!=null)?Oi(t,r):Zt),i=new i(e,o),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Wr,t.stateNode=i,i._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),i}function ol(t,i,e,n){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(e,n),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(e,n),i.state!==t&&Wr.enqueueReplaceState(i,i.state,null)}function rs(t,i,e,n){var r=t.stateNode;r.props=e,r.state=t.memoizedState,r.refs={},Zs(t);var o=i.contextType;typeof o=="object"&&o!==null?r.context=rt(o):(o=We(i)?ni:Ne.current,r.context=Oi(t,o)),r.state=t.memoizedState,o=i.getDerivedStateFromProps,typeof o=="function"&&(ns(t,i,o,e),r.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(i=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),i!==r.state&&Wr.enqueueReplaceState(r,r.state,null),Cr(t,e,r,n),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Bi(t,i){try{var e="",n=i;do e+=ph(n),n=n.return;while(n);var r=e}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:i,stack:r,digest:null}}function Eo(t,i,e){return{value:t,source:null,stack:e??null,digest:i??null}}function os(t,i){try{console.error(i.value)}catch(e){setTimeout(function(){throw e})}}var Ud=typeof WeakMap=="function"?WeakMap:Map;function uc(t,i,e){e=Et(-1,e),e.tag=3,e.payload={element:null};var n=i.value;return e.callback=function(){Lr||(Lr=!0,gs=n),os(t,i)},e}function cc(t,i,e){e=Et(-1,e),e.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var r=i.value;e.payload=function(){return n(r)},e.callback=function(){os(t,i)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(e.callback=function(){os(t,i),typeof n!="function"&&(jt===null?jt=new Set([this]):jt.add(this));var s=i.stack;this.componentDidCatch(i.value,{componentStack:s!==null?s:""})}),e}function sl(t,i,e){var n=t.pingCache;if(n===null){n=t.pingCache=new Ud;var r=new Set;n.set(i,r)}else r=n.get(i),r===void 0&&(r=new Set,n.set(i,r));r.has(e)||(r.add(e),t=tf.bind(null,t,i,e),i.then(t,t))}function al(t){do{var i;if((i=t.tag===13)&&(i=t.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return t;t=t.return}while(t!==null);return null}function ll(t,i,e,n,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===i?t.flags|=65536:(t.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(i=Et(-1,1),i.tag=2,Ut(e,i,1))),e.lanes|=1),t)}var jd=Dt.ReactCurrentOwner,Ue=!1;function Be(t,i,e,n){i.child=t===null?Hu(i,null,e,n):Mi(i,t.child,e,n)}function ul(t,i,e,n,r){e=e.render;var o=i.ref;return ki(i,r),n=Ks(t,i,e,n,o,r),e=Js(),t!==null&&!Ue?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~r,Rt(t,i,r)):(ce&&e&&Hs(i),i.flags|=1,Be(t,i,n,r),i.child)}function cl(t,i,e,n,r){if(t===null){var o=e.type;return typeof o=="function"&&!la(o)&&o.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(i.tag=15,i.type=o,hc(t,i,o,n,r)):(t=cr(e.type,null,n,i,i.mode,r),t.ref=i.ref,t.return=i,i.child=t)}if(o=t.child,!(t.lanes&r)){var s=o.memoizedProps;if(e=e.compare,e=e!==null?e:vn,e(s,n)&&t.ref===i.ref)return Rt(t,i,r)}return i.flags|=1,t=Vt(o,n),t.ref=i.ref,t.return=i,i.child=t}function hc(t,i,e,n,r){if(t!==null){var o=t.memoizedProps;if(vn(o,n)&&t.ref===i.ref)if(Ue=!1,i.pendingProps=n=o,(t.lanes&r)!==0)t.flags&131072&&(Ue=!0);else return i.lanes=t.lanes,Rt(t,i,r)}return ss(t,i,e,n,r)}function dc(t,i,e){var n=i.pendingProps,r=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},oe(Si,Ze),Ze|=e;else{if(!(e&1073741824))return t=o!==null?o.baseLanes|e:e,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:t,cachePool:null,transitions:null},i.updateQueue=null,oe(Si,Ze),Ze|=t,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:e,oe(Si,Ze),Ze|=n}else o!==null?(n=o.baseLanes|e,i.memoizedState=null):n=e,oe(Si,Ze),Ze|=n;return Be(t,i,r,e),i.child}function fc(t,i){var e=i.ref;(t===null&&e!==null||t!==null&&t.ref!==e)&&(i.flags|=512,i.flags|=2097152)}function ss(t,i,e,n,r){var o=We(e)?ni:Ne.current;return o=Oi(i,o),ki(i,r),e=Ks(t,i,e,n,o,r),n=Js(),t!==null&&!Ue?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~r,Rt(t,i,r)):(ce&&n&&Hs(i),i.flags|=1,Be(t,i,e,r),i.child)}function hl(t,i,e,n,r){if(We(e)){var o=!0;xr(i)}else o=!1;if(ki(i,r),i.stateNode===null)ar(t,i),lc(i,e,n),rs(i,e,n,r),n=!0;else if(t===null){var s=i.stateNode,l=i.memoizedProps;s.props=l;var a=s.context,u=e.contextType;typeof u=="object"&&u!==null?u=rt(u):(u=We(e)?ni:Ne.current,u=Oi(i,u));var c=e.getDerivedStateFromProps,h=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==n||a!==u)&&ol(i,s,n,u),Ot=!1;var d=i.memoizedState;s.state=d,Cr(i,n,s,r),a=i.memoizedState,l!==n||d!==a||je.current||Ot?(typeof c=="function"&&(ns(i,e,c,n),a=i.memoizedState),(l=Ot||rl(i,e,l,n,d,a,u))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(i.flags|=4194308)):(typeof s.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=n,i.memoizedState=a),s.props=n,s.state=a,s.context=u,n=l):(typeof s.componentDidMount=="function"&&(i.flags|=4194308),n=!1)}else{s=i.stateNode,Uu(t,i),l=i.memoizedProps,u=i.type===i.elementType?l:lt(i.type,l),s.props=u,h=i.pendingProps,d=s.context,a=e.contextType,typeof a=="object"&&a!==null?a=rt(a):(a=We(e)?ni:Ne.current,a=Oi(i,a));var m=e.getDerivedStateFromProps;(c=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==h||d!==a)&&ol(i,s,n,a),Ot=!1,d=i.memoizedState,s.state=d,Cr(i,n,s,r);var y=i.memoizedState;l!==h||d!==y||je.current||Ot?(typeof m=="function"&&(ns(i,e,m,n),y=i.memoizedState),(u=Ot||rl(i,e,u,n,d,y,a)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,y,a),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,y,a)),typeof s.componentDidUpdate=="function"&&(i.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(i.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(i.flags|=1024),i.memoizedProps=n,i.memoizedState=y),s.props=n,s.state=y,s.context=a,n=u):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(i.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(i.flags|=1024),n=!1)}return as(t,i,e,n,o,r)}function as(t,i,e,n,r,o){fc(t,i);var s=(i.flags&128)!==0;if(!n&&!s)return r&&Ya(i,e,!1),Rt(t,i,o);n=i.stateNode,jd.current=i;var l=s&&typeof e.getDerivedStateFromError!="function"?null:n.render();return i.flags|=1,t!==null&&s?(i.child=Mi(i,t.child,null,o),i.child=Mi(i,null,l,o)):Be(t,i,l,o),i.memoizedState=n.state,r&&Ya(i,e,!0),i.child}function pc(t){var i=t.stateNode;i.pendingContext?Qa(t,i.pendingContext,i.pendingContext!==i.context):i.context&&Qa(t,i.context,!1),qs(t,i.containerInfo)}function dl(t,i,e,n,r){return zi(),Us(r),i.flags|=256,Be(t,i,e,n),i.child}var ls={dehydrated:null,treeContext:null,retryLane:0};function us(t){return{baseLanes:t,cachePool:null,transitions:null}}function gc(t,i,e){var n=i.pendingProps,r=he.current,o=!1,s=(i.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(o=!0,i.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),oe(he,r&1),t===null)return ts(i),t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(i.mode&1?t.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(s=n.children,t=n.fallback,o?(n=i.mode,o=i.child,s={mode:"hidden",children:s},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Zr(s,n,0,null),t=ii(t,n,e,null),o.return=i,t.return=i,o.sibling=t,i.child=o,i.child.memoizedState=us(e),i.memoizedState=ls,t):ta(i,s));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return Wd(t,i,s,n,l,r,e);if(o){o=n.fallback,s=i.mode,r=t.child,l=r.sibling;var a={mode:"hidden",children:n.children};return!(s&1)&&i.child!==r?(n=i.child,n.childLanes=0,n.pendingProps=a,i.deletions=null):(n=Vt(r,a),n.subtreeFlags=r.subtreeFlags&14680064),l!==null?o=Vt(l,o):(o=ii(o,s,e,null),o.flags|=2),o.return=i,n.return=i,n.sibling=o,i.child=n,n=o,o=i.child,s=t.child.memoizedState,s=s===null?us(e):{baseLanes:s.baseLanes|e,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~e,i.memoizedState=ls,n}return o=t.child,t=o.sibling,n=Vt(o,{mode:"visible",children:n.children}),!(i.mode&1)&&(n.lanes=e),n.return=i,n.sibling=null,t!==null&&(e=i.deletions,e===null?(i.deletions=[t],i.flags|=16):e.push(t)),i.child=n,i.memoizedState=null,n}function ta(t,i){return i=Zr({mode:"visible",children:i},t.mode,0,null),i.return=t,t.child=i}function Qn(t,i,e,n){return n!==null&&Us(n),Mi(i,t.child,null,e),t=ta(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Wd(t,i,e,n,r,o,s){if(e)return i.flags&256?(i.flags&=-257,n=Eo(Error(z(422))),Qn(t,i,s,n)):i.memoizedState!==null?(i.child=t.child,i.flags|=128,null):(o=n.fallback,r=i.mode,n=Zr({mode:"visible",children:n.children},r,0,null),o=ii(o,r,s,null),o.flags|=2,n.return=i,o.return=i,n.sibling=o,i.child=n,i.mode&1&&Mi(i,t.child,null,s),i.child.memoizedState=us(s),i.memoizedState=ls,o);if(!(i.mode&1))return Qn(t,i,s,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var l=n.dgst;return n=l,o=Error(z(419)),n=Eo(o,n,void 0),Qn(t,i,s,n)}if(l=(s&t.childLanes)!==0,Ue||l){if(n=De,n!==null){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|s)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,Ct(t,r),dt(n,t,r,-1))}return aa(),n=Eo(Error(z(421))),Qn(t,i,s,n)}return r.data==="$?"?(i.flags|=128,i.child=t.child,i=nf.bind(null,t),r._reactRetry=i,null):(t=o.treeContext,qe=bt(r.nextSibling),Xe=i,ce=!0,ct=null,t!==null&&(et[tt++]=xt,et[tt++]=_t,et[tt++]=ri,xt=t.id,_t=t.overflow,ri=i),i=ta(i,n.children),i.flags|=4096,i)}function fl(t,i,e){t.lanes|=i;var n=t.alternate;n!==null&&(n.lanes|=i),is(t.return,i,e)}function So(t,i,e,n,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:n,tail:e,tailMode:r}:(o.isBackwards=i,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=e,o.tailMode=r)}function mc(t,i,e){var n=i.pendingProps,r=n.revealOrder,o=n.tail;if(Be(t,i,n.children,e),n=he.current,n&2)n=n&1|2,i.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fl(t,e,i);else if(t.tag===19)fl(t,e,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(oe(he,n),!(i.mode&1))i.memoizedState=null;else switch(r){case"forwards":for(e=i.child,r=null;e!==null;)t=e.alternate,t!==null&&Rr(t)===null&&(r=e),e=e.sibling;e=r,e===null?(r=i.child,i.child=null):(r=e.sibling,e.sibling=null),So(i,!1,r,e,o);break;case"backwards":for(e=null,r=i.child,i.child=null;r!==null;){if(t=r.alternate,t!==null&&Rr(t)===null){i.child=r;break}t=r.sibling,r.sibling=e,e=r,r=t}So(i,!0,e,null,o);break;case"together":So(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ar(t,i){!(i.mode&1)&&t!==null&&(t.alternate=null,i.alternate=null,i.flags|=2)}function Rt(t,i,e){if(t!==null&&(i.dependencies=t.dependencies),si|=i.lanes,!(e&i.childLanes))return null;if(t!==null&&i.child!==t.child)throw Error(z(153));if(i.child!==null){for(t=i.child,e=Vt(t,t.pendingProps),i.child=e,e.return=i;t.sibling!==null;)t=t.sibling,e=e.sibling=Vt(t,t.pendingProps),e.return=i;e.sibling=null}return i.child}function Vd(t,i,e){switch(i.tag){case 3:pc(i),zi();break;case 5:ju(i);break;case 1:We(i.type)&&xr(i);break;case 4:qs(i,i.stateNode.containerInfo);break;case 10:var n=i.type._context,r=i.memoizedProps.value;oe(Sr,n._currentValue),n._currentValue=r;break;case 13:if(n=i.memoizedState,n!==null)return n.dehydrated!==null?(oe(he,he.current&1),i.flags|=128,null):e&i.child.childLanes?gc(t,i,e):(oe(he,he.current&1),t=Rt(t,i,e),t!==null?t.sibling:null);oe(he,he.current&1);break;case 19:if(n=(e&i.childLanes)!==0,t.flags&128){if(n)return mc(t,i,e);i.flags|=128}if(r=i.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),oe(he,he.current),n)break;return null;case 22:case 23:return i.lanes=0,dc(t,i,e)}return Rt(t,i,e)}var vc,cs,yc,wc;vc=function(t,i){for(var e=i.child;e!==null;){if(e.tag===5||e.tag===6)t.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};cs=function(){};yc=function(t,i,e,n){var r=t.memoizedProps;if(r!==n){t=i.stateNode,ei(yt.current);var o=null;switch(e){case"input":r=Oo(t,r),n=Oo(t,n),o=[];break;case"select":r=fe({},r,{value:void 0}),n=fe({},n,{value:void 0}),o=[];break;case"textarea":r=No(t,r),n=No(t,n),o=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=wr)}Io(e,n);var s;e=null;for(u in r)if(!n.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var l=r[u];for(s in l)l.hasOwnProperty(s)&&(e||(e={}),e[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(cn.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var a=n[u];if(l=r!=null?r[u]:void 0,n.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(s in l)!l.hasOwnProperty(s)||a&&a.hasOwnProperty(s)||(e||(e={}),e[s]="");for(s in a)a.hasOwnProperty(s)&&l[s]!==a[s]&&(e||(e={}),e[s]=a[s])}else e||(o||(o=[]),o.push(u,e)),e=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(o=o||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(o=o||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(cn.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&le("scroll",t),o||l===a||(o=[])):(o=o||[]).push(u,a))}e&&(o=o||[]).push("style",e);var u=o;(i.updateQueue=u)&&(i.flags|=4)}};wc=function(t,i,e,n){e!==n&&(i.flags|=4)};function Xi(t,i){if(!ce)switch(t.tailMode){case"hidden":i=t.tail;for(var e=null;i!==null;)i.alternate!==null&&(e=i),i=i.sibling;e===null?t.tail=null:e.sibling=null;break;case"collapsed":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function ze(t){var i=t.alternate!==null&&t.alternate.child===t.child,e=0,n=0;if(i)for(var r=t.child;r!==null;)e|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)e|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=n,t.childLanes=e,i}function Gd(t,i,e){var n=i.pendingProps;switch(bs(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(i),null;case 1:return We(i.type)&&Tr(),ze(i),null;case 3:return n=i.stateNode,Ni(),ue(je),ue(Ne),Qs(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(qn(i)?i.flags|=4:t===null||t.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,ct!==null&&(ys(ct),ct=null))),cs(t,i),ze(i),null;case 5:Xs(i);var r=ei(_n.current);if(e=i.type,t!==null&&i.stateNode!=null)yc(t,i,e,n,r),t.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!n){if(i.stateNode===null)throw Error(z(166));return ze(i),null}if(t=ei(yt.current),qn(i)){n=i.stateNode,e=i.type;var o=i.memoizedProps;switch(n[mt]=i,n[Tn]=o,t=(i.mode&1)!==0,e){case"dialog":le("cancel",n),le("close",n);break;case"iframe":case"object":case"embed":le("load",n);break;case"video":case"audio":for(r=0;r<$i.length;r++)le($i[r],n);break;case"source":le("error",n);break;case"img":case"image":case"link":le("error",n),le("load",n);break;case"details":le("toggle",n);break;case"input":_a(n,o),le("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},le("invalid",n);break;case"textarea":Sa(n,o),le("invalid",n)}Io(e,o),r=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?n.textContent!==l&&(o.suppressHydrationWarning!==!0&&Zn(n.textContent,l,t),r=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Zn(n.textContent,l,t),r=["children",""+l]):cn.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&le("scroll",n)}switch(e){case"input":An(n),Ea(n,o,!0);break;case"textarea":An(n),Pa(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=wr)}n=r,i.updateQueue=n,n!==null&&(i.flags|=4)}else{s=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ql(e)),t==="http://www.w3.org/1999/xhtml"?e==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=s.createElement(e,{is:n.is}):(t=s.createElement(e),e==="select"&&(s=t,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):t=s.createElementNS(t,e),t[mt]=i,t[Tn]=n,vc(t,i,!1,!1),i.stateNode=t;e:{switch(s=Ao(e,n),e){case"dialog":le("cancel",t),le("close",t),r=n;break;case"iframe":case"object":case"embed":le("load",t),r=n;break;case"video":case"audio":for(r=0;r<$i.length;r++)le($i[r],t);r=n;break;case"source":le("error",t),r=n;break;case"img":case"image":case"link":le("error",t),le("load",t),r=n;break;case"details":le("toggle",t),r=n;break;case"input":_a(t,n),r=Oo(t,n),le("invalid",t);break;case"option":r=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},r=fe({},n,{value:void 0}),le("invalid",t);break;case"textarea":Sa(t,n),r=No(t,n),le("invalid",t);break;default:r=n}Io(e,r),l=r;for(o in l)if(l.hasOwnProperty(o)){var a=l[o];o==="style"?Yl(t,a):o==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Xl(t,a)):o==="children"?typeof a=="string"?(e!=="textarea"||a!=="")&&hn(t,a):typeof a=="number"&&hn(t,""+a):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(cn.hasOwnProperty(o)?a!=null&&o==="onScroll"&&le("scroll",t):a!=null&&Ps(t,o,a,s))}switch(e){case"input":An(t),Ea(t,n,!1);break;case"textarea":An(t),Pa(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Gt(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?Pi(t,!!n.multiple,o,!1):n.defaultValue!=null&&Pi(t,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=wr)}switch(e){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return ze(i),null;case 6:if(t&&i.stateNode!=null)wc(t,i,t.memoizedProps,n);else{if(typeof n!="string"&&i.stateNode===null)throw Error(z(166));if(e=ei(_n.current),ei(yt.current),qn(i)){if(n=i.stateNode,e=i.memoizedProps,n[mt]=i,(o=n.nodeValue!==e)&&(t=Xe,t!==null))switch(t.tag){case 3:Zn(n.nodeValue,e,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Zn(n.nodeValue,e,(t.mode&1)!==0)}o&&(i.flags|=4)}else n=(e.nodeType===9?e:e.ownerDocument).createTextNode(n),n[mt]=i,i.stateNode=n}return ze(i),null;case 13:if(ue(he),n=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ce&&qe!==null&&i.mode&1&&!(i.flags&128))Iu(),zi(),i.flags|=98560,o=!1;else if(o=qn(i),n!==null&&n.dehydrated!==null){if(t===null){if(!o)throw Error(z(318));if(o=i.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(z(317));o[mt]=i}else zi(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;ze(i),o=!1}else ct!==null&&(ys(ct),ct=null),o=!0;if(!o)return i.flags&65536?i:null}return i.flags&128?(i.lanes=e,i):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(i.child.flags|=8192,i.mode&1&&(t===null||he.current&1?Pe===0&&(Pe=3):aa())),i.updateQueue!==null&&(i.flags|=4),ze(i),null);case 4:return Ni(),cs(t,i),t===null&&yn(i.stateNode.containerInfo),ze(i),null;case 10:return Vs(i.type._context),ze(i),null;case 17:return We(i.type)&&Tr(),ze(i),null;case 19:if(ue(he),o=i.memoizedState,o===null)return ze(i),null;if(n=(i.flags&128)!==0,s=o.rendering,s===null)if(n)Xi(o,!1);else{if(Pe!==0||t!==null&&t.flags&128)for(t=i.child;t!==null;){if(s=Rr(t),s!==null){for(i.flags|=128,Xi(o,!1),n=s.updateQueue,n!==null&&(i.updateQueue=n,i.flags|=4),i.subtreeFlags=0,n=e,e=i.child;e!==null;)o=e,t=n,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e=e.sibling;return oe(he,he.current&1|2),i.child}t=t.sibling}o.tail!==null&&ve()>Ii&&(i.flags|=128,n=!0,Xi(o,!1),i.lanes=4194304)}else{if(!n)if(t=Rr(s),t!==null){if(i.flags|=128,n=!0,e=t.updateQueue,e!==null&&(i.updateQueue=e,i.flags|=4),Xi(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!ce)return ze(i),null}else 2*ve()-o.renderingStartTime>Ii&&e!==1073741824&&(i.flags|=128,n=!0,Xi(o,!1),i.lanes=4194304);o.isBackwards?(s.sibling=i.child,i.child=s):(e=o.last,e!==null?e.sibling=s:i.child=s,o.last=s)}return o.tail!==null?(i=o.tail,o.rendering=i,o.tail=i.sibling,o.renderingStartTime=ve(),i.sibling=null,e=he.current,oe(he,n?e&1|2:e&1),i):(ze(i),null);case 22:case 23:return sa(),n=i.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(i.flags|=8192),n&&i.mode&1?Ze&1073741824&&(ze(i),i.subtreeFlags&6&&(i.flags|=8192)):ze(i),null;case 24:return null;case 25:return null}throw Error(z(156,i.tag))}function Zd(t,i){switch(bs(i),i.tag){case 1:return We(i.type)&&Tr(),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Ni(),ue(je),ue(Ne),Qs(),t=i.flags,t&65536&&!(t&128)?(i.flags=t&-65537|128,i):null;case 5:return Xs(i),null;case 13:if(ue(he),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(z(340));zi()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return ue(he),null;case 4:return Ni(),null;case 10:return Vs(i.type._context),null;case 22:case 23:return sa(),null;case 24:return null;default:return null}}var Yn=!1,Me=!1,qd=typeof WeakSet=="function"?WeakSet:Set,H=null;function Ei(t,i){var e=t.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(n){ge(t,i,n)}else e.current=null}function hs(t,i,e){try{e()}catch(n){ge(t,i,n)}}var pl=!1;function Xd(t,i){if(Xo=mr,t=Su(),As(t)){if("selectionStart"in t)var e={start:t.selectionStart,end:t.selectionEnd};else e:{e=(e=t.ownerDocument)&&e.defaultView||window;var n=e.getSelection&&e.getSelection();if(n&&n.rangeCount!==0){e=n.anchorNode;var r=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{e.nodeType,o.nodeType}catch{e=null;break e}var s=0,l=-1,a=-1,u=0,c=0,h=t,d=null;t:for(;;){for(var m;h!==e||r!==0&&h.nodeType!==3||(l=s+r),h!==o||n!==0&&h.nodeType!==3||(a=s+n),h.nodeType===3&&(s+=h.nodeValue.length),(m=h.firstChild)!==null;)d=h,h=m;for(;;){if(h===t)break t;if(d===e&&++u===r&&(l=s),d===o&&++c===n&&(a=s),(m=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=m}e=l===-1||a===-1?null:{start:l,end:a}}else e=null}e=e||{start:0,end:0}}else e=null;for(Qo={focusedElem:t,selectionRange:e},mr=!1,H=i;H!==null;)if(i=H,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,H=t;else for(;H!==null;){i=H;try{var y=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var T=y.memoizedProps,P=y.memoizedState,v=i.stateNode,w=v.getSnapshotBeforeUpdate(i.elementType===i.type?T:lt(i.type,T),P);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=i.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(R){ge(i,i.return,R)}if(t=i.sibling,t!==null){t.return=i.return,H=t;break}H=i.return}return y=pl,pl=!1,y}function an(t,i,e){var n=i.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&hs(i,e,o)}r=r.next}while(r!==n)}}function Vr(t,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var e=i=i.next;do{if((e.tag&t)===t){var n=e.create;e.destroy=n()}e=e.next}while(e!==i)}}function ds(t){var i=t.ref;if(i!==null){var e=t.stateNode;switch(t.tag){case 5:t=e;break;default:t=e}typeof i=="function"?i(t):i.current=t}}function Tc(t){var i=t.alternate;i!==null&&(t.alternate=null,Tc(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&(delete i[mt],delete i[Tn],delete i[Jo],delete i[Fd],delete i[Ld])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function xc(t){return t.tag===5||t.tag===3||t.tag===4}function gl(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||xc(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fs(t,i,e){var n=t.tag;if(n===5||n===6)t=t.stateNode,i?e.nodeType===8?e.parentNode.insertBefore(t,i):e.insertBefore(t,i):(e.nodeType===8?(i=e.parentNode,i.insertBefore(t,e)):(i=e,i.appendChild(t)),e=e._reactRootContainer,e!=null||i.onclick!==null||(i.onclick=wr));else if(n!==4&&(t=t.child,t!==null))for(fs(t,i,e),t=t.sibling;t!==null;)fs(t,i,e),t=t.sibling}function ps(t,i,e){var n=t.tag;if(n===5||n===6)t=t.stateNode,i?e.insertBefore(t,i):e.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(ps(t,i,e),t=t.sibling;t!==null;)ps(t,i,e),t=t.sibling}var ke=null,ut=!1;function Ft(t,i,e){for(e=e.child;e!==null;)_c(t,i,e),e=e.sibling}function _c(t,i,e){if(vt&&typeof vt.onCommitFiberUnmount=="function")try{vt.onCommitFiberUnmount(Br,e)}catch{}switch(e.tag){case 5:Me||Ei(e,i);case 6:var n=ke,r=ut;ke=null,Ft(t,i,e),ke=n,ut=r,ke!==null&&(ut?(t=ke,e=e.stateNode,t.nodeType===8?t.parentNode.removeChild(e):t.removeChild(e)):ke.removeChild(e.stateNode));break;case 18:ke!==null&&(ut?(t=ke,e=e.stateNode,t.nodeType===8?vo(t.parentNode,e):t.nodeType===1&&vo(t,e),gn(t)):vo(ke,e.stateNode));break;case 4:n=ke,r=ut,ke=e.stateNode.containerInfo,ut=!0,Ft(t,i,e),ke=n,ut=r;break;case 0:case 11:case 14:case 15:if(!Me&&(n=e.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var o=r,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&hs(e,i,s),r=r.next}while(r!==n)}Ft(t,i,e);break;case 1:if(!Me&&(Ei(e,i),n=e.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=e.memoizedProps,n.state=e.memoizedState,n.componentWillUnmount()}catch(l){ge(e,i,l)}Ft(t,i,e);break;case 21:Ft(t,i,e);break;case 22:e.mode&1?(Me=(n=Me)||e.memoizedState!==null,Ft(t,i,e),Me=n):Ft(t,i,e);break;default:Ft(t,i,e)}}function ml(t){var i=t.updateQueue;if(i!==null){t.updateQueue=null;var e=t.stateNode;e===null&&(e=t.stateNode=new qd),i.forEach(function(n){var r=rf.bind(null,t,n);e.has(n)||(e.add(n),n.then(r,r))})}}function at(t,i){var e=i.deletions;if(e!==null)for(var n=0;n<e.length;n++){var r=e[n];try{var o=t,s=i,l=s;e:for(;l!==null;){switch(l.tag){case 5:ke=l.stateNode,ut=!1;break e;case 3:ke=l.stateNode.containerInfo,ut=!0;break e;case 4:ke=l.stateNode.containerInfo,ut=!0;break e}l=l.return}if(ke===null)throw Error(z(160));_c(o,s,r),ke=null,ut=!1;var a=r.alternate;a!==null&&(a.return=null),r.return=null}catch(u){ge(r,i,u)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Ec(i,t),i=i.sibling}function Ec(t,i){var e=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(at(i,t),pt(t),n&4){try{an(3,t,t.return),Vr(3,t)}catch(T){ge(t,t.return,T)}try{an(5,t,t.return)}catch(T){ge(t,t.return,T)}}break;case 1:at(i,t),pt(t),n&512&&e!==null&&Ei(e,e.return);break;case 5:if(at(i,t),pt(t),n&512&&e!==null&&Ei(e,e.return),t.flags&32){var r=t.stateNode;try{hn(r,"")}catch(T){ge(t,t.return,T)}}if(n&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,s=e!==null?e.memoizedProps:o,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&Gl(r,o),Ao(l,s);var u=Ao(l,o);for(s=0;s<a.length;s+=2){var c=a[s],h=a[s+1];c==="style"?Yl(r,h):c==="dangerouslySetInnerHTML"?Xl(r,h):c==="children"?hn(r,h):Ps(r,c,h,u)}switch(l){case"input":zo(r,o);break;case"textarea":Zl(r,o);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var m=o.value;m!=null?Pi(r,!!o.multiple,m,!1):d!==!!o.multiple&&(o.defaultValue!=null?Pi(r,!!o.multiple,o.defaultValue,!0):Pi(r,!!o.multiple,o.multiple?[]:"",!1))}r[Tn]=o}catch(T){ge(t,t.return,T)}}break;case 6:if(at(i,t),pt(t),n&4){if(t.stateNode===null)throw Error(z(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(T){ge(t,t.return,T)}}break;case 3:if(at(i,t),pt(t),n&4&&e!==null&&e.memoizedState.isDehydrated)try{gn(i.containerInfo)}catch(T){ge(t,t.return,T)}break;case 4:at(i,t),pt(t);break;case 13:at(i,t),pt(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(ra=ve())),n&4&&ml(t);break;case 22:if(c=e!==null&&e.memoizedState!==null,t.mode&1?(Me=(u=Me)||c,at(i,t),Me=u):at(i,t),pt(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(H=t,c=t.child;c!==null;){for(h=H=c;H!==null;){switch(d=H,m=d.child,d.tag){case 0:case 11:case 14:case 15:an(4,d,d.return);break;case 1:Ei(d,d.return);var y=d.stateNode;if(typeof y.componentWillUnmount=="function"){n=d,e=d.return;try{i=n,y.props=i.memoizedProps,y.state=i.memoizedState,y.componentWillUnmount()}catch(T){ge(n,e,T)}}break;case 5:Ei(d,d.return);break;case 22:if(d.memoizedState!==null){yl(h);continue}}m!==null?(m.return=d,H=m):yl(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{r=h.stateNode,u?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=h.stateNode,a=h.memoizedProps.style,s=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Ql("display",s))}catch(T){ge(t,t.return,T)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(T){ge(t,t.return,T)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:at(i,t),pt(t),n&4&&ml(t);break;case 21:break;default:at(i,t),pt(t)}}function pt(t){var i=t.flags;if(i&2){try{e:{for(var e=t.return;e!==null;){if(xc(e)){var n=e;break e}e=e.return}throw Error(z(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(hn(r,""),n.flags&=-33);var o=gl(t);ps(t,o,r);break;case 3:case 4:var s=n.stateNode.containerInfo,l=gl(t);fs(t,l,s);break;default:throw Error(z(161))}}catch(a){ge(t,t.return,a)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Qd(t,i,e){H=t,Sc(t)}function Sc(t,i,e){for(var n=(t.mode&1)!==0;H!==null;){var r=H,o=r.child;if(r.tag===22&&n){var s=r.memoizedState!==null||Yn;if(!s){var l=r.alternate,a=l!==null&&l.memoizedState!==null||Me;l=Yn;var u=Me;if(Yn=s,(Me=a)&&!u)for(H=r;H!==null;)s=H,a=s.child,s.tag===22&&s.memoizedState!==null?wl(r):a!==null?(a.return=s,H=a):wl(r);for(;o!==null;)H=o,Sc(o),o=o.sibling;H=r,Yn=l,Me=u}vl(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,H=o):vl(t)}}function vl(t){for(;H!==null;){var i=H;if(i.flags&8772){var e=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:Me||Vr(5,i);break;case 1:var n=i.stateNode;if(i.flags&4&&!Me)if(e===null)n.componentDidMount();else{var r=i.elementType===i.type?e.memoizedProps:lt(i.type,e.memoizedProps);n.componentDidUpdate(r,e.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=i.updateQueue;o!==null&&tl(i,o,n);break;case 3:var s=i.updateQueue;if(s!==null){if(e=null,i.child!==null)switch(i.child.tag){case 5:e=i.child.stateNode;break;case 1:e=i.child.stateNode}tl(i,s,e)}break;case 5:var l=i.stateNode;if(e===null&&i.flags&4){e=l;var a=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&e.focus();break;case"img":a.src&&(e.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var u=i.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&gn(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Me||i.flags&512&&ds(i)}catch(d){ge(i,i.return,d)}}if(i===t){H=null;break}if(e=i.sibling,e!==null){e.return=i.return,H=e;break}H=i.return}}function yl(t){for(;H!==null;){var i=H;if(i===t){H=null;break}var e=i.sibling;if(e!==null){e.return=i.return,H=e;break}H=i.return}}function wl(t){for(;H!==null;){var i=H;try{switch(i.tag){case 0:case 11:case 15:var e=i.return;try{Vr(4,i)}catch(a){ge(i,e,a)}break;case 1:var n=i.stateNode;if(typeof n.componentDidMount=="function"){var r=i.return;try{n.componentDidMount()}catch(a){ge(i,r,a)}}var o=i.return;try{ds(i)}catch(a){ge(i,o,a)}break;case 5:var s=i.return;try{ds(i)}catch(a){ge(i,s,a)}}}catch(a){ge(i,i.return,a)}if(i===t){H=null;break}var l=i.sibling;if(l!==null){l.return=i.return,H=l;break}H=i.return}}var Yd=Math.ceil,Fr=Dt.ReactCurrentDispatcher,ia=Dt.ReactCurrentOwner,nt=Dt.ReactCurrentBatchConfig,ee=0,De=null,_e=null,Fe=0,Ze=0,Si=Xt(0),Pe=0,Cn=null,si=0,Gr=0,na=0,ln=null,be=null,ra=0,Ii=1/0,wt=null,Lr=!1,gs=null,jt=null,Kn=!1,Bt=null,Or=0,un=0,ms=null,lr=-1,ur=0;function Ie(){return ee&6?ve():lr!==-1?lr:lr=ve()}function Wt(t){return t.mode&1?ee&2&&Fe!==0?Fe&-Fe:zd.transition!==null?(ur===0&&(ur=lu()),ur):(t=ne,t!==0||(t=window.event,t=t===void 0?16:gu(t.type)),t):1}function dt(t,i,e,n){if(50<un)throw un=0,ms=null,Error(z(185));Dn(t,e,n),(!(ee&2)||t!==De)&&(t===De&&(!(ee&2)&&(Gr|=e),Pe===4&&Mt(t,Fe)),Ve(t,n),e===1&&ee===0&&!(i.mode&1)&&(Ii=ve()+500,Ur&&Qt()))}function Ve(t,i){var e=t.callbackNode;zh(t,i);var n=gr(t,t===De?Fe:0);if(n===0)e!==null&&Da(e),t.callbackNode=null,t.callbackPriority=0;else if(i=n&-n,t.callbackPriority!==i){if(e!=null&&Da(e),i===1)t.tag===0?Od(Tl.bind(null,t)):Mu(Tl.bind(null,t)),Dd(function(){!(ee&6)&&Qt()}),e=null;else{switch(uu(n)){case 1:e=Fs;break;case 4:e=su;break;case 16:e=pr;break;case 536870912:e=au;break;default:e=pr}e=Oc(e,Pc.bind(null,t))}t.callbackPriority=i,t.callbackNode=e}}function Pc(t,i){if(lr=-1,ur=0,ee&6)throw Error(z(327));var e=t.callbackNode;if(Fi()&&t.callbackNode!==e)return null;var n=gr(t,t===De?Fe:0);if(n===0)return null;if(n&30||n&t.expiredLanes||i)i=zr(t,n);else{i=n;var r=ee;ee|=2;var o=Rc();(De!==t||Fe!==i)&&(wt=null,Ii=ve()+500,ti(t,i));do try{$d();break}catch(l){Cc(t,l)}while(!0);Ws(),Fr.current=o,ee=r,_e!==null?i=0:(De=null,Fe=0,i=Pe)}if(i!==0){if(i===2&&(r=Wo(t),r!==0&&(n=r,i=vs(t,r))),i===1)throw e=Cn,ti(t,0),Mt(t,n),Ve(t,ve()),e;if(i===6)Mt(t,n);else{if(r=t.current.alternate,!(n&30)&&!Kd(r)&&(i=zr(t,n),i===2&&(o=Wo(t),o!==0&&(n=o,i=vs(t,o))),i===1))throw e=Cn,ti(t,0),Mt(t,n),Ve(t,ve()),e;switch(t.finishedWork=r,t.finishedLanes=n,i){case 0:case 1:throw Error(z(345));case 2:Kt(t,be,wt);break;case 3:if(Mt(t,n),(n&130023424)===n&&(i=ra+500-ve(),10<i)){if(gr(t,0)!==0)break;if(r=t.suspendedLanes,(r&n)!==n){Ie(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Ko(Kt.bind(null,t,be,wt),i);break}Kt(t,be,wt);break;case 4:if(Mt(t,n),(n&4194240)===n)break;for(i=t.eventTimes,r=-1;0<n;){var s=31-ht(n);o=1<<s,s=i[s],s>r&&(r=s),n&=~o}if(n=r,n=ve()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Yd(n/1960))-n,10<n){t.timeoutHandle=Ko(Kt.bind(null,t,be,wt),n);break}Kt(t,be,wt);break;case 5:Kt(t,be,wt);break;default:throw Error(z(329))}}}return Ve(t,ve()),t.callbackNode===e?Pc.bind(null,t):null}function vs(t,i){var e=ln;return t.current.memoizedState.isDehydrated&&(ti(t,i).flags|=256),t=zr(t,i),t!==2&&(i=be,be=e,i!==null&&ys(i)),t}function ys(t){be===null?be=t:be.push.apply(be,t)}function Kd(t){for(var i=t;;){if(i.flags&16384){var e=i.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var n=0;n<e.length;n++){var r=e[n],o=r.getSnapshot;r=r.value;try{if(!ft(o(),r))return!1}catch{return!1}}}if(e=i.child,i.subtreeFlags&16384&&e!==null)e.return=i,i=e;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Mt(t,i){for(i&=~na,i&=~Gr,t.suspendedLanes|=i,t.pingedLanes&=~i,t=t.expirationTimes;0<i;){var e=31-ht(i),n=1<<e;t[e]=-1,i&=~n}}function Tl(t){if(ee&6)throw Error(z(327));Fi();var i=gr(t,0);if(!(i&1))return Ve(t,ve()),null;var e=zr(t,i);if(t.tag!==0&&e===2){var n=Wo(t);n!==0&&(i=n,e=vs(t,n))}if(e===1)throw e=Cn,ti(t,0),Mt(t,i),Ve(t,ve()),e;if(e===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=i,Kt(t,be,wt),Ve(t,ve()),null}function oa(t,i){var e=ee;ee|=1;try{return t(i)}finally{ee=e,ee===0&&(Ii=ve()+500,Ur&&Qt())}}function ai(t){Bt!==null&&Bt.tag===0&&!(ee&6)&&Fi();var i=ee;ee|=1;var e=nt.transition,n=ne;try{if(nt.transition=null,ne=1,t)return t()}finally{ne=n,nt.transition=e,ee=i,!(ee&6)&&Qt()}}function sa(){Ze=Si.current,ue(Si)}function ti(t,i){t.finishedWork=null,t.finishedLanes=0;var e=t.timeoutHandle;if(e!==-1&&(t.timeoutHandle=-1,Rd(e)),_e!==null)for(e=_e.return;e!==null;){var n=e;switch(bs(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Tr();break;case 3:Ni(),ue(je),ue(Ne),Qs();break;case 5:Xs(n);break;case 4:Ni();break;case 13:ue(he);break;case 19:ue(he);break;case 10:Vs(n.type._context);break;case 22:case 23:sa()}e=e.return}if(De=t,_e=t=Vt(t.current,null),Fe=Ze=i,Pe=0,Cn=null,na=Gr=si=0,be=ln=null,$t!==null){for(i=0;i<$t.length;i++)if(e=$t[i],n=e.interleaved,n!==null){e.interleaved=null;var r=n.next,o=e.pending;if(o!==null){var s=o.next;o.next=r,n.next=s}e.pending=n}$t=null}return t}function Cc(t,i){do{var e=_e;try{if(Ws(),or.current=kr,Dr){for(var n=de.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}Dr=!1}if(oi=0,Re=Se=de=null,sn=!1,En=0,ia.current=null,e===null||e.return===null){Pe=1,Cn=i,_e=null;break}e:{var o=t,s=e.return,l=e,a=i;if(i=Fe,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=l,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=al(s);if(m!==null){m.flags&=-257,ll(m,s,l,o,i),m.mode&1&&sl(o,u,i),i=m,a=u;var y=i.updateQueue;if(y===null){var T=new Set;T.add(a),i.updateQueue=T}else y.add(a);break e}else{if(!(i&1)){sl(o,u,i),aa();break e}a=Error(z(426))}}else if(ce&&l.mode&1){var P=al(s);if(P!==null){!(P.flags&65536)&&(P.flags|=256),ll(P,s,l,o,i),Us(Bi(a,l));break e}}o=a=Bi(a,l),Pe!==4&&(Pe=2),ln===null?ln=[o]:ln.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,i&=-i,o.lanes|=i;var v=uc(o,a,i);el(o,v);break e;case 1:l=a;var w=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(jt===null||!jt.has(S)))){o.flags|=65536,i&=-i,o.lanes|=i;var R=cc(o,l,i);el(o,R);break e}}o=o.return}while(o!==null)}kc(e)}catch(k){i=k,_e===e&&e!==null&&(_e=e=e.return);continue}break}while(!0)}function Rc(){var t=Fr.current;return Fr.current=kr,t===null?kr:t}function aa(){(Pe===0||Pe===3||Pe===2)&&(Pe=4),De===null||!(si&268435455)&&!(Gr&268435455)||Mt(De,Fe)}function zr(t,i){var e=ee;ee|=2;var n=Rc();(De!==t||Fe!==i)&&(wt=null,ti(t,i));do try{Jd();break}catch(r){Cc(t,r)}while(!0);if(Ws(),ee=e,Fr.current=n,_e!==null)throw Error(z(261));return De=null,Fe=0,Pe}function Jd(){for(;_e!==null;)Dc(_e)}function $d(){for(;_e!==null&&!Sh();)Dc(_e)}function Dc(t){var i=Lc(t.alternate,t,Ze);t.memoizedProps=t.pendingProps,i===null?kc(t):_e=i,ia.current=null}function kc(t){var i=t;do{var e=i.alternate;if(t=i.return,i.flags&32768){if(e=Zd(e,i),e!==null){e.flags&=32767,_e=e;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Pe=6,_e=null;return}}else if(e=Gd(e,i,Ze),e!==null){_e=e;return}if(i=i.sibling,i!==null){_e=i;return}_e=i=t}while(i!==null);Pe===0&&(Pe=5)}function Kt(t,i,e){var n=ne,r=nt.transition;try{nt.transition=null,ne=1,ef(t,i,e,n)}finally{nt.transition=r,ne=n}return null}function ef(t,i,e,n){do Fi();while(Bt!==null);if(ee&6)throw Error(z(327));e=t.finishedWork;var r=t.finishedLanes;if(e===null)return null;if(t.finishedWork=null,t.finishedLanes=0,e===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var o=e.lanes|e.childLanes;if(Mh(t,o),t===De&&(_e=De=null,Fe=0),!(e.subtreeFlags&2064)&&!(e.flags&2064)||Kn||(Kn=!0,Oc(pr,function(){return Fi(),null})),o=(e.flags&15990)!==0,e.subtreeFlags&15990||o){o=nt.transition,nt.transition=null;var s=ne;ne=1;var l=ee;ee|=4,ia.current=null,Xd(t,e),Ec(e,t),Td(Qo),mr=!!Xo,Qo=Xo=null,t.current=e,Qd(e),Ph(),ee=l,ne=s,nt.transition=o}else t.current=e;if(Kn&&(Kn=!1,Bt=t,Or=r),o=t.pendingLanes,o===0&&(jt=null),Dh(e.stateNode),Ve(t,ve()),i!==null)for(n=t.onRecoverableError,e=0;e<i.length;e++)r=i[e],n(r.value,{componentStack:r.stack,digest:r.digest});if(Lr)throw Lr=!1,t=gs,gs=null,t;return Or&1&&t.tag!==0&&Fi(),o=t.pendingLanes,o&1?t===ms?un++:(un=0,ms=t):un=0,Qt(),null}function Fi(){if(Bt!==null){var t=uu(Or),i=nt.transition,e=ne;try{if(nt.transition=null,ne=16>t?16:t,Bt===null)var n=!1;else{if(t=Bt,Bt=null,Or=0,ee&6)throw Error(z(331));var r=ee;for(ee|=4,H=t.current;H!==null;){var o=H,s=o.child;if(H.flags&16){var l=o.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(H=u;H!==null;){var c=H;switch(c.tag){case 0:case 11:case 15:an(8,c,o)}var h=c.child;if(h!==null)h.return=c,H=h;else for(;H!==null;){c=H;var d=c.sibling,m=c.return;if(Tc(c),c===u){H=null;break}if(d!==null){d.return=m,H=d;break}H=m}}}var y=o.alternate;if(y!==null){var T=y.child;if(T!==null){y.child=null;do{var P=T.sibling;T.sibling=null,T=P}while(T!==null)}}H=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,H=s;else e:for(;H!==null;){if(o=H,o.flags&2048)switch(o.tag){case 0:case 11:case 15:an(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,H=v;break e}H=o.return}}var w=t.current;for(H=w;H!==null;){s=H;var S=s.child;if(s.subtreeFlags&2064&&S!==null)S.return=s,H=S;else e:for(s=w;H!==null;){if(l=H,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Vr(9,l)}}catch(k){ge(l,l.return,k)}if(l===s){H=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,H=R;break e}H=l.return}}if(ee=r,Qt(),vt&&typeof vt.onPostCommitFiberRoot=="function")try{vt.onPostCommitFiberRoot(Br,t)}catch{}n=!0}return n}finally{ne=e,nt.transition=i}}return!1}function xl(t,i,e){i=Bi(e,i),i=uc(t,i,1),t=Ut(t,i,1),i=Ie(),t!==null&&(Dn(t,1,i),Ve(t,i))}function ge(t,i,e){if(t.tag===3)xl(t,t,e);else for(;i!==null;){if(i.tag===3){xl(i,t,e);break}else if(i.tag===1){var n=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(jt===null||!jt.has(n))){t=Bi(e,t),t=cc(i,t,1),i=Ut(i,t,1),t=Ie(),i!==null&&(Dn(i,1,t),Ve(i,t));break}}i=i.return}}function tf(t,i,e){var n=t.pingCache;n!==null&&n.delete(i),i=Ie(),t.pingedLanes|=t.suspendedLanes&e,De===t&&(Fe&e)===e&&(Pe===4||Pe===3&&(Fe&130023424)===Fe&&500>ve()-ra?ti(t,0):na|=e),Ve(t,i)}function Fc(t,i){i===0&&(t.mode&1?(i=Un,Un<<=1,!(Un&130023424)&&(Un=4194304)):i=1);var e=Ie();t=Ct(t,i),t!==null&&(Dn(t,i,e),Ve(t,e))}function nf(t){var i=t.memoizedState,e=0;i!==null&&(e=i.retryLane),Fc(t,e)}function rf(t,i){var e=0;switch(t.tag){case 13:var n=t.stateNode,r=t.memoizedState;r!==null&&(e=r.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(z(314))}n!==null&&n.delete(i),Fc(t,e)}var Lc;Lc=function(t,i,e){if(t!==null)if(t.memoizedProps!==i.pendingProps||je.current)Ue=!0;else{if(!(t.lanes&e)&&!(i.flags&128))return Ue=!1,Vd(t,i,e);Ue=!!(t.flags&131072)}else Ue=!1,ce&&i.flags&1048576&&Nu(i,Er,i.index);switch(i.lanes=0,i.tag){case 2:var n=i.type;ar(t,i),t=i.pendingProps;var r=Oi(i,Ne.current);ki(i,e),r=Ks(null,i,n,t,r,e);var o=Js();return i.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,We(n)?(o=!0,xr(i)):o=!1,i.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Zs(i),r.updater=Wr,i.stateNode=r,r._reactInternals=i,rs(i,n,t,e),i=as(null,i,n,!0,o,e)):(i.tag=0,ce&&o&&Hs(i),Be(null,i,r,e),i=i.child),i;case 16:n=i.elementType;e:{switch(ar(t,i),t=i.pendingProps,r=n._init,n=r(n._payload),i.type=n,r=i.tag=sf(n),t=lt(n,t),r){case 0:i=ss(null,i,n,t,e);break e;case 1:i=hl(null,i,n,t,e);break e;case 11:i=ul(null,i,n,t,e);break e;case 14:i=cl(null,i,n,lt(n.type,t),e);break e}throw Error(z(306,n,""))}return i;case 0:return n=i.type,r=i.pendingProps,r=i.elementType===n?r:lt(n,r),ss(t,i,n,r,e);case 1:return n=i.type,r=i.pendingProps,r=i.elementType===n?r:lt(n,r),hl(t,i,n,r,e);case 3:e:{if(pc(i),t===null)throw Error(z(387));n=i.pendingProps,o=i.memoizedState,r=o.element,Uu(t,i),Cr(i,n,null,e);var s=i.memoizedState;if(n=s.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},i.updateQueue.baseState=o,i.memoizedState=o,i.flags&256){r=Bi(Error(z(423)),i),i=dl(t,i,n,e,r);break e}else if(n!==r){r=Bi(Error(z(424)),i),i=dl(t,i,n,e,r);break e}else for(qe=bt(i.stateNode.containerInfo.firstChild),Xe=i,ce=!0,ct=null,e=Hu(i,null,n,e),i.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(zi(),n===r){i=Rt(t,i,e);break e}Be(t,i,n,e)}i=i.child}return i;case 5:return ju(i),t===null&&ts(i),n=i.type,r=i.pendingProps,o=t!==null?t.memoizedProps:null,s=r.children,Yo(n,r)?s=null:o!==null&&Yo(n,o)&&(i.flags|=32),fc(t,i),Be(t,i,s,e),i.child;case 6:return t===null&&ts(i),null;case 13:return gc(t,i,e);case 4:return qs(i,i.stateNode.containerInfo),n=i.pendingProps,t===null?i.child=Mi(i,null,n,e):Be(t,i,n,e),i.child;case 11:return n=i.type,r=i.pendingProps,r=i.elementType===n?r:lt(n,r),ul(t,i,n,r,e);case 7:return Be(t,i,i.pendingProps,e),i.child;case 8:return Be(t,i,i.pendingProps.children,e),i.child;case 12:return Be(t,i,i.pendingProps.children,e),i.child;case 10:e:{if(n=i.type._context,r=i.pendingProps,o=i.memoizedProps,s=r.value,oe(Sr,n._currentValue),n._currentValue=s,o!==null)if(ft(o.value,s)){if(o.children===r.children&&!je.current){i=Rt(t,i,e);break e}}else for(o=i.child,o!==null&&(o.return=i);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var a=l.firstContext;a!==null;){if(a.context===n){if(o.tag===1){a=Et(-1,e&-e),a.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}o.lanes|=e,a=o.alternate,a!==null&&(a.lanes|=e),is(o.return,e,i),l.lanes|=e;break}a=a.next}}else if(o.tag===10)s=o.type===i.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(z(341));s.lanes|=e,l=s.alternate,l!==null&&(l.lanes|=e),is(s,e,i),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===i){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Be(t,i,r.children,e),i=i.child}return i;case 9:return r=i.type,n=i.pendingProps.children,ki(i,e),r=rt(r),n=n(r),i.flags|=1,Be(t,i,n,e),i.child;case 14:return n=i.type,r=lt(n,i.pendingProps),r=lt(n.type,r),cl(t,i,n,r,e);case 15:return hc(t,i,i.type,i.pendingProps,e);case 17:return n=i.type,r=i.pendingProps,r=i.elementType===n?r:lt(n,r),ar(t,i),i.tag=1,We(n)?(t=!0,xr(i)):t=!1,ki(i,e),lc(i,n,r),rs(i,n,r,e),as(null,i,n,!0,t,e);case 19:return mc(t,i,e);case 22:return dc(t,i,e)}throw Error(z(156,i.tag))};function Oc(t,i){return ou(t,i)}function of(t,i,e,n){this.tag=t,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function it(t,i,e,n){return new of(t,i,e,n)}function la(t){return t=t.prototype,!(!t||!t.isReactComponent)}function sf(t){if(typeof t=="function")return la(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Rs)return 11;if(t===Ds)return 14}return 2}function Vt(t,i){var e=t.alternate;return e===null?(e=it(t.tag,i,t.key,t.mode),e.elementType=t.elementType,e.type=t.type,e.stateNode=t.stateNode,e.alternate=t,t.alternate=e):(e.pendingProps=i,e.type=t.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=t.flags&14680064,e.childLanes=t.childLanes,e.lanes=t.lanes,e.child=t.child,e.memoizedProps=t.memoizedProps,e.memoizedState=t.memoizedState,e.updateQueue=t.updateQueue,i=t.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},e.sibling=t.sibling,e.index=t.index,e.ref=t.ref,e}function cr(t,i,e,n,r,o){var s=2;if(n=t,typeof t=="function")la(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case pi:return ii(e.children,r,o,i);case Cs:s=8,r|=8;break;case Do:return t=it(12,e,i,r|2),t.elementType=Do,t.lanes=o,t;case ko:return t=it(13,e,i,r),t.elementType=ko,t.lanes=o,t;case Fo:return t=it(19,e,i,r),t.elementType=Fo,t.lanes=o,t;case jl:return Zr(e,r,o,i);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bl:s=10;break e;case Ul:s=9;break e;case Rs:s=11;break e;case Ds:s=14;break e;case Lt:s=16,n=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return i=it(s,e,i,r),i.elementType=t,i.type=n,i.lanes=o,i}function ii(t,i,e,n){return t=it(7,t,n,i),t.lanes=e,t}function Zr(t,i,e,n){return t=it(22,t,n,i),t.elementType=jl,t.lanes=e,t.stateNode={isHidden:!1},t}function Po(t,i,e){return t=it(6,t,null,i),t.lanes=e,t}function Co(t,i,e){return i=it(4,t.children!==null?t.children:[],t.key,i),i.lanes=e,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}function af(t,i,e,n,r){this.tag=i,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=oo(0),this.expirationTimes=oo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oo(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function ua(t,i,e,n,r,o,s,l,a){return t=new af(t,i,e,l,a),i===1?(i=1,o===!0&&(i|=8)):i=0,o=it(3,null,null,i),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zs(o),t}function lf(t,i,e){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fi,key:n==null?null:""+n,children:t,containerInfo:i,implementation:e}}function zc(t){if(!t)return Zt;t=t._reactInternals;e:{if(ui(t)!==t||t.tag!==1)throw Error(z(170));var i=t;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(We(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(z(171))}if(t.tag===1){var e=t.type;if(We(e))return zu(t,e,i)}return i}function Mc(t,i,e,n,r,o,s,l,a){return t=ua(e,n,!0,t,r,o,s,l,a),t.context=zc(null),e=t.current,n=Ie(),r=Wt(e),o=Et(n,r),o.callback=i??null,Ut(e,o,r),t.current.lanes=r,Dn(t,r,n),Ve(t,n),t}function qr(t,i,e,n){var r=i.current,o=Ie(),s=Wt(r);return e=zc(e),i.context===null?i.context=e:i.pendingContext=e,i=Et(o,s),i.payload={element:t},n=n===void 0?null:n,n!==null&&(i.callback=n),t=Ut(r,i,s),t!==null&&(dt(t,r,s,o),rr(t,r,s)),s}function Mr(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function _l(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var e=t.retryLane;t.retryLane=e!==0&&e<i?e:i}}function ca(t,i){_l(t,i),(t=t.alternate)&&_l(t,i)}function uf(){return null}var Nc=typeof reportError=="function"?reportError:function(t){console.error(t)};function ha(t){this._internalRoot=t}Xr.prototype.render=ha.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(z(409));qr(t,i,null,null)};Xr.prototype.unmount=ha.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;ai(function(){qr(null,t,null,null)}),i[Pt]=null}};function Xr(t){this._internalRoot=t}Xr.prototype.unstable_scheduleHydration=function(t){if(t){var i=du();t={blockedOn:null,target:t,priority:i};for(var e=0;e<zt.length&&i!==0&&i<zt[e].priority;e++);zt.splice(e,0,t),e===0&&pu(t)}};function da(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Qr(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function El(){}function cf(t,i,e,n,r){if(r){if(typeof n=="function"){var o=n;n=function(){var u=Mr(s);o.call(u)}}var s=Mc(i,n,t,0,null,!1,!1,"",El);return t._reactRootContainer=s,t[Pt]=s.current,yn(t.nodeType===8?t.parentNode:t),ai(),s}for(;r=t.lastChild;)t.removeChild(r);if(typeof n=="function"){var l=n;n=function(){var u=Mr(a);l.call(u)}}var a=ua(t,0,!1,null,null,!1,!1,"",El);return t._reactRootContainer=a,t[Pt]=a.current,yn(t.nodeType===8?t.parentNode:t),ai(function(){qr(i,a,e,n)}),a}function Yr(t,i,e,n,r){var o=e._reactRootContainer;if(o){var s=o;if(typeof r=="function"){var l=r;r=function(){var a=Mr(s);l.call(a)}}qr(i,s,t,r)}else s=cf(e,i,t,r,n);return Mr(s)}cu=function(t){switch(t.tag){case 3:var i=t.stateNode;if(i.current.memoizedState.isDehydrated){var e=Ji(i.pendingLanes);e!==0&&(Ls(i,e|1),Ve(i,ve()),!(ee&6)&&(Ii=ve()+500,Qt()))}break;case 13:ai(function(){var n=Ct(t,1);if(n!==null){var r=Ie();dt(n,t,1,r)}}),ca(t,1)}};Os=function(t){if(t.tag===13){var i=Ct(t,134217728);if(i!==null){var e=Ie();dt(i,t,134217728,e)}ca(t,134217728)}};hu=function(t){if(t.tag===13){var i=Wt(t),e=Ct(t,i);if(e!==null){var n=Ie();dt(e,t,i,n)}ca(t,i)}};du=function(){return ne};fu=function(t,i){var e=ne;try{return ne=t,i()}finally{ne=e}};bo=function(t,i,e){switch(i){case"input":if(zo(t,e),i=e.name,e.type==="radio"&&i!=null){for(e=t;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<e.length;i++){var n=e[i];if(n!==t&&n.form===t.form){var r=br(n);if(!r)throw Error(z(90));Vl(n),zo(n,r)}}}break;case"textarea":Zl(t,e);break;case"select":i=e.value,i!=null&&Pi(t,!!e.multiple,i,!1)}};$l=oa;eu=ai;var hf={usingClientEntryPoint:!1,Events:[Fn,yi,br,Kl,Jl,oa]},Qi={findFiberByHostInstance:Jt,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},df={bundleType:Qi.bundleType,version:Qi.version,rendererPackageName:Qi.rendererPackageName,rendererConfig:Qi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=nu(t),t===null?null:t.stateNode},findFiberByHostInstance:Qi.findFiberByHostInstance||uf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jn.isDisabled&&Jn.supportsFiber)try{Br=Jn.inject(df),vt=Jn}catch{}}Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hf;Ye.createPortal=function(t,i){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!da(i))throw Error(z(200));return lf(t,i,null,e)};Ye.createRoot=function(t,i){if(!da(t))throw Error(z(299));var e=!1,n="",r=Nc;return i!=null&&(i.unstable_strictMode===!0&&(e=!0),i.identifierPrefix!==void 0&&(n=i.identifierPrefix),i.onRecoverableError!==void 0&&(r=i.onRecoverableError)),i=ua(t,1,!1,null,null,e,!1,n,r),t[Pt]=i.current,yn(t.nodeType===8?t.parentNode:t),new ha(i)};Ye.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=nu(i),t=t===null?null:t.stateNode,t};Ye.flushSync=function(t){return ai(t)};Ye.hydrate=function(t,i,e){if(!Qr(i))throw Error(z(200));return Yr(null,t,i,!0,e)};Ye.hydrateRoot=function(t,i,e){if(!da(t))throw Error(z(405));var n=e!=null&&e.hydratedSources||null,r=!1,o="",s=Nc;if(e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(o=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),i=Mc(i,null,t,1,e??null,r,!1,o,s),t[Pt]=i.current,yn(t),n)for(t=0;t<n.length;t++)e=n[t],r=e._getVersion,r=r(e._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[e,r]:i.mutableSourceEagerHydrationData.push(e,r);return new Xr(i)};Ye.render=function(t,i,e){if(!Qr(i))throw Error(z(200));return Yr(null,t,i,!1,e)};Ye.unmountComponentAtNode=function(t){if(!Qr(t))throw Error(z(40));return t._reactRootContainer?(ai(function(){Yr(null,null,t,!1,function(){t._reactRootContainer=null,t[Pt]=null})}),!0):!1};Ye.unstable_batchedUpdates=oa;Ye.unstable_renderSubtreeIntoContainer=function(t,i,e,n){if(!Qr(e))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Yr(t,i,e,!1,n)};Ye.version="18.3.1-next-f1338f8080-20240426";function Bc(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Bc)}catch(t){console.error(t)}}Bc(),Bl.exports=Ye;var ff=Bl.exports,Ic,Sl=ff;Ic=Sl.createRoot,Sl.hydrateRoot;const pf=({currentPage:t})=>{const e=[{patientId:"123456789",diagnosis:"Sickle Cell Anemia",location:"Blood Smear",findings:"Sickle-shaped red blood cells, decreased oxygen saturation, and increased risk of vascular occlusion."},{patientId:"987654321",diagnosis:"River Water",location:"Yamuna River View",findings:"Amount of pollutants in water"},{patientId:"555666777",diagnosis:"Lotus Pond Observation",location:"Lotus Pond",findings:"Two beautiful lotus flowers growing, a serene and calm water environment."}][t]||{};return J.jsxs("div",{children:[J.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Finding Details"}),J.jsxs("div",{className:"space-y-4",children:[J.jsxs("div",{children:[J.jsx("h3",{className:"font-medium",children:"ID"}),J.jsx("p",{children:e.patientId})]}),J.jsxs("div",{children:[J.jsx("h3",{className:"font-medium",children:"Diagnosis"}),J.jsx("p",{children:e.diagnosis})]}),J.jsxs("div",{children:[J.jsx("h3",{className:"font-medium",children:"Location"}),J.jsx("p",{children:e.location})]}),J.jsxs("div",{children:[J.jsx("h3",{className:"font-medium",children:"Findings"}),J.jsx("p",{children:e.findings})]})]})]})};var Ac={exports:{}};(function(t){//! openseadragon 5.0.0
//! Built on 2024-08-14
//! Git commit: v5.0.0-0-f28b7fc1
//! http://openseadragon.github.io
//! License: http://openseadragon.github.io/license/
function i(e){return new i.Viewer(e)}(function(e){e.version={versionStr:"5.0.0",major:parseInt("5",10),minor:parseInt("0",10),revision:parseInt("0",10)};var n={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object AsyncFunction]":"function","[object Promise]":"promise","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},r=Object.prototype.toString,o=Object.prototype.hasOwnProperty;e.isFunction=function(s){return e.type(s)==="function"},e.isArray=Array.isArray||function(s){return e.type(s)==="array"},e.isWindow=function(s){return s&&typeof s=="object"&&"setInterval"in s},e.type=function(s){return s==null?String(s):n[r.call(s)]||"object"},e.isPlainObject=function(s){if(!s||i.type(s)!=="object"||s.nodeType||e.isWindow(s)||s.constructor&&!o.call(s,"constructor")&&!o.call(s.constructor.prototype,"isPrototypeOf"))return!1;var l;for(var a in s)l=a;return l===void 0||o.call(s,l)},e.isEmptyObject=function(s){for(var l in s)return!1;return!0},e.freezeObject=function(s){return Object.freeze?e.freezeObject=Object.freeze:e.freezeObject=function(l){return l},e.freezeObject(s)},e.supportsCanvas=function(){var s=document.createElement("canvas");return!!(e.isFunction(s.getContext)&&s.getContext("2d"))}(),e.isCanvasTainted=function(s){var l=!1;try{s.getContext("2d").getImageData(0,0,1,1)}catch{l=!0}return l},e.supportsAddEventListener=function(){return!!(document.documentElement.addEventListener&&document.addEventListener)}(),e.supportsRemoveEventListener=function(){return!!(document.documentElement.removeEventListener&&document.removeEventListener)}(),e.supportsEventListenerOptions=function(){var s=0;if(e.supportsAddEventListener)try{var l={get capture(){return s++,!1},get once(){return s++,!1},get passive(){return s++,!1}};window.addEventListener("test",null,l),window.removeEventListener("test",null,l)}catch{s=0}return s>=3}(),e.getCurrentPixelDensityRatio=function(){if(e.supportsCanvas){var s=document.createElement("canvas").getContext("2d"),l=window.devicePixelRatio||1,a=s.webkitBackingStorePixelRatio||s.mozBackingStorePixelRatio||s.msBackingStorePixelRatio||s.oBackingStorePixelRatio||s.backingStorePixelRatio||1;return Math.max(l,1)/a}else return 1},e.pixelDensityRatio=e.getCurrentPixelDensityRatio()})(i),function(e){e.extend=function(){var a,u,c,h,d,m,y=arguments[0]||{},T=arguments.length,P=!1,v=1;for(typeof y=="boolean"&&(P=y,y=arguments[1]||{},v=2),typeof y!="object"&&!i.isFunction(y)&&(y={}),T===v&&(y=this,--v);v<T;v++)if(a=arguments[v],a!==null||a!==void 0)for(u in a){var w=Object.getOwnPropertyDescriptor(a,u);if(w!==void 0){if(w.get||w.set){Object.defineProperty(y,u,w);continue}h=w.value}else{e.console.warn('Could not copy inherited property "'+u+'".');continue}y!==h&&(P&&h&&(i.isPlainObject(h)||(d=i.isArray(h)))?(c=y[u],d?(d=!1,m=c&&i.isArray(c)?c:[]):m=c&&i.isPlainObject(c)?c:{},y[u]=i.extend(P,m,h)):h!==void 0&&(y[u]=h))}return y};var n=function(){if(typeof navigator!="object")return!1;var a=navigator.userAgent;return typeof a!="string"?!1:a.indexOf("iPhone")!==-1||a.indexOf("iPad")!==-1||a.indexOf("iPod")!==-1};e.extend(e,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},splitHashDataForPost:!1,panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{dragToPan:!0,scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,dblClickDragToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,dblClickDragToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,dblClickDragToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,dblClickDragToZoom:!1,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerDblClickDrag:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:n(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,maxTilesPerFrame:1,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorElement:null,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,overlayPreserveContentDirection:!0,opacity:1,compositeOperation:null,drawer:["webgl","canvas","html"],drawerOptions:{webgl:{},canvas:{},html:{},custom:{}},preload:!1,imageSmoothingEnabled:!0,placeholderFillStyle:null,subPixelRoundingForTransparency:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,tileRetryMax:0,tileRetryDelay:2500,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"],silenceMultiImageWarnings:!1},delegate:function(a,u){return function(){var c=arguments;return c===void 0&&(c=[]),u.apply(a,c)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5,EDGE:6,CHROMEEDGE:7},SUBPIXEL_ROUNDING_OCCURRENCES:{NEVER:0,ONLY_AT_REST:1,ALWAYS:2},_viewers:new Map,getViewer:function(a){return e._viewers.get(this.getElement(a))},getElement:function(a){return typeof a=="string"&&(a=document.getElementById(a)),a},getElementPosition:function(a){var u=new e.Point,c,h;for(a=e.getElement(a),c=e.getElementStyle(a).position==="fixed",h=l(a,c);h;)u.x+=a.offsetLeft,u.y+=a.offsetTop,c&&(u=u.plus(e.getPageScroll())),a=h,c=e.getElementStyle(a).position==="fixed",h=l(a,c);return u},getElementOffset:function(a){a=e.getElement(a);var u=a&&a.ownerDocument,c,h,d={top:0,left:0};return u?(c=u.documentElement,typeof a.getBoundingClientRect<"u"&&(d=a.getBoundingClientRect()),h=u===u.window?u:u.nodeType===9?u.defaultView||u.parentWindow:!1,new e.Point(d.left+(h.pageXOffset||c.scrollLeft)-(c.clientLeft||0),d.top+(h.pageYOffset||c.scrollTop)-(c.clientTop||0))):new e.Point},getElementSize:function(a){return a=e.getElement(a),new e.Point(a.clientWidth,a.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(a){return a=e.getElement(a),a.currentStyle}:function(a){return a=e.getElement(a),window.getComputedStyle(a,"")},getCssPropertyWithVendorPrefix:function(a){var u={};return e.getCssPropertyWithVendorPrefix=function(c){if(u[c]!==void 0)return u[c];var h=document.createElement("div").style,d=null;if(h[c]!==void 0)d=c;else for(var m=["Webkit","Moz","MS","O","webkit","moz","ms","o"],y=e.capitalizeFirstLetter(c),T=0;T<m.length;T++){var P=m[T]+y;if(h[P]!==void 0){d=P;break}}return u[c]=d,d},e.getCssPropertyWithVendorPrefix(a)},capitalizeFirstLetter:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},positiveModulo:function(a,u){var c=a%u;return c<0&&(c+=u),c},pointInElement:function(a,u){a=e.getElement(a);var c=e.getElementOffset(a),h=e.getElementSize(a);return u.x>=c.x&&u.x<c.x+h.x&&u.y<c.y+h.y&&u.y>=c.y},getMousePosition:function(a){if(typeof a.pageX=="number")e.getMousePosition=function(u){var c=new e.Point;return c.x=u.pageX,c.y=u.pageY,c};else if(typeof a.clientX=="number")e.getMousePosition=function(u){var c=new e.Point;return c.x=u.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,c.y=u.clientY+document.body.scrollTop+document.documentElement.scrollTop,c};else throw new Error("Unknown event mouse position, no known technique.");return e.getMousePosition(a)},getPageScroll:function(){var a=document.documentElement||{},u=document.body||{};if(typeof window.pageXOffset=="number")e.getPageScroll=function(){return new e.Point(window.pageXOffset,window.pageYOffset)};else if(u.scrollLeft||u.scrollTop)e.getPageScroll=function(){return new e.Point(document.body.scrollLeft,document.body.scrollTop)};else if(a.scrollLeft||a.scrollTop)e.getPageScroll=function(){return new e.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)};else return new e.Point(0,0);return e.getPageScroll()},setPageScroll:function(a){if(typeof window.scrollTo<"u")e.setPageScroll=function(h){window.scrollTo(h.x,h.y)};else{var u=e.getPageScroll();if(u.x===a.x&&u.y===a.y)return;document.body.scrollLeft=a.x,document.body.scrollTop=a.y;var c=e.getPageScroll();if(c.x!==u.x&&c.y!==u.y){e.setPageScroll=function(h){document.body.scrollLeft=h.x,document.body.scrollTop=h.y};return}if(document.documentElement.scrollLeft=a.x,document.documentElement.scrollTop=a.y,c=e.getPageScroll(),c.x!==u.x&&c.y!==u.y){e.setPageScroll=function(h){document.documentElement.scrollLeft=h.x,document.documentElement.scrollTop=h.y};return}e.setPageScroll=function(h){}}e.setPageScroll(a)},getWindowSize:function(){var a=document.documentElement||{},u=document.body||{};if(typeof window.innerWidth=="number")e.getWindowSize=function(){return new e.Point(window.innerWidth,window.innerHeight)};else if(a.clientWidth||a.clientHeight)e.getWindowSize=function(){return new e.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else if(u.clientWidth||u.clientHeight)e.getWindowSize=function(){return new e.Point(document.body.clientWidth,document.body.clientHeight)};else throw new Error("Unknown window size, no known technique.");return e.getWindowSize()},makeCenteredNode:function(a){a=e.getElement(a);var u=[e.makeNeutralElement("div"),e.makeNeutralElement("div"),e.makeNeutralElement("div")];return e.extend(u[0].style,{display:"table",height:"100%",width:"100%"}),e.extend(u[1].style,{display:"table-row"}),e.extend(u[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),u[0].appendChild(u[1]),u[1].appendChild(u[2]),u[2].appendChild(a),u[0]},makeNeutralElement:function(a){var u=document.createElement(a),c=u.style;return c.background="transparent none",c.border="none",c.margin="0px",c.padding="0px",c.position="static",u},now:function(){return Date.now?e.now=Date.now:e.now=function(){return new Date().getTime()},e.now()},makeTransparentImage:function(a){var u=e.makeNeutralElement("img");return u.src=a,u},setElementOpacity:function(a,u,c){var h,d;a=e.getElement(a),c&&!e.Browser.alpha&&(u=Math.round(u)),e.Browser.opacity?a.style.opacity=u<1?u:"":u<1?(h=Math.round(100*u),d="alpha(opacity="+h+")",a.style.filter=d):a.style.filter=""},setElementTouchActionNone:function(a){a=e.getElement(a),typeof a.style.touchAction<"u"?a.style.touchAction="none":typeof a.style.msTouchAction<"u"&&(a.style.msTouchAction="none")},setElementPointerEvents:function(a,u){a=e.getElement(a),typeof a.style<"u"&&typeof a.style.pointerEvents<"u"&&(a.style.pointerEvents=u)},setElementPointerEventsNone:function(a){e.setElementPointerEvents(a,"none")},addClass:function(a,u){a=e.getElement(a),a.className?(" "+a.className+" ").indexOf(" "+u+" ")===-1&&(a.className+=" "+u):a.className=u},indexOf:function(a,u,c){return Array.prototype.indexOf?this.indexOf=function(h,d,m){return h.indexOf(d,m)}:this.indexOf=function(h,d,m){var y,T=m||0,P;if(!h)throw new TypeError;if(P=h.length,P===0||T>=P)return-1;for(T<0&&(T=P-Math.abs(T)),y=T;y<P;y++)if(h[y]===d)return y;return-1},this.indexOf(a,u,c)},removeClass:function(a,u){var c,h=[],d;for(a=e.getElement(a),c=a.className.split(/\s+/),d=0;d<c.length;d++)c[d]&&c[d]!==u&&h.push(c[d]);a.className=h.join(" ")},normalizeEventListenerOptions:function(a){var u;return typeof a<"u"?typeof a=="boolean"?u=e.supportsEventListenerOptions?{capture:a}:a:u=e.supportsEventListenerOptions?a:typeof a.capture<"u"?a.capture:!1:u=e.supportsEventListenerOptions?{capture:!1}:!1,u},addEvent:function(){if(e.supportsAddEventListener)return function(a,u,c,h){h=e.normalizeEventListenerOptions(h),a=e.getElement(a),a.addEventListener(u,c,h)};if(document.documentElement.attachEvent&&document.attachEvent)return function(a,u,c){a=e.getElement(a),a.attachEvent("on"+u,c)};throw new Error("No known event model.")}(),removeEvent:function(){if(e.supportsRemoveEventListener)return function(a,u,c,h){h=e.normalizeEventListenerOptions(h),a=e.getElement(a),a.removeEventListener(u,c,h)};if(document.documentElement.detachEvent&&document.detachEvent)return function(a,u,c){a=e.getElement(a),a.detachEvent("on"+u,c)};throw new Error("No known event model.")}(),cancelEvent:function(a){a.preventDefault()},eventIsCanceled:function(a){return a.defaultPrevented},stopEvent:function(a){a.stopPropagation()},createCallback:function(a,u){console.error("The createCallback function is deprecated and will be removed in future versions. Please use alternativeFunction instead.");var c=[],h;for(h=2;h<arguments.length;h++)c.push(arguments[h]);return function(){var d=c.concat([]),m;for(m=0;m<arguments.length;m++)d.push(arguments[m]);return u.apply(a,d)}},getUrlParameter:function(a){var u=s[a];return u||null},getUrlProtocol:function(a){var u=a.match(/^([a-z]+:)\/\//i);return u===null?window.location.protocol:u[1].toLowerCase()},createAjaxRequest:function(){if(window.XMLHttpRequest)return e.createAjaxRequest=function(){return new XMLHttpRequest},new XMLHttpRequest;throw new Error("Browser doesn't support XMLHttpRequest.")},makeAjaxRequest:function(a,u,c){var h,d,m,y;e.isPlainObject(a)&&(u=a.success,c=a.error,h=a.withCredentials,d=a.headers,m=a.responseType||null,y=a.postData||null,a=a.url);var T=e.getUrlProtocol(a),P=e.createAjaxRequest();if(!e.isFunction(u))throw new Error("makeAjaxRequest requires a success callback");P.onreadystatechange=function(){P.readyState===4&&(P.onreadystatechange=function(){},P.status>=200&&P.status<300||P.status===0&&T!=="http:"&&T!=="https:"?u(P):e.isFunction(c)?c(P):e.console.error("AJAX request returned %d: %s",P.status,a))};var v=y?"POST":"GET";try{if(P.open(v,a,!0),m&&(P.responseType=m),d)for(var w in d)Object.prototype.hasOwnProperty.call(d,w)&&d[w]&&P.setRequestHeader(w,d[w]);h&&(P.withCredentials=!0),P.send(y)}catch(S){e.console.error("%s while making AJAX request: %s",S.name,S.message),P.onreadystatechange=function(){},e.isFunction(c)&&c(P,S)}return P},jsonp:function(a){var u,c=a.url,h=document.head||document.getElementsByTagName("head")[0]||document.documentElement,d=a.callbackName||"openseadragon"+e.now(),m=window[d],y="$1"+d+"$2",T=a.param||"callback",P=a.callback;c=c.replace(/(=)\?(&|$)|\?\?/i,y),c+=(/\?/.test(c)?"&":"?")+T+"="+d,window[d]=function(v){if(m)window[d]=m;else try{delete window[d]}catch{}P&&e.isFunction(P)&&P(v)},u=document.createElement("script"),(a.async!==void 0||a.async!==!1)&&(u.async="async"),a.scriptCharset&&(u.charset=a.scriptCharset),u.src=c,u.onload=u.onreadystatechange=function(v,w){(w||!u.readyState||/loaded|complete/.test(u.readyState))&&(u.onload=u.onreadystatechange=null,h&&u.parentNode&&h.removeChild(u),u=void 0)},h.insertBefore(u,h.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(a){if(window.DOMParser)e.parseXml=function(u){var c=null,h;return h=new DOMParser,c=h.parseFromString(u,"text/xml"),c};else throw new Error("Browser doesn't support XML DOM.");return e.parseXml(a)},parseJSON:function(a){return e.parseJSON=window.JSON.parse,e.parseJSON(a)},imageFormatSupported:function(a){return a=a||"",!!o[a.toLowerCase()]},setImageFormatsSupported:function(a){e.extend(o,a)}});var r=function(a){};e.console=window.console||{log:r,debug:r,info:r,warn:r,error:r,assert:r},e.Browser={vendor:e.BROWSERS.UNKNOWN,version:0,alpha:!0};var o={avif:!0,bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1,webp:!0},s={};(function(){var a=navigator.appVersion,u=navigator.userAgent,c;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&(e.Browser.vendor=e.BROWSERS.IE,e.Browser.version=parseFloat(u.substring(u.indexOf("MSIE")+5,u.indexOf(";",u.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(u.indexOf("Edge")>=0?(e.Browser.vendor=e.BROWSERS.EDGE,e.Browser.version=parseFloat(u.substring(u.indexOf("Edge")+5))):u.indexOf("Edg")>=0?(e.Browser.vendor=e.BROWSERS.CHROMEEDGE,e.Browser.version=parseFloat(u.substring(u.indexOf("Edg")+4))):u.indexOf("Firefox")>=0?(e.Browser.vendor=e.BROWSERS.FIREFOX,e.Browser.version=parseFloat(u.substring(u.indexOf("Firefox")+8))):u.indexOf("Safari")>=0?(e.Browser.vendor=u.indexOf("Chrome")>=0?e.BROWSERS.CHROME:e.BROWSERS.SAFARI,e.Browser.version=parseFloat(u.substring(u.substring(0,u.indexOf("Safari")).lastIndexOf("/")+1,u.indexOf("Safari")))):(c=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),c.exec(u)!==null&&(e.Browser.vendor=e.BROWSERS.IE,e.Browser.version=parseFloat(RegExp.$1))));break;case"Opera":e.Browser.vendor=e.BROWSERS.OPERA,e.Browser.version=parseFloat(a);break}var h=window.location.search.substring(1),d=h.split("&"),m,y,T;for(T=0;T<d.length;T++)if(m=d[T],y=m.indexOf("="),y>0){var P=m.substring(0,y),v=m.substring(y+1);try{s[P]=decodeURIComponent(v)}catch{e.console.error("Ignoring malformed URL parameter: %s=%s",P,v)}}e.Browser.alpha=!(e.Browser.vendor===e.BROWSERS.CHROME&&e.Browser.version<2),e.Browser.opacity=!0,e.Browser.vendor===e.BROWSERS.IE&&e.console.error("Internet Explorer is not supported by OpenSeadragon")})(),function(a){var u=a.requestAnimationFrame||a.mozRequestAnimationFrame||a.webkitRequestAnimationFrame||a.msRequestAnimationFrame,c=a.cancelAnimationFrame||a.mozCancelAnimationFrame||a.webkitCancelAnimationFrame||a.msCancelAnimationFrame;if(u&&c)e.requestAnimationFrame=function(){return u.apply(a,arguments)},e.cancelAnimationFrame=function(){return c.apply(a,arguments)};else{var h=[],d=[],m=0,y;e.requestAnimationFrame=function(T){return h.push([++m,T]),y||(y=setInterval(function(){if(h.length){var P=e.now(),v=d;for(d=h,h=v;d.length;)d.shift()[1](P)}else clearInterval(y),y=void 0},1e3/50)),m},e.cancelAnimationFrame=function(T){var P,v;for(P=0,v=h.length;P<v;P+=1)if(h[P][0]===T){h.splice(P,1);return}for(P=0,v=d.length;P<v;P+=1)if(d[P][0]===T){d.splice(P,1);return}}}}(window);function l(a,u){return u&&a!==document.body?document.body:a.offsetParent}}(i),function(e,n){t.exports?t.exports=n():e.OpenSeadragon=n()}(Hc,function(){return i}),function(e){class n{constructor(o){o||(o=[0,0,0,0,0,0,0,0,0]),this.values=o}static makeIdentity(){return new n([1,0,0,0,1,0,0,0,1])}static makeTranslation(o,s){return new n([1,0,0,0,1,0,o,s,1])}static makeRotation(o){var s=Math.cos(o),l=Math.sin(o);return new n([s,-l,0,l,s,0,0,0,1])}static makeScaling(o,s){return new n([o,0,0,0,s,0,0,0,1])}multiply(o){let s=this.values,l=o.values;var a=s[0*3+0],u=s[0*3+1],c=s[0*3+2],h=s[1*3+0],d=s[1*3+1],m=s[1*3+2],y=s[2*3+0],T=s[2*3+1],P=s[2*3+2],v=l[0*3+0],w=l[0*3+1],S=l[0*3+2],R=l[1*3+0],k=l[1*3+1],F=l[1*3+2],N=l[2*3+0],B=l[2*3+1],j=l[2*3+2];return new n([v*a+w*h+S*y,v*u+w*d+S*T,v*c+w*m+S*P,R*a+k*h+F*y,R*u+k*d+F*T,R*c+k*m+F*P,N*a+B*h+j*y,N*u+B*d+j*T,N*c+B*m+j*P])}}e.Mat3=n}(i),function(e){var n={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(n.supportsFullScreen=!0,n.getFullScreenElement=function(){return document.fullscreenElement},n.requestFullScreen=function(r){return r.requestFullscreen().catch(function(o){e.console.error("Fullscreen request failed: ",o)})},n.exitFullScreen=function(){document.exitFullscreen().catch(function(r){e.console.error("Error while exiting fullscreen: ",r)})},n.fullScreenEventName="fullscreenchange",n.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(n.supportsFullScreen=!0,n.getFullScreenElement=function(){return document.msFullscreenElement},n.requestFullScreen=function(r){return r.msRequestFullscreen()},n.exitFullScreen=function(){document.msExitFullscreen()},n.fullScreenEventName="MSFullscreenChange",n.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(n.supportsFullScreen=!0,n.getFullScreenElement=function(){return document.webkitFullscreenElement},n.requestFullScreen=function(r){return r.webkitRequestFullscreen()},n.exitFullScreen=function(){document.webkitExitFullscreen()},n.fullScreenEventName="webkitfullscreenchange",n.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(n.supportsFullScreen=!0,n.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},n.requestFullScreen=function(r){return r.webkitRequestFullScreen()},n.exitFullScreen=function(){document.webkitCancelFullScreen()},n.fullScreenEventName="webkitfullscreenchange",n.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(n.supportsFullScreen=!0,n.getFullScreenElement=function(){return document.mozFullScreenElement},n.requestFullScreen=function(r){return r.mozRequestFullScreen()},n.exitFullScreen=function(){document.mozCancelFullScreen()},n.fullScreenEventName="mozfullscreenchange",n.fullScreenErrorEventName="mozfullscreenerror"),n.isFullScreen=function(){return n.getFullScreenElement()!==null},n.cancelFullScreen=function(){e.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),n.exitFullScreen()},e.extend(e,n)}(i),function(e){e.EventSource=function(){this.events={},this._rejectedEventList={}},e.EventSource.prototype={addOnceHandler:function(n,r,o,s,l){var a=this;s=s||1;var u=0,c=function(h){return u++,u===s&&a.removeHandler(n,c),r(h)};return this.addHandler(n,c,o,l)},addHandler:function(n,r,o,s){if(Object.prototype.hasOwnProperty.call(this._rejectedEventList,n))return e.console.error(`Error adding handler for ${n}. ${this._rejectedEventList[n]}`),!1;var l=this.events[n];if(l||(this.events[n]=l=[]),r&&e.isFunction(r)){var a=l.length,u={handler:r,userData:o||null,priority:s||0};for(l[a]=u;a>0&&l[a-1].priority<l[a].priority;)l[a]=l[a-1],l[a-1]=u,a--}return!0},removeHandler:function(n,r){var o=this.events[n],s=[],l;if(o&&e.isArray(o)){for(l=0;l<o.length;l++)o[l].handler!==r&&s.push(o[l]);this.events[n]=s}},numberOfHandlers:function(n){var r=this.events[n];return r?r.length:0},removeAllHandlers:function(n){if(n)this.events[n]=[];else for(var r in this.events)this.events[r]=[]},getHandler:function(n){var r=this.events[n];return!r||!r.length?null:(r=r.length===1?[r[0]]:Array.apply(null,r),function(o,s){var l,a=r.length;for(l=0;l<a;l++)r[l]&&(s.eventSource=o,s.userData=r[l].userData,r[l].handler(s))})},raiseEvent:function(n,r){if(Object.prototype.hasOwnProperty.call(this._rejectedEventList,n))return e.console.error(`Error adding handler for ${n}. ${this._rejectedEventList[n]}`),!1;var o=this.getHandler(n);return o&&o(this,r||{}),!0},rejectEventHandler(n,r=""){this._rejectedEventList[n]=r},allowEventHandler(n){delete this._rejectedEventList[n]}}}(i),function(e){var n={};e.MouseTracker=function(g){var p=arguments;e.isPlainObject(g)||(g={element:p[0],clickTimeThreshold:p[1],clickDistThreshold:p[2]}),this.hash=Math.random(),this.element=e.getElement(g.element),this.clickTimeThreshold=g.clickTimeThreshold||e.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=g.clickDistThreshold||e.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=g.dblClickTimeThreshold||e.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=g.dblClickDistThreshold||e.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=g.userData||null,this.stopDelay=g.stopDelay||50,this.preProcessEventHandler=g.preProcessEventHandler||null,this.contextMenuHandler=g.contextMenuHandler||null,this.enterHandler=g.enterHandler||null,this.leaveHandler=g.leaveHandler||null,this.exitHandler=g.exitHandler||null,this.overHandler=g.overHandler||null,this.outHandler=g.outHandler||null,this.pressHandler=g.pressHandler||null,this.nonPrimaryPressHandler=g.nonPrimaryPressHandler||null,this.releaseHandler=g.releaseHandler||null,this.nonPrimaryReleaseHandler=g.nonPrimaryReleaseHandler||null,this.moveHandler=g.moveHandler||null,this.scrollHandler=g.scrollHandler||null,this.clickHandler=g.clickHandler||null,this.dblClickHandler=g.dblClickHandler||null,this.dragHandler=g.dragHandler||null,this.dragEndHandler=g.dragEndHandler||null,this.pinchHandler=g.pinchHandler||null,this.stopHandler=g.stopHandler||null,this.keyDownHandler=g.keyDownHandler||null,this.keyUpHandler=g.keyUpHandler||null,this.keyHandler=g.keyHandler||null,this.focusHandler=g.focusHandler||null,this.blurHandler=g.blurHandler||null;var x=this;n[this.hash]={click:function(E){S(x,E)},dblclick:function(E){R(x,E)},keydown:function(E){k(x,E)},keyup:function(E){F(x,E)},keypress:function(E){N(x,E)},focus:function(E){B(x,E)},blur:function(E){j(x,E)},contextmenu:function(E){U(x,E)},wheel:function(E){X(x,E)},mousewheel:function(E){q(x,E)},DOMMouseScroll:function(E){q(x,E)},MozMousePixelScroll:function(E){q(x,E)},losecapture:function(E){we(x,E)},mouseenter:function(E){Q(x,E)},mouseleave:function(E){Je(x,E)},mouseover:function(E){kt(x,E)},mouseout:function(E){$e(x,E)},mousedown:function(E){st(x,E)},mouseup:function(E){On(x,E)},mousemove:function(E){Mn(x,E)},touchstart:function(E){Te(x,E)},touchend:function(E){Ee(x,E)},touchmove:function(E){xe(x,E)},touchcancel:function(E){A(x,E)},gesturestart:function(E){G(x,E)},gesturechange:function(E){Z(x,E)},gotpointercapture:function(E){se(x,E)},lostpointercapture:function(E){pe(x,E)},pointerenter:function(E){Q(x,E)},pointerleave:function(E){Je(x,E)},pointerover:function(E){kt(x,E)},pointerout:function(E){$e(x,E)},pointerdown:function(E){st(x,E)},pointerup:function(E){On(x,E)},pointermove:function(E){Mn(x,E)},pointercancel:function(E){$r(x,E)},pointerupcaptured:function(E){Kr(x,E)},pointermovecaptured:function(E){Jr(x,E)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null,sentDragEvent:!1},this.hasGestureHandlers=!!(this.pressHandler||this.nonPrimaryPressHandler||this.releaseHandler||this.nonPrimaryReleaseHandler||this.clickHandler||this.dblClickHandler||this.dragHandler||this.dragEndHandler||this.pinchHandler),this.hasScrollHandler=!!this.scrollHandler,e.MouseTracker.havePointerEvents&&e.setElementPointerEvents(this.element,"auto"),this.exitHandler&&e.console.error("MouseTracker.exitHandler is deprecated. Use MouseTracker.leaveHandler instead."),g.startDisabled||this.setTracking(!0)},e.MouseTracker.prototype={destroy:function(){a(this),this.element=null,n[this.hash]=null,delete n[this.hash]},isTracking:function(){return n[this.hash].tracking},setTracking:function(g){return g?l(this):a(this),this},getActivePointersListByType:function(g){var p=n[this.hash],x,E=p?p.activePointersLists.length:0,D;for(x=0;x<E;x++)if(p.activePointersLists[x].type===g)return p.activePointersLists[x];return D=new e.MouseTracker.GesturePointList(g),p&&p.activePointersLists.push(D),D},getActivePointerCount:function(){var g=n[this.hash],p,x=g.activePointersLists.length,E=0;for(p=0;p<x;p++)E+=g.activePointersLists[p].getLength();return E},preProcessEventHandler:function(){},contextMenuHandler:function(){},enterHandler:function(){},leaveHandler:function(){},exitHandler:function(){},overHandler:function(){},outHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}};var r=function(){try{return window.self!==window.top}catch{return!0}}();function o(g){try{return g.addEventListener&&g.removeEventListener}catch{return!1}}e.MouseTracker.gesturePointVelocityTracker=function(){var g=[],p=0,x=0,E=function(ie,V){return ie.hash.toString()+V.type+V.id.toString()},D=function(){var ie,V=g.length,Ge,Ce,hi=e.now(),fa,pa,ga;for(fa=hi-x,x=hi,ie=0;ie<V;ie++)Ge=g[ie],Ce=Ge.gPoint,Ce.direction=Math.atan2(Ce.currentPos.y-Ge.lastPos.y,Ce.currentPos.x-Ge.lastPos.x),pa=Ge.lastPos.distanceTo(Ce.currentPos),Ge.lastPos=Ce.currentPos,ga=1e3*pa/(fa+1),Ce.speed=.75*ga+.25*Ce.speed},M=function(ie,V){var Ge=E(ie,V);g.push({guid:Ge,gPoint:V,lastPos:V.currentPos}),g.length===1&&(x=e.now(),p=window.setInterval(D,50))},W=function(ie,V){var Ge=E(ie,V),Ce,hi=g.length;for(Ce=0;Ce<hi;Ce++)if(g[Ce].guid===Ge){g.splice(Ce,1),hi--,hi===0&&window.clearInterval(p);break}};return{addPoint:M,removePoint:W}}(),e.MouseTracker.captureElement=document,e.MouseTracker.wheelEventName="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll",e.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur","contextmenu",e.MouseTracker.wheelEventName],e.MouseTracker.wheelEventName==="DOMMouseScroll"&&e.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent?(e.MouseTracker.havePointerEvents=!0,e.MouseTracker.subscribeEvents.push("pointerenter","pointerleave","pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),e.MouseTracker.havePointerCapture=function(){var g=document.createElement("div");return e.isFunction(g.setPointerCapture)&&e.isFunction(g.releasePointerCapture)}(),e.MouseTracker.havePointerCapture&&e.MouseTracker.subscribeEvents.push("gotpointercapture","lostpointercapture")):(e.MouseTracker.havePointerEvents=!1,e.MouseTracker.subscribeEvents.push("mouseenter","mouseleave","mouseover","mouseout","mousedown","mouseup","mousemove"),e.MouseTracker.mousePointerId="legacy-mouse",e.MouseTracker.havePointerCapture=function(){var g=document.createElement("div");return e.isFunction(g.setCapture)&&e.isFunction(g.releaseCapture)}(),e.MouseTracker.havePointerCapture&&e.MouseTracker.subscribeEvents.push("losecapture"),"ontouchstart"in window&&e.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&e.MouseTracker.subscribeEvents.push("gesturestart","gesturechange")),e.MouseTracker.GesturePointList=function(g){this._gPoints=[],this.type=g,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},e.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(g){return this._gPoints.push(g)},removeById:function(g){var p,x=this._gPoints.length;for(p=0;p<x;p++)if(this._gPoints[p].id===g){this._gPoints.splice(p,1);break}return this._gPoints.length},getByIndex:function(g){return g<this._gPoints.length?this._gPoints[g]:null},getById:function(g){var p,x=this._gPoints.length;for(p=0;p<x;p++)if(this._gPoints[p].id===g)return this._gPoints[p];return null},getPrimary:function(g){var p,x=this._gPoints.length;for(p=0;p<x;p++)if(this._gPoints[p].isPrimary)return this._gPoints[p];return null},addContact:function(){++this.contacts,this.contacts>1&&(this.type==="mouse"||this.type==="pen")&&(e.console.warn("GesturePointList.addContact() Implausible contacts value"),this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}};function s(g){var p=n[g.hash],x,E,D,M,W,ie=p.activePointersLists.length;for(x=0;x<ie;x++)if(D=p.activePointersLists[x],D.getLength()>0){for(W=[],M=D.asArray(),E=0;E<M.length;E++)W.push(M[E]);for(E=0;E<W.length;E++)ci(g,D,W[E])}for(x=0;x<ie;x++)p.activePointersLists.pop();p.sentDragEvent=!1}function l(g){var p=n[g.hash],x,E;if(!p.tracking){for(E=0;E<e.MouseTracker.subscribeEvents.length;E++)x=e.MouseTracker.subscribeEvents[E],e.addEvent(g.element,x,p[x],x===e.MouseTracker.wheelEventName?{passive:!1,capture:!1}:!1);s(g),p.tracking=!0}}function a(g){var p=n[g.hash],x,E;if(p.tracking){for(E=0;E<e.MouseTracker.subscribeEvents.length;E++)x=e.MouseTracker.subscribeEvents[E],e.removeEvent(g.element,x,p[x],!1);s(g),p.tracking=!1}}function u(g,p){var x=n[g.hash];if(p==="pointerevent")return{upName:"pointerup",upHandler:x.pointerupcaptured,moveName:"pointermove",moveHandler:x.pointermovecaptured};if(p==="mouse")return{upName:"pointerup",upHandler:x.pointerupcaptured,moveName:"pointermove",moveHandler:x.pointermovecaptured};if(p==="touch")return{upName:"touchend",upHandler:x.touchendcaptured,moveName:"touchmove",moveHandler:x.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function c(g,p){var x;if(e.MouseTracker.havePointerCapture)if(e.MouseTracker.havePointerEvents)try{g.element.setPointerCapture(p.id)}catch{e.console.warn("setPointerCapture() called on invalid pointer ID");return}else g.element.setCapture(!0);else x=u(g,e.MouseTracker.havePointerEvents?"pointerevent":p.type),r&&o(window.top)&&e.addEvent(window.top,x.upName,x.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,x.upName,x.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,x.moveName,x.moveHandler,!0);C(g,p,!0)}function h(g,p){var x,E,D;if(e.MouseTracker.havePointerCapture)if(e.MouseTracker.havePointerEvents){if(E=g.getActivePointersListByType(p.type),D=E.getById(p.id),!D||!D.captured)return;try{g.element.releasePointerCapture(p.id)}catch{}}else g.element.releaseCapture();else x=u(g,e.MouseTracker.havePointerEvents?"pointerevent":p.type),r&&o(window.top)&&e.removeEvent(window.top,x.upName,x.upHandler,!0),e.removeEvent(e.MouseTracker.captureElement,x.moveName,x.moveHandler,!0),e.removeEvent(e.MouseTracker.captureElement,x.upName,x.upHandler,!0);C(g,p,!1)}function d(g){return e.MouseTracker.havePointerEvents?g.pointerId:e.MouseTracker.mousePointerId}function m(g){return e.MouseTracker.havePointerEvents&&g.pointerType?g.pointerType:"mouse"}function y(g){return e.MouseTracker.havePointerEvents?g.isPrimary:!0}function T(g){return e.getMousePosition(g)}function P(g,p){return v(T(g),p)}function v(g,p){var x=e.getElementOffset(p);return g.minus(x)}function w(g,p){return new e.Point((g.x+p.x)/2,(g.y+p.y)/2)}function S(g,p){var x={originalEvent:p,eventType:"click",pointerType:"mouse",isEmulated:!1};_(g,x),x.preventDefault&&!x.defaultPrevented&&e.cancelEvent(p),x.stopPropagation&&e.stopEvent(p)}function R(g,p){var x={originalEvent:p,eventType:"dblclick",pointerType:"mouse",isEmulated:!1};_(g,x),x.preventDefault&&!x.defaultPrevented&&e.cancelEvent(p),x.stopPropagation&&e.stopEvent(p)}function k(g,p){var x=null,E={originalEvent:p,eventType:"keydown",pointerType:"",isEmulated:!1};_(g,E),g.keyDownHandler&&!E.preventGesture&&!E.defaultPrevented&&(x={eventSource:g,keyCode:p.keyCode?p.keyCode:p.charCode,ctrl:p.ctrlKey,shift:p.shiftKey,alt:p.altKey,meta:p.metaKey,originalEvent:p,preventDefault:E.preventDefault||E.defaultPrevented,userData:g.userData},g.keyDownHandler(x)),(x&&x.preventDefault||E.preventDefault&&!E.defaultPrevented)&&e.cancelEvent(p),E.stopPropagation&&e.stopEvent(p)}function F(g,p){var x=null,E={originalEvent:p,eventType:"keyup",pointerType:"",isEmulated:!1};_(g,E),g.keyUpHandler&&!E.preventGesture&&!E.defaultPrevented&&(x={eventSource:g,keyCode:p.keyCode?p.keyCode:p.charCode,ctrl:p.ctrlKey,shift:p.shiftKey,alt:p.altKey,meta:p.metaKey,originalEvent:p,preventDefault:E.preventDefault||E.defaultPrevented,userData:g.userData},g.keyUpHandler(x)),(x&&x.preventDefault||E.preventDefault&&!E.defaultPrevented)&&e.cancelEvent(p),E.stopPropagation&&e.stopEvent(p)}function N(g,p){var x=null,E={originalEvent:p,eventType:"keypress",pointerType:"",isEmulated:!1};_(g,E),g.keyHandler&&!E.preventGesture&&!E.defaultPrevented&&(x={eventSource:g,keyCode:p.keyCode?p.keyCode:p.charCode,ctrl:p.ctrlKey,shift:p.shiftKey,alt:p.altKey,meta:p.metaKey,originalEvent:p,preventDefault:E.preventDefault||E.defaultPrevented,userData:g.userData},g.keyHandler(x)),(x&&x.preventDefault||E.preventDefault&&!E.defaultPrevented)&&e.cancelEvent(p),E.stopPropagation&&e.stopEvent(p)}function B(g,p){var x={originalEvent:p,eventType:"focus",pointerType:"",isEmulated:!1};_(g,x),g.focusHandler&&!x.preventGesture&&g.focusHandler({eventSource:g,originalEvent:p,userData:g.userData})}function j(g,p){var x={originalEvent:p,eventType:"blur",pointerType:"",isEmulated:!1};_(g,x),g.blurHandler&&!x.preventGesture&&g.blurHandler({eventSource:g,originalEvent:p,userData:g.userData})}function U(g,p){var x=null,E={originalEvent:p,eventType:"contextmenu",pointerType:"mouse",isEmulated:!1};_(g,E),g.contextMenuHandler&&!E.preventGesture&&!E.defaultPrevented&&(x={eventSource:g,position:v(T(p),g.element),originalEvent:E.originalEvent,preventDefault:E.preventDefault||E.defaultPrevented,userData:g.userData},g.contextMenuHandler(x)),(x&&x.preventDefault||E.preventDefault&&!E.defaultPrevented)&&e.cancelEvent(p),E.stopPropagation&&e.stopEvent(p)}function X(g,p){re(g,p,p)}function q(g,p){var x={target:p.target||p.srcElement,type:"wheel",shiftKey:p.shiftKey||!1,clientX:p.clientX,clientY:p.clientY,pageX:p.pageX?p.pageX:p.clientX,pageY:p.pageY?p.pageY:p.clientY,deltaMode:p.type==="MozMousePixelScroll"?0:1,deltaX:0,deltaZ:0};e.MouseTracker.wheelEventName==="mousewheel"?x.deltaY=-p.wheelDelta/e.DEFAULT_SETTINGS.pixelsPerWheelLine:x.deltaY=p.detail,re(g,x,p)}function re(g,p,x){var E=0,D,M=null;E=p.deltaY?p.deltaY<0?1:-1:0,D={originalEvent:p,eventType:"wheel",pointerType:"mouse",isEmulated:p!==x},_(g,D),g.scrollHandler&&!D.preventGesture&&!D.defaultPrevented&&(M={eventSource:g,pointerType:"mouse",position:P(p,g.element),scroll:E,shift:p.shiftKey,isTouchEvent:!1,originalEvent:x,preventDefault:D.preventDefault||D.defaultPrevented,userData:g.userData},g.scrollHandler(M)),D.stopPropagation&&e.stopEvent(x),(M&&M.preventDefault||D.preventDefault&&!D.defaultPrevented)&&e.cancelEvent(x)}function we(g,p){var x={id:e.MouseTracker.mousePointerId,type:"mouse"},E={originalEvent:p,eventType:"lostpointercapture",pointerType:"mouse",isEmulated:!1};_(g,E),p.target===g.element&&C(g,x,!1),E.stopPropagation&&e.stopEvent(p)}function Te(g,p){var x,E,D=p.changedTouches.length,M,W=g.getActivePointersListByType("touch");x=e.now(),W.getLength()>p.touches.length-D&&e.console.warn("Tracked touch contact count doesn't match event.touches.length");var ie={originalEvent:p,eventType:"pointerdown",pointerType:"touch",isEmulated:!1};for(_(g,ie),E=0;E<D;E++)M={id:p.changedTouches[E].identifier,type:"touch",isPrimary:W.getLength()===0,currentPos:T(p.changedTouches[E]),currentTime:x},O(g,ie,M),Y(g,ie,M,0),C(g,M,!0);ie.preventDefault&&!ie.defaultPrevented&&e.cancelEvent(p),ie.stopPropagation&&e.stopEvent(p)}function Ee(g,p){var x,E,D=p.changedTouches.length,M;x=e.now();var W={originalEvent:p,eventType:"pointerup",pointerType:"touch",isEmulated:!1};for(_(g,W),E=0;E<D;E++)M={id:p.changedTouches[E].identifier,type:"touch",currentPos:T(p.changedTouches[E]),currentTime:x},te(g,W,M,0),C(g,M,!1),I(g,W,M);W.preventDefault&&!W.defaultPrevented&&e.cancelEvent(p),W.stopPropagation&&e.stopEvent(p)}function xe(g,p){var x,E,D=p.changedTouches.length,M;x=e.now();var W={originalEvent:p,eventType:"pointermove",pointerType:"touch",isEmulated:!1};for(_(g,W),E=0;E<D;E++)M={id:p.changedTouches[E].identifier,type:"touch",currentPos:T(p.changedTouches[E]),currentTime:x},ae(g,W,M);W.preventDefault&&!W.defaultPrevented&&e.cancelEvent(p),W.stopPropagation&&e.stopEvent(p)}function A(g,p){var x=p.changedTouches.length,E,D,M={originalEvent:p,eventType:"pointercancel",pointerType:"touch",isEmulated:!1};for(_(g,M),E=0;E<x;E++)D={id:p.changedTouches[E].identifier,type:"touch"},K(g,M,D);M.stopPropagation&&e.stopEvent(p)}function G(g,p){return e.eventIsCanceled(p)||p.preventDefault(),!1}function Z(g,p){return e.eventIsCanceled(p)||p.preventDefault(),!1}function se(g,p){var x={originalEvent:p,eventType:"gotpointercapture",pointerType:m(p),isEmulated:!1};_(g,x),p.target===g.element&&C(g,{id:p.pointerId,type:m(p)},!0),x.stopPropagation&&e.stopEvent(p)}function pe(g,p){var x={originalEvent:p,eventType:"lostpointercapture",pointerType:m(p),isEmulated:!1};_(g,x),p.target===g.element&&C(g,{id:p.pointerId,type:m(p)},!1),x.stopPropagation&&e.stopEvent(p)}function Q(g,p){var x={id:d(p),type:m(p),isPrimary:y(p),currentPos:T(p),currentTime:e.now()},E={originalEvent:p,eventType:"pointerenter",pointerType:x.type,isEmulated:!1};_(g,E),O(g,E,x)}function Je(g,p){var x={id:d(p),type:m(p),isPrimary:y(p),currentPos:T(p),currentTime:e.now()},E={originalEvent:p,eventType:"pointerleave",pointerType:x.type,isEmulated:!1};_(g,E),I(g,E,x)}function kt(g,p){var x={id:d(p),type:m(p),isPrimary:y(p),currentPos:T(p),currentTime:e.now()},E={originalEvent:p,eventType:"pointerover",pointerType:x.type,isEmulated:!1};_(g,E),b(g,E,x),E.preventDefault&&!E.defaultPrevented&&e.cancelEvent(p),E.stopPropagation&&e.stopEvent(p)}function $e(g,p){var x={id:d(p),type:m(p),isPrimary:y(p),currentPos:T(p),currentTime:e.now()},E={originalEvent:p,eventType:"pointerout",pointerType:x.type,isEmulated:!1};_(g,E),L(g,E,x),E.preventDefault&&!E.defaultPrevented&&e.cancelEvent(p),E.stopPropagation&&e.stopEvent(p)}function st(g,p){var x={id:d(p),type:m(p),isPrimary:y(p),currentPos:T(p),currentTime:e.now()},E=e.MouseTracker.havePointerEvents&&x.type==="touch",D={originalEvent:p,eventType:"pointerdown",pointerType:x.type,isEmulated:!1};_(g,D),Y(g,D,x,p.button),D.preventDefault&&!D.defaultPrevented&&e.cancelEvent(p),D.stopPropagation&&e.stopEvent(p),D.shouldCapture&&(E?C(g,x,!0):c(g,x))}function On(g,p){zn(g,p)}function Kr(g,p){var x=g.getActivePointersListByType(m(p));x.getById(p.pointerId)&&zn(g,p),e.stopEvent(p)}function zn(g,p){var x;x={id:d(p),type:m(p),isPrimary:y(p),currentPos:T(p),currentTime:e.now()};var E={originalEvent:p,eventType:"pointerup",pointerType:x.type,isEmulated:!1};_(g,E),te(g,E,x,p.button),E.preventDefault&&!E.defaultPrevented&&e.cancelEvent(p),E.stopPropagation&&e.stopEvent(p),E.shouldReleaseCapture&&(p.target===g.element?h(g,x):C(g,x,!1))}function Mn(g,p){Nn(g,p)}function Jr(g,p){var x=g.getActivePointersListByType(m(p));x.getById(p.pointerId)&&Nn(g,p),e.stopEvent(p)}function Nn(g,p){var x={id:d(p),type:m(p),isPrimary:y(p),currentPos:T(p),currentTime:e.now()},E={originalEvent:p,eventType:"pointermove",pointerType:x.type,isEmulated:!1};_(g,E),ae(g,E,x),E.preventDefault&&!E.defaultPrevented&&e.cancelEvent(p),E.stopPropagation&&e.stopEvent(p)}function $r(g,p){var x={id:p.pointerId,type:m(p)},E={originalEvent:p,eventType:"pointercancel",pointerType:x.type,isEmulated:!1};_(g,E),K(g,E,x),E.stopPropagation&&e.stopEvent(p)}function Ui(g,p){return p.speed=0,p.direction=0,p.contactPos=p.currentPos,p.contactTime=p.currentTime,p.lastPos=p.currentPos,p.lastTime=p.currentTime,g.add(p)}function ci(g,p,x){var E,D=p.getById(x.id);return D?(D.captured&&(e.console.warn("stopTrackingPointer() called on captured pointer"),h(g,D)),p.removeContact(),E=p.removeById(x.id)):E=p.getLength(),E}function f(g,p){switch(p.eventType){case"pointermove":p.isStoppable=!0,p.isCancelable=!0,p.preventDefault=!1,p.preventGesture=!g.hasGestureHandlers,p.stopPropagation=!1;break;case"pointerover":case"pointerout":case"contextmenu":case"keydown":case"keyup":case"keypress":p.isStoppable=!0,p.isCancelable=!0,p.preventDefault=!1,p.preventGesture=!1,p.stopPropagation=!1;break;case"pointerdown":p.isStoppable=!0,p.isCancelable=!0,p.preventDefault=!1,p.preventGesture=!g.hasGestureHandlers,p.stopPropagation=!1;break;case"pointerup":p.isStoppable=!0,p.isCancelable=!0,p.preventDefault=!1,p.preventGesture=!g.hasGestureHandlers,p.stopPropagation=!1;break;case"wheel":p.isStoppable=!0,p.isCancelable=!0,p.preventDefault=!1,p.preventGesture=!g.hasScrollHandler,p.stopPropagation=!1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":p.isStoppable=!0,p.isCancelable=!1,p.preventDefault=!1,p.preventGesture=!1,p.stopPropagation=!1;break;case"click":p.isStoppable=!0,p.isCancelable=!0,p.preventDefault=!!g.clickHandler,p.preventGesture=!1,p.stopPropagation=!1;break;case"dblclick":p.isStoppable=!0,p.isCancelable=!0,p.preventDefault=!!g.dblClickHandler,p.preventGesture=!1,p.stopPropagation=!1;break;case"focus":case"blur":case"pointerenter":case"pointerleave":default:p.isStoppable=!1,p.isCancelable=!1,p.preventDefault=!1,p.preventGesture=!1,p.stopPropagation=!1;break}}function _(g,p){p.eventSource=g,p.eventPhase=p.originalEvent&&typeof p.originalEvent.eventPhase<"u"?p.originalEvent.eventPhase:0,p.defaultPrevented=e.eventIsCanceled(p.originalEvent),p.shouldCapture=!1,p.shouldReleaseCapture=!1,p.userData=g.userData,f(g,p),g.preProcessEventHandler&&g.preProcessEventHandler(p)}function C(g,p,x){var E=g.getActivePointersListByType(p.type),D=E.getById(p.id);D?x&&!D.captured?(D.captured=!0,E.captureCount++):!x&&D.captured&&(D.captured=!1,E.captureCount--,E.captureCount<0&&(E.captureCount=0,e.console.warn("updatePointerCaptured() - pointsList.captureCount went negative"))):e.console.warn("updatePointerCaptured() called on untracked pointer")}function O(g,p,x){var E=g.getActivePointersListByType(x.type),D;D=E.getById(x.id),D?(D.insideElement=!0,D.lastPos=D.currentPos,D.lastTime=D.currentTime,D.currentPos=x.currentPos,D.currentTime=x.currentTime,x=D):(x.captured=!1,x.insideElementPressed=!1,x.insideElement=!0,Ui(E,x)),g.enterHandler&&g.enterHandler({eventSource:g,pointerType:x.type,position:v(x.currentPos,g.element),buttons:E.buttons,pointers:g.getActivePointerCount(),insideElementPressed:x.insideElementPressed,buttonDownAny:E.buttons!==0,isTouchEvent:x.type==="touch",originalEvent:p.originalEvent,userData:g.userData})}function I(g,p,x){var E=g.getActivePointersListByType(x.type),D,M;D=E.getById(x.id),D?(D.captured?(D.insideElement=!1,D.lastPos=D.currentPos,D.lastTime=D.currentTime,D.currentPos=x.currentPos,D.currentTime=x.currentTime):ci(g,E,D),x=D):(x.captured=!1,x.insideElementPressed=!1),(g.leaveHandler||g.exitHandler)&&(M={eventSource:g,pointerType:x.type,position:x.currentPos&&v(x.currentPos,g.element),buttons:E.buttons,pointers:g.getActivePointerCount(),insideElementPressed:x.insideElementPressed,buttonDownAny:E.buttons!==0,isTouchEvent:x.type==="touch",originalEvent:p.originalEvent,userData:g.userData},g.leaveHandler&&g.leaveHandler(M),g.exitHandler&&g.exitHandler(M))}function b(g,p,x){var E,D;E=g.getActivePointersListByType(x.type),D=E.getById(x.id),D?x=D:(x.captured=!1,x.insideElementPressed=!1),g.overHandler&&g.overHandler({eventSource:g,pointerType:x.type,position:v(x.currentPos,g.element),buttons:E.buttons,pointers:g.getActivePointerCount(),insideElementPressed:x.insideElementPressed,buttonDownAny:E.buttons!==0,isTouchEvent:x.type==="touch",originalEvent:p.originalEvent,userData:g.userData})}function L(g,p,x){var E,D;E=g.getActivePointersListByType(x.type),D=E.getById(x.id),D?x=D:(x.captured=!1,x.insideElementPressed=!1),g.outHandler&&g.outHandler({eventSource:g,pointerType:x.type,position:x.currentPos&&v(x.currentPos,g.element),buttons:E.buttons,pointers:g.getActivePointerCount(),insideElementPressed:x.insideElementPressed,buttonDownAny:E.buttons!==0,isTouchEvent:x.type==="touch",originalEvent:p.originalEvent,userData:g.userData})}function Y(g,p,x,E){var D=n[g.hash],M=g.getActivePointersListByType(x.type),W;if(typeof p.originalEvent.buttons<"u"?M.buttons=p.originalEvent.buttons:E===0?M.buttons|=1:E===1?M.buttons|=4:E===2?M.buttons|=2:E===3?M.buttons|=8:E===4?M.buttons|=16:E===5&&(M.buttons|=32),E!==0){p.shouldCapture=!1,p.shouldReleaseCapture=!1,g.nonPrimaryPressHandler&&!p.preventGesture&&!p.defaultPrevented&&(p.preventDefault=!0,g.nonPrimaryPressHandler({eventSource:g,pointerType:x.type,position:v(x.currentPos,g.element),button:E,buttons:M.buttons,isTouchEvent:x.type==="touch",originalEvent:p.originalEvent,userData:g.userData}));return}W=M.getById(x.id),W?(W.insideElementPressed=!0,W.insideElement=!0,W.originalTarget=p.originalEvent.target,W.contactPos=x.currentPos,W.contactTime=x.currentTime,W.lastPos=W.currentPos,W.lastTime=W.currentTime,W.currentPos=x.currentPos,W.currentTime=x.currentTime,x=W):(x.captured=!1,x.insideElementPressed=!0,x.insideElement=!0,x.originalTarget=p.originalEvent.target,Ui(M,x)),M.addContact(),!p.preventGesture&&!p.defaultPrevented?(p.shouldCapture=!0,p.shouldReleaseCapture=!1,p.preventDefault=!0,(g.dragHandler||g.dragEndHandler||g.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.addPoint(g,x),M.contacts===1?g.pressHandler&&!p.preventGesture&&g.pressHandler({eventSource:g,pointerType:x.type,position:v(x.contactPos,g.element),buttons:M.buttons,isTouchEvent:x.type==="touch",originalEvent:p.originalEvent,userData:g.userData}):M.contacts===2&&g.pinchHandler&&x.type==="touch"&&(D.pinchGPoints=M.asArray(),D.lastPinchDist=D.currentPinchDist=D.pinchGPoints[0].currentPos.distanceTo(D.pinchGPoints[1].currentPos),D.lastPinchCenter=D.currentPinchCenter=w(D.pinchGPoints[0].currentPos,D.pinchGPoints[1].currentPos))):(p.shouldCapture=!1,p.shouldReleaseCapture=!1)}function te(g,p,x,E){var D=n[g.hash],M=g.getActivePointersListByType(x.type),W,ie,V,Ge=!1,Ce;if(typeof p.originalEvent.buttons<"u"?M.buttons=p.originalEvent.buttons:E===0?M.buttons^=-2:E===1?M.buttons^=-5:E===2?M.buttons^=-3:E===3?M.buttons^=-9:E===4?M.buttons^=-17:E===5&&(M.buttons^=-33),p.shouldCapture=!1,E!==0){p.shouldReleaseCapture=!1,g.nonPrimaryReleaseHandler&&!p.preventGesture&&!p.defaultPrevented&&(p.preventDefault=!0,g.nonPrimaryReleaseHandler({eventSource:g,pointerType:x.type,position:v(x.currentPos,g.element),button:E,buttons:M.buttons,isTouchEvent:x.type==="touch",originalEvent:p.originalEvent,userData:g.userData}));return}V=M.getById(x.id),V?(M.removeContact(),V.captured&&(Ge=!0),V.lastPos=V.currentPos,V.lastTime=V.currentTime,V.currentPos=x.currentPos,V.currentTime=x.currentTime,V.insideElement||ci(g,M,V),W=V.currentPos,ie=V.currentTime):(x.captured=!1,x.insideElementPressed=!1,x.insideElement=!0,Ui(M,x),V=x),!p.preventGesture&&!p.defaultPrevented&&(Ge?(p.shouldReleaseCapture=!0,p.preventDefault=!0,(g.dragHandler||g.dragEndHandler||g.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.removePoint(g,V),M.contacts===0?(g.releaseHandler&&W&&g.releaseHandler({eventSource:g,pointerType:V.type,position:v(W,g.element),buttons:M.buttons,insideElementPressed:V.insideElementPressed,insideElementReleased:V.insideElement,isTouchEvent:V.type==="touch",originalEvent:p.originalEvent,userData:g.userData}),g.dragEndHandler&&D.sentDragEvent&&g.dragEndHandler({eventSource:g,pointerType:V.type,position:v(V.currentPos,g.element),speed:V.speed,direction:V.direction,shift:p.originalEvent.shiftKey,isTouchEvent:V.type==="touch",originalEvent:p.originalEvent,userData:g.userData}),D.sentDragEvent=!1,(g.clickHandler||g.dblClickHandler)&&V.insideElement&&(Ce=ie-V.contactTime<=g.clickTimeThreshold&&V.contactPos.distanceTo(W)<=g.clickDistThreshold,g.clickHandler&&g.clickHandler({eventSource:g,pointerType:V.type,position:v(V.currentPos,g.element),quick:Ce,shift:p.originalEvent.shiftKey,isTouchEvent:V.type==="touch",originalEvent:p.originalEvent,originalTarget:V.originalTarget,userData:g.userData}),g.dblClickHandler&&Ce&&(M.clicks++,M.clicks===1?(D.lastClickPos=W,D.dblClickTimeOut=setTimeout(function(){M.clicks=0},g.dblClickTimeThreshold)):M.clicks===2&&(clearTimeout(D.dblClickTimeOut),M.clicks=0,D.lastClickPos.distanceTo(W)<=g.dblClickDistThreshold&&g.dblClickHandler({eventSource:g,pointerType:V.type,position:v(V.currentPos,g.element),shift:p.originalEvent.shiftKey,isTouchEvent:V.type==="touch",originalEvent:p.originalEvent,userData:g.userData}),D.lastClickPos=null)))):M.contacts===2&&g.pinchHandler&&V.type==="touch"&&(D.pinchGPoints=M.asArray(),D.lastPinchDist=D.currentPinchDist=D.pinchGPoints[0].currentPos.distanceTo(D.pinchGPoints[1].currentPos),D.lastPinchCenter=D.currentPinchCenter=w(D.pinchGPoints[0].currentPos,D.pinchGPoints[1].currentPos))):(p.shouldReleaseCapture=!1,g.releaseHandler&&W&&(g.releaseHandler({eventSource:g,pointerType:V.type,position:v(W,g.element),buttons:M.buttons,insideElementPressed:V.insideElementPressed,insideElementReleased:V.insideElement,isTouchEvent:V.type==="touch",originalEvent:p.originalEvent,userData:g.userData}),p.preventDefault=!0)))}function ae(g,p,x){var E=n[g.hash],D=g.getActivePointersListByType(x.type),M,W,ie;if(typeof p.originalEvent.buttons<"u"&&(D.buttons=p.originalEvent.buttons),M=D.getById(x.id),M)M.lastPos=M.currentPos,M.lastTime=M.currentTime,M.currentPos=x.currentPos,M.currentTime=x.currentTime;else return;p.shouldCapture=!1,p.shouldReleaseCapture=!1,g.stopHandler&&x.type==="mouse"&&(clearTimeout(g.stopTimeOut),g.stopTimeOut=setTimeout(function(){me(g,p.originalEvent,x.type)},g.stopDelay)),D.contacts===0?g.moveHandler&&g.moveHandler({eventSource:g,pointerType:x.type,position:v(x.currentPos,g.element),buttons:D.buttons,isTouchEvent:x.type==="touch",originalEvent:p.originalEvent,userData:g.userData}):D.contacts===1?(g.moveHandler&&(M=D.asArray()[0],g.moveHandler({eventSource:g,pointerType:M.type,position:v(M.currentPos,g.element),buttons:D.buttons,isTouchEvent:M.type==="touch",originalEvent:p.originalEvent,userData:g.userData})),g.dragHandler&&!p.preventGesture&&!p.defaultPrevented&&(M=D.asArray()[0],ie=M.currentPos.minus(M.lastPos),g.dragHandler({eventSource:g,pointerType:M.type,position:v(M.currentPos,g.element),buttons:D.buttons,delta:ie,speed:M.speed,direction:M.direction,shift:p.originalEvent.shiftKey,isTouchEvent:M.type==="touch",originalEvent:p.originalEvent,userData:g.userData}),p.preventDefault=!0,E.sentDragEvent=!0)):D.contacts===2&&(g.moveHandler&&(W=D.asArray(),g.moveHandler({eventSource:g,pointerType:W[0].type,position:v(w(W[0].currentPos,W[1].currentPos),g.element),buttons:D.buttons,isTouchEvent:W[0].type==="touch",originalEvent:p.originalEvent,userData:g.userData})),g.pinchHandler&&x.type==="touch"&&!p.preventGesture&&!p.defaultPrevented&&(ie=E.pinchGPoints[0].currentPos.distanceTo(E.pinchGPoints[1].currentPos),ie!==E.currentPinchDist&&(E.lastPinchDist=E.currentPinchDist,E.currentPinchDist=ie,E.lastPinchCenter=E.currentPinchCenter,E.currentPinchCenter=w(E.pinchGPoints[0].currentPos,E.pinchGPoints[1].currentPos),g.pinchHandler({eventSource:g,pointerType:"touch",gesturePoints:E.pinchGPoints,lastCenter:v(E.lastPinchCenter,g.element),center:v(E.currentPinchCenter,g.element),lastDistance:E.lastPinchDist,distance:E.currentPinchDist,shift:p.originalEvent.shiftKey,originalEvent:p.originalEvent,userData:g.userData}),p.preventDefault=!0)))}function K(g,p,x){var E=g.getActivePointersListByType(x.type),D;D=E.getById(x.id),D&&ci(g,E,D)}function me(g,p,x){g.stopHandler&&g.stopHandler({eventSource:g,pointerType:x,position:P(p,g.element),buttons:g.getActivePointersListByType(x).buttons,isTouchEvent:x==="touch",originalEvent:p,userData:g.userData})}}(i),function(e){e.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},e.Control=function(n,r,o){var s=n.parentNode;typeof r=="number"&&(e.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),r={anchor:r}),r.attachToViewer=typeof r.attachToViewer>"u"?!0:r.attachToViewer,this.autoFade=typeof r.autoFade>"u"?!0:r.autoFade,this.element=n,this.anchor=r.anchor,this.container=o,this.anchor===e.ControlAnchor.ABSOLUTE?(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top=typeof r.top=="number"?r.top+"px":r.top,this.wrapper.style.left=typeof r.left=="number"?r.left+"px":r.left,this.wrapper.style.height=typeof r.height=="number"?r.height+"px":r.height,this.wrapper.style.width=typeof r.width=="number"?r.width+"px":r.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor===e.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),r.attachToViewer?this.anchor===e.ControlAnchor.TOP_RIGHT||this.anchor===e.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):s.appendChild(this.wrapper)},e.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.anchor!==e.ControlAnchor.NONE&&this.container.removeChild(this.wrapper)},isVisible:function(){return this.wrapper.style.display!=="none"},setVisible:function(n){this.wrapper.style.display=n?this.anchor===e.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(n){e.setElementOpacity(this.wrapper,n,!0)}}}(i),function(e){e.ControlDock=function(r){var o=["topleft","topright","bottomright","bottomleft"],s,l;for(e.extend(!0,this,{id:"controldock-"+e.now()+"-"+Math.floor(Math.random()*1e6),container:e.makeNeutralElement("div"),controls:[]},r),this.container.onsubmit=function(){return!1},this.element&&(this.element=e.getElement(this.element),this.element.appendChild(this.container),e.getElementStyle(this.element).position==="static"&&(this.element.style.position="relative"),this.container.style.width="100%",this.container.style.height="100%"),l=0;l<o.length;l++)s=o[l],this.controls[s]=e.makeNeutralElement("div"),this.controls[s].style.position="absolute",s.match("left")&&(this.controls[s].style.left="0px"),s.match("right")&&(this.controls[s].style.right="0px"),s.match("top")&&(this.controls[s].style.top="0px"),s.match("bottom")&&(this.controls[s].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},e.ControlDock.prototype={addControl:function(r,o){r=e.getElement(r);var s=null;if(!(n(this,r)>=0)){switch(o.anchor){case e.ControlAnchor.TOP_RIGHT:s=this.controls.topright,r.style.position="relative",r.style.paddingRight="0px",r.style.paddingTop="0px";break;case e.ControlAnchor.BOTTOM_RIGHT:s=this.controls.bottomright,r.style.position="relative",r.style.paddingRight="0px",r.style.paddingBottom="0px";break;case e.ControlAnchor.BOTTOM_LEFT:s=this.controls.bottomleft,r.style.position="relative",r.style.paddingLeft="0px",r.style.paddingBottom="0px";break;case e.ControlAnchor.TOP_LEFT:s=this.controls.topleft,r.style.position="relative",r.style.paddingLeft="0px",r.style.paddingTop="0px";break;case e.ControlAnchor.ABSOLUTE:s=this.container,r.style.margin="0px",r.style.padding="0px";break;default:case e.ControlAnchor.NONE:s=this.container,r.style.margin="0px",r.style.padding="0px";break}this.controls.push(new e.Control(r,o,s)),r.style.display="inline-block"}},removeControl:function(r){r=e.getElement(r);var o=n(this,r);return o>=0&&(this.controls[o].destroy(),this.controls.splice(o,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var r;for(r=this.controls.length-1;r>=0;r--)if(this.controls[r].isVisible())return!0;return!1},setControlsEnabled:function(r){var o;for(o=this.controls.length-1;o>=0;o--)this.controls[o].setVisible(r);return this}};function n(r,o){var s=r.controls,l;for(l=s.length-1;l>=0;l--)if(s[l].element===o)return l;return-1}}(i),function(e){e.Placement=e.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})}(i),function(e){var n={},r=1;e.Viewer=function(f){var _=arguments,C=this,O;e.isPlainObject(f)||(f={id:_[0],xmlPath:_.length>1?_[1]:void 0,prefixUrl:_.length>2?_[2]:void 0,controls:_.length>3?_[3]:void 0,overlays:_.length>4?_[4]:void 0}),f.config&&(e.extend(!0,f,f.config),delete f.config);let I=["useCanvas"];if(f.drawerOptions=Object.assign({},I.reduce((L,Y)=>(L[Y]=f[Y],delete f[Y],L),{}),f.drawerOptions),e.extend(!0,this,{id:f.id,hash:f.hash||r++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttonGroup:null,profiler:null},e.DEFAULT_SETTINGS,f),typeof this.hash>"u")throw new Error("A hash must be defined, either by specifying options.id or options.hash.");typeof n[this.hash]<"u"&&e.console.warn("Hash "+this.hash+" has already been used."),n[this.hash]={fsBoundsDelta:new e.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,needsResize:!1,forceResize:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null,lastClickTime:null,draggingToZoom:!1},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._updatePixelDensityRatioBind=null,this._lastScrollTime=e.now(),e.EventSource.call(this),this.addHandler("open-failed",function(L){var Y=e.getString("Errors.OpenFailed",L.eventSource,L.message);C._showMessage(Y)}),e.ControlDock.call(this,f),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=e.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",function(L){L.width="100%",L.height="100%",L.overflow="hidden",L.position="absolute",L.top="0px",L.left="0px"}(this.canvas.style),e.setElementTouchActionNone(this.canvas),f.tabIndex!==""&&(this.canvas.tabIndex=f.tabIndex===void 0?0:f.tabIndex),this.container.className="openseadragon-container",function(L){L.width="100%",L.height="100%",L.position="relative",L.overflow="hidden",L.left="0px",L.top="0px",L.textAlign="left"}(this.container.style),e.setElementTouchActionNone(this.container),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new e.MouseTracker({userData:"Viewer.innerTracker",element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,contextMenuHandler:e.delegate(this,P),keyDownHandler:e.delegate(this,v),keyHandler:e.delegate(this,w),clickHandler:e.delegate(this,S),dblClickHandler:e.delegate(this,R),dragHandler:e.delegate(this,k),dragEndHandler:e.delegate(this,F),enterHandler:e.delegate(this,N),leaveHandler:e.delegate(this,B),pressHandler:e.delegate(this,j),releaseHandler:e.delegate(this,U),nonPrimaryPressHandler:e.delegate(this,X),nonPrimaryReleaseHandler:e.delegate(this,q),scrollHandler:e.delegate(this,Ee),pinchHandler:e.delegate(this,re),focusHandler:e.delegate(this,we),blurHandler:e.delegate(this,Te)}),this.outerTracker=new e.MouseTracker({userData:"Viewer.outerTracker",element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:e.delegate(this,xe),leaveHandler:e.delegate(this,A)}),this.toolbar&&(this.toolbar=new e.ControlDock({element:this.toolbar})),this.bindStandardControls(),n[this.hash].prevContainerSize=o(this.container),window.ResizeObserver?(this._autoResizePolling=!1,this._resizeObserver=new ResizeObserver(function(){n[C.hash].needsResize=!0}),this._resizeObserver.observe(this.container,{})):this._autoResizePolling=!0,this.world=new e.World({viewer:this}),this.world.addHandler("add-item",function(L){C.source=C.world.getItemAt(0).source,n[C.hash].forceRedraw=!0,C._updateRequestId||(C._updateRequestId=u(C,G))}),this.world.addHandler("remove-item",function(L){C.world.getItemCount()?C.source=C.world.getItemAt(0).source:C.source=null,n[C.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function(L){C.viewport&&C.viewport._setContentBounds(C.world.getHomeBounds(),C.world.getContentFactor())}),this.world.addHandler("item-index-change",function(L){C.source=C.world.getItemAt(0).source}),this.viewport=new e.Viewport({containerSize:n[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,overlayPreserveContentDirection:this.overlayPreserveContentDirection,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins,silenceMultiImageWarnings:this.silenceMultiImageWarnings}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new e.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:f.timeout,tileRetryMax:this.tileRetryMax,tileRetryDelay:this.tileRetryDelay}),this.tileCache=new e.TileCache({maxImageCacheCount:this.maxImageCacheCount}),Object.prototype.hasOwnProperty.call(this.drawerOptions,"useCanvas")&&(e.console.error('useCanvas is deprecated, use the "drawer" option to indicate preferred drawer(s)'),this.drawerOptions.useCanvas||(this.drawer=e.HTMLDrawer),delete this.drawerOptions.useCanvas);let b=Array.isArray(this.drawer)?this.drawer:[this.drawer];b.length===0&&(b=[e.DEFAULT_SETTINGS.drawer].flat(),e.console.warn("No valid drawers were selected. Using the default value.")),this.drawer=null;for(const L of b)if(this.requestDrawer(L,{mainDrawer:!0,redrawImmediately:!1}))break;if(!this.drawer)throw e.console.error("No drawer could be created!"),"Error with creating the selected drawer(s)";for(this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled),this.overlaysContainer=e.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(O=this.buttonGroup.buttons.indexOf(this.rotateLeft),this.buttonGroup.buttons.splice(O,1),this.buttonGroup.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(O=this.buttonGroup.buttons.indexOf(this.rotateRight),this.buttonGroup.buttons.splice(O,1),this.buttonGroup.element.removeChild(this.rotateRight.element))),this._addUpdatePixelDensityRatioEvent(),this.showNavigator&&(this.navigator=new e.Navigator({element:this.navigatorElement,id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy,animationTime:this.animationTime,drawer:this.drawer.getType(),loadTilesWithAjax:this.loadTilesWithAjax,ajaxHeaders:this.ajaxHeaders,ajaxWithCredentials:this.ajaxWithCredentials})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),O=0;O<this.customControls.length;O++)this.addControl(this.customControls[O].id,{anchor:this.customControls[O].anchor});e.requestAnimationFrame(function(){h(C)}),e._viewers.set(this.element,this)},e.extend(e.Viewer.prototype,e.EventSource.prototype,e.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(f){return e.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(f)},openTileSource:function(f){return e.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(f)},get buttons(){return e.console.warn("Viewer.buttons is deprecated; Please use Viewer.buttonGroup"),this.buttonGroup},open:function(f,_){var C=this;if(this.close(),!f)return this;if(this.sequenceMode&&e.isArray(f))return this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),typeof _<"u"&&!isNaN(_)&&(this.initialPage=_),this.tileSources=f,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),this._updateSequenceButtons(this._sequenceIndex),this;if(e.isArray(f)||(f=[f]),!f.length)return this;this._opening=!0;for(var O=f.length,I=0,b=0,L,Y=function(){if(I+b===O)if(I){(C._firstOpen||!C.preserveViewport)&&(C.viewport.goHome(!0),C.viewport.update()),C._firstOpen=!1;var K=f[0];if(K.tileSource&&(K=K.tileSource),C.overlays&&!C.preserveOverlays)for(var me=0;me<C.overlays.length;me++)C.currentOverlays[me]=l(C,C.overlays[me]);C._drawOverlays(),C._opening=!1,C.raiseEvent("open",{source:K})}else C._opening=!1,C.raiseEvent("open-failed",L)},te=function(K){(!e.isPlainObject(K)||!K.tileSource)&&(K={tileSource:K}),K.index!==void 0&&(e.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete K.index),K.collectionImmediately===void 0&&(K.collectionImmediately=!0);var me=K.success;K.success=function(p){if(I++,K.tileSource.overlays)for(var x=0;x<K.tileSource.overlays.length;x++)C.addOverlay(K.tileSource.overlays[x]);me&&me(p),Y()};var g=K.error;K.error=function(p){b++,L||(L=p),g&&g(p),Y()},C.addTiledImage(K)},ae=0;ae<f.length;ae++)te(f[ae]);return this},close:function(){return n[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),n[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(n[this.hash]){if(this.raiseEvent("before-destroy"),this._removeUpdatePixelDensityRatioEvent(),this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this._resizeObserver&&this._resizeObserver.disconnect(),this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),this._updateRequestId!==null&&(e.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.navigator&&(this.navigator.destroy(),n[this.navigator.hash]=null,delete n[this.navigator.hash],this.navigator=null),this.buttonGroup)this.buttonGroup.destroy();else if(this.customButtons)for(;this.customButtons.length;)this.customButtons.pop().destroy();if(this.paging&&this.paging.destroy(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.container.onsubmit=null,this.clearControls(),this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),n[this.hash]=null,delete n[this.hash],this.canvas=null,this.container=null,e._viewers.delete(this.element),this.element=null,this.raiseEvent("destroy"),this.removeAllHandlers()}},requestDrawer(f,_){const C={mainDrawer:!0,redrawImmediately:!0,drawerOptions:null};_=e.extend(!0,C,_);const O=_.mainDrawer,I=_.redrawImmediately,b=_.drawerOptions,L=this.drawer;let Y=null;if(f&&f.prototype instanceof e.DrawerBase?(Y=f,f="custom"):typeof f=="string"&&(Y=e.determineDrawer(f)),Y||e.console.warn("Unsupported drawer! Drawer must be an existing string type, or a class that extends OpenSeadragon.DrawerBase."),Y&&Y.isSupported()){L&&O&&L.destroy();const te=new Y({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor,options:b||this.drawerOptions[f]});return O&&(this.drawer=te,I&&this.forceRedraw()),te}return!1},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(f){return this.innerTracker.setTracking(f),this.outerTracker.setTracking(f),this.raiseEvent("mouse-enabled",{enabled:f}),this},areControlsEnabled:function(){var f=this.controls.length,_;for(_=0;_<this.controls.length;_++)f=f&&this.controls[_].isVisible();return f},setControlsEnabled:function(f){return f?m(this):h(this),this.raiseEvent("controls-enabled",{enabled:f}),this},setDebugMode:function(f){for(var _=0;_<this.world.getItemCount();_++)this.world.getItemAt(_).debugMode=f;this.debugMode=f,this.forceRedraw()},setAjaxHeaders:function(f,_){if(f===null&&(f={}),!e.isPlainObject(f)){console.error("[Viewer.setAjaxHeaders] Ignoring invalid headers, must be a plain object");return}if(_===void 0&&(_=!0),this.ajaxHeaders=f,_){for(var C=0;C<this.world.getItemCount();C++)this.world.getItemAt(C)._updateAjaxHeaders(!0);if(this.navigator&&this.navigator.setAjaxHeaders(this.ajaxHeaders,!0),this.referenceStrip&&this.referenceStrip.miniViewers)for(var O in this.referenceStrip.miniViewers)this.referenceStrip.miniViewers[O].setAjaxHeaders(this.ajaxHeaders,!0)}},addButton:function(f){this.buttonGroup.addButton(f)},isFullPage:function(){return n[this.hash]&&n[this.hash].fullPage},setFullPage:function(f){var _=document.body,C=_.style,O=document.documentElement.style,I=this,b,L;if(f===this.isFullPage())return this;var Y={fullPage:f,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",Y),Y.preventDefaultAction)return this;if(f&&this.element){for(this.elementSize=e.getElementSize(this.element),this.pageScroll=e.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=C.margin,this.docMargin=O.margin,C.margin="0",O.margin="0",this.bodyPadding=C.padding,this.docPadding=O.padding,C.padding="0",O.padding="0",this.bodyWidth=C.width,this.docWidth=O.width,C.width="100%",O.width="100%",this.bodyHeight=C.height,this.docHeight=O.height,C.height="100%",O.height="100%",this.bodyDisplay=C.display,C.display="block",this.previousBody=[],n[this.hash].prevElementParent=this.element.parentNode,n[this.hash].prevNextSibling=this.element.nextSibling,n[this.hash].prevElementWidth=this.element.style.width,n[this.hash].prevElementHeight=this.element.style.height,b=_.childNodes.length,L=0;L<b;L++)this.previousBody.push(_.childNodes[0]),_.removeChild(_.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,_.appendChild(this.toolbar.element),e.addClass(this.toolbar.element,"fullpage")),e.addClass(this.element,"fullpage"),_.appendChild(this.element),this.element.style.height="100vh",this.element.style.width="100vw",this.toolbar&&this.toolbar.element&&(this.element.style.height=e.getElementSize(this.element).y-e.getElementSize(this.toolbar.element).y+"px"),n[this.hash].fullPage=!0,e.delegate(this,xe)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,C.margin=this.bodyMargin,O.margin=this.docMargin,C.padding=this.bodyPadding,O.padding=this.docPadding,C.width=this.bodyWidth,O.width=this.docWidth,C.height=this.bodyHeight,O.height=this.docHeight,C.display=this.bodyDisplay,_.removeChild(this.element),b=this.previousBody.length,L=0;L<b;L++)_.appendChild(this.previousBody.shift());e.removeClass(this.element,"fullpage"),n[this.hash].prevElementParent.insertBefore(this.element,n[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(_.removeChild(this.toolbar.element),e.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=n[this.hash].prevElementWidth,this.element.style.height=n[this.hash].prevElementHeight;var te=0,ae=function(){e.setPageScroll(I.pageScroll);var K=e.getPageScroll();te++,te<10&&(K.x!==I.pageScroll.x||K.y!==I.pageScroll.y)&&e.requestAnimationFrame(ae)};e.requestAnimationFrame(ae),n[this.hash].fullPage=!1,e.delegate(this,A)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:f}),this},setFullScreen:function(f){var _=this;if(!e.supportsFullScreen)return this.setFullPage(f);if(e.isFullScreen()===f)return this;var C={fullScreen:f,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",C),C.preventDefaultAction)return this;if(f){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var O=function(){var I=e.isFullScreen();I||(e.removeEvent(document,e.fullScreenEventName,O),e.removeEvent(document,e.fullScreenErrorEventName,O),_.setFullPage(!1),_.isFullPage()&&(_.element.style.width=_.fullPageStyleWidth,_.element.style.height=_.fullPageStyleHeight)),_.navigator&&_.viewport&&setTimeout(function(){_.navigator.update(_.viewport)}),_.raiseEvent("full-screen",{fullScreen:I})};e.addEvent(document,e.fullScreenEventName,O),e.addEvent(document,e.fullScreenErrorEventName,O),e.requestFullScreen(document.body)}else e.exitFullScreen();return this},isVisible:function(){return this.container.style.visibility!=="hidden"},isFullScreen:function(){return e.isFullScreen()&&this.isFullPage()},setVisible:function(f){return this.container.style.visibility=f?"":"hidden",this.raiseEvent("visible",{visible:f}),this},addTiledImage:function(f){e.console.assert(f,"[Viewer.addTiledImage] options is required"),e.console.assert(f.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),e.console.assert(!f.replace||f.index>-1&&f.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var _=this;f.replace&&(f.replaceItem=_.world.getItemAt(f.index)),this._hideMessage(),f.placeholderFillStyle===void 0&&(f.placeholderFillStyle=this.placeholderFillStyle),f.opacity===void 0&&(f.opacity=this.opacity),f.preload===void 0&&(f.preload=this.preload),f.compositeOperation===void 0&&(f.compositeOperation=this.compositeOperation),f.crossOriginPolicy===void 0&&(f.crossOriginPolicy=f.tileSource.crossOriginPolicy!==void 0?f.tileSource.crossOriginPolicy:this.crossOriginPolicy),f.ajaxWithCredentials===void 0&&(f.ajaxWithCredentials=this.ajaxWithCredentials),f.loadTilesWithAjax===void 0&&(f.loadTilesWithAjax=this.loadTilesWithAjax),e.isPlainObject(f.ajaxHeaders)||(f.ajaxHeaders={});var C={options:f};function O(L){for(var Y=0;Y<_._loadQueue.length;Y++)if(_._loadQueue[Y]===C){_._loadQueue.splice(Y,1);break}_._loadQueue.length===0&&I(C),_.raiseEvent("add-item-failed",L),f.error&&f.error(L)}function I(L){_.collectionMode&&(_.world.arrange({immediately:L.options.collectionImmediately,rows:_.collectionRows,columns:_.collectionColumns,layout:_.collectionLayout,tileSize:_.collectionTileSize,tileMargin:_.collectionTileMargin}),_.world.setAutoRefigureSizes(!0))}if(e.isArray(f.tileSource)){setTimeout(function(){O({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:f.tileSource,options:f})});return}this._loadQueue.push(C);function b(){for(var L,Y,te;_._loadQueue.length&&(L=_._loadQueue[0],!!L.tileSource);){if(_._loadQueue.splice(0,1),L.options.replace){var ae=_.world.getIndexOfItem(L.options.replaceItem);ae!==-1&&(L.options.index=ae),_.world.removeItem(L.options.replaceItem)}Y=new e.TiledImage({viewer:_,source:L.tileSource,viewport:_.viewport,drawer:_.drawer,tileCache:_.tileCache,imageLoader:_.imageLoader,x:L.options.x,y:L.options.y,width:L.options.width,height:L.options.height,fitBounds:L.options.fitBounds,fitBoundsPlacement:L.options.fitBoundsPlacement,clip:L.options.clip,placeholderFillStyle:L.options.placeholderFillStyle,opacity:L.options.opacity,preload:L.options.preload,degrees:L.options.degrees,flipped:L.options.flipped,compositeOperation:L.options.compositeOperation,springStiffness:_.springStiffness,animationTime:_.animationTime,minZoomImageRatio:_.minZoomImageRatio,wrapHorizontal:_.wrapHorizontal,wrapVertical:_.wrapVertical,maxTilesPerFrame:_.maxTilesPerFrame,immediateRender:_.immediateRender,blendTime:_.blendTime,alwaysBlend:_.alwaysBlend,minPixelRatio:_.minPixelRatio,smoothTileEdgesMinZoom:_.smoothTileEdgesMinZoom,iOSDevice:_.iOSDevice,crossOriginPolicy:L.options.crossOriginPolicy,ajaxWithCredentials:L.options.ajaxWithCredentials,loadTilesWithAjax:L.options.loadTilesWithAjax,ajaxHeaders:L.options.ajaxHeaders,debugMode:_.debugMode,subPixelRoundingForTransparency:_.subPixelRoundingForTransparency}),_.collectionMode&&_.world.setAutoRefigureSizes(!1),_.navigator&&(te=e.extend({},L.options,{replace:!1,originalTiledImage:Y,tileSource:L.tileSource}),_.navigator.addTiledImage(te)),_.world.addItem(Y,{index:L.options.index}),_._loadQueue.length===0&&I(L),_.world.getItemCount()===1&&!_.preserveViewport&&_.viewport.goHome(!0),L.options.success&&L.options.success({item:Y})}}s(this,f.tileSource,f,function(L){C.tileSource=L,b()},function(L){L.options=f,O(L),b()})},addSimpleImage:function(f){e.console.assert(f,"[Viewer.addSimpleImage] options is required"),e.console.assert(f.url,"[Viewer.addSimpleImage] options.url is required");var _=e.extend({},f,{tileSource:{type:"image",url:f.url}});delete _.url,this.addTiledImage(_)},addLayer:function(f){var _=this;e.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var C=e.extend({},f,{success:function(O){_.raiseEvent("add-layer",{options:f,drawer:O.item})},error:function(O){_.raiseEvent("add-layer-failed",O)}});return this.addTiledImage(C),this},getLayerAtLevel:function(f){return e.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(f)},getLevelOfLayer:function(f){return e.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(f)},getLayersCount:function(){return e.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(f,_){return e.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(f,_)},removeLayer:function(f){return e.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(f)},forceRedraw:function(){return n[this.hash].forceRedraw=!0,this},forceResize:function(){n[this.hash].needsResize=!0,n[this.hash].forceResize=!0},bindSequenceControls:function(){var f=e.delegate(this,y),_=e.delegate(this,T),C=e.delegate(this,this.goToNextPage),O=e.delegate(this,this.goToPreviousPage),I=this.navImages,b=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(b=!1),this.previousButton=new e.Button({element:this.previousButton?e.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.PreviousPage"),srcRest:Q(this.prefixUrl,I.previous.REST),srcGroup:Q(this.prefixUrl,I.previous.GROUP),srcHover:Q(this.prefixUrl,I.previous.HOVER),srcDown:Q(this.prefixUrl,I.previous.DOWN),onRelease:O,onFocus:f,onBlur:_}),this.nextButton=new e.Button({element:this.nextButton?e.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.NextPage"),srcRest:Q(this.prefixUrl,I.next.REST),srcGroup:Q(this.prefixUrl,I.next.GROUP),srcHover:Q(this.prefixUrl,I.next.HOVER),srcDown:Q(this.prefixUrl,I.next.DOWN),onRelease:C,onFocus:f,onBlur:_}),this.navPrevNextWrap||this.previousButton.disable(),(!this.tileSources||!this.tileSources.length)&&this.nextButton.disable(),b&&(this.paging=new e.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:e.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||e.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var f=e.delegate(this,Je),_=e.delegate(this,$e),C=e.delegate(this,Kr),O=e.delegate(this,kt),I=e.delegate(this,zn),b=e.delegate(this,Jr),L=e.delegate(this,Nn),Y=e.delegate(this,$r),te=e.delegate(this,Ui),ae=e.delegate(this,ci),K=e.delegate(this,y),me=e.delegate(this,T),g=this.navImages,p=[],x=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(x=!1),this.showZoomControl&&(p.push(this.zoomInButton=new e.Button({element:this.zoomInButton?e.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomIn"),srcRest:Q(this.prefixUrl,g.zoomIn.REST),srcGroup:Q(this.prefixUrl,g.zoomIn.GROUP),srcHover:Q(this.prefixUrl,g.zoomIn.HOVER),srcDown:Q(this.prefixUrl,g.zoomIn.DOWN),onPress:f,onRelease:_,onClick:C,onEnter:f,onExit:_,onFocus:K,onBlur:me})),p.push(this.zoomOutButton=new e.Button({element:this.zoomOutButton?e.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomOut"),srcRest:Q(this.prefixUrl,g.zoomOut.REST),srcGroup:Q(this.prefixUrl,g.zoomOut.GROUP),srcHover:Q(this.prefixUrl,g.zoomOut.HOVER),srcDown:Q(this.prefixUrl,g.zoomOut.DOWN),onPress:O,onRelease:_,onClick:I,onEnter:O,onExit:_,onFocus:K,onBlur:me}))),this.showHomeControl&&p.push(this.homeButton=new e.Button({element:this.homeButton?e.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Home"),srcRest:Q(this.prefixUrl,g.home.REST),srcGroup:Q(this.prefixUrl,g.home.GROUP),srcHover:Q(this.prefixUrl,g.home.HOVER),srcDown:Q(this.prefixUrl,g.home.DOWN),onRelease:b,onFocus:K,onBlur:me})),this.showFullPageControl&&p.push(this.fullPageButton=new e.Button({element:this.fullPageButton?e.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.FullPage"),srcRest:Q(this.prefixUrl,g.fullpage.REST),srcGroup:Q(this.prefixUrl,g.fullpage.GROUP),srcHover:Q(this.prefixUrl,g.fullpage.HOVER),srcDown:Q(this.prefixUrl,g.fullpage.DOWN),onRelease:L,onFocus:K,onBlur:me})),this.showRotationControl&&(p.push(this.rotateLeftButton=new e.Button({element:this.rotateLeftButton?e.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateLeft"),srcRest:Q(this.prefixUrl,g.rotateleft.REST),srcGroup:Q(this.prefixUrl,g.rotateleft.GROUP),srcHover:Q(this.prefixUrl,g.rotateleft.HOVER),srcDown:Q(this.prefixUrl,g.rotateleft.DOWN),onRelease:Y,onFocus:K,onBlur:me})),p.push(this.rotateRightButton=new e.Button({element:this.rotateRightButton?e.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateRight"),srcRest:Q(this.prefixUrl,g.rotateright.REST),srcGroup:Q(this.prefixUrl,g.rotateright.GROUP),srcHover:Q(this.prefixUrl,g.rotateright.HOVER),srcDown:Q(this.prefixUrl,g.rotateright.DOWN),onRelease:te,onFocus:K,onBlur:me}))),this.showFlipControl&&p.push(this.flipButton=new e.Button({element:this.flipButton?e.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Flip"),srcRest:Q(this.prefixUrl,g.flip.REST),srcGroup:Q(this.prefixUrl,g.flip.GROUP),srcHover:Q(this.prefixUrl,g.flip.HOVER),srcDown:Q(this.prefixUrl,g.flip.DOWN),onRelease:ae,onFocus:K,onBlur:me})),x?(this.buttonGroup=new e.ButtonGroup({buttons:p,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttonGroup.element,this.addHandler("open",e.delegate(this,Mn)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT})):this.customButtons=p),this},currentPage:function(){return this._sequenceIndex},goToPage:function(f){return this.tileSources&&f>=0&&f<this.tileSources.length&&(this._sequenceIndex=f,this._updateSequenceButtons(f),this.open(this.tileSources[f]),this.referenceStrip&&this.referenceStrip.setFocus(f),this.raiseEvent("page",{page:f})),this},addOverlay:function(f,_,C,O){var I;if(e.isPlainObject(f)?I=f:I={element:f,location:_,placement:C,onDraw:O},f=e.getElement(I.element),a(this.currentOverlays,f)>=0)return this;var b=l(this,I);return this.currentOverlays.push(b),b.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:f,location:I.location,placement:I.placement}),this},updateOverlay:function(f,_,C){var O;return f=e.getElement(f),O=a(this.currentOverlays,f),O>=0&&(this.currentOverlays[O].update(_,C),n[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:f,location:_,placement:C})),this},removeOverlay:function(f){var _;return f=e.getElement(f),_=a(this.currentOverlays,f),_>=0&&(this.currentOverlays[_].destroy(),this.currentOverlays.splice(_,1),n[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:f})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return n[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(f){var _;return f=e.getElement(f),_=a(this.currentOverlays,f),_>=0?this.currentOverlays[_]:null},_updateSequenceButtons:function(f){this.nextButton&&(!this.tileSources||this.tileSources.length-1===f?this.navPrevNextWrap||this.nextButton.disable():this.nextButton.enable()),this.previousButton&&(f>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(f){this._hideMessage();var _=e.makeNeutralElement("div");_.appendChild(document.createTextNode(f)),this.messageDiv=e.makeCenteredNode(_),e.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var f=this.messageDiv;f&&(f.parentNode.removeChild(f),delete this.messageDiv)},gestureSettingsByDeviceType:function(f){switch(f){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var f,_=this.currentOverlays.length;for(f=0;f<_;f++)this.currentOverlays[f].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new e.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else e.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')},_addUpdatePixelDensityRatioEvent:function(){this._updatePixelDensityRatioBind=this._updatePixelDensityRatio.bind(this),e.addEvent(window,"resize",this._updatePixelDensityRatioBind)},_removeUpdatePixelDensityRatioEvent:function(){e.removeEvent(window,"resize",this._updatePixelDensityRatioBind)},_updatePixelDensityRatio:function(){var f=e.pixelDensityRatio,_=e.getCurrentPixelDensityRatio();f!==_&&(e.pixelDensityRatio=_,this.world.resetItems(),this.forceRedraw())},goToPreviousPage:function(){var f=this._sequenceIndex-1;this.navPrevNextWrap&&f<0&&(f+=this.tileSources.length),this.goToPage(f)},goToNextPage:function(){var f=this._sequenceIndex+1;this.navPrevNextWrap&&f>=this.tileSources.length&&(f=0),this.goToPage(f)},isAnimating:function(){return n[this.hash].animating}});function o(f){return f=e.getElement(f),new e.Point(f.clientWidth===0?1:f.clientWidth,f.clientHeight===0?1:f.clientHeight)}function s(f,_,C,O,I){var b=f;if(e.type(_)==="string"){if(_.match(/^\s*<.*>\s*$/))_=e.parseXml(_);else if(_.match(/^\s*[{[].*[}\]]\s*$/))try{var L=e.parseJSON(_);_=L}catch{}}function Y(te,ae){te.ready?O(te):(te.addHandler("ready",function(){O(te)}),te.addHandler("open-failed",function(K){I({message:K.message,source:ae})}))}setTimeout(function(){if(e.type(_)==="string")_=new e.TileSource({url:_,crossOriginPolicy:C.crossOriginPolicy!==void 0?C.crossOriginPolicy:f.crossOriginPolicy,ajaxWithCredentials:f.ajaxWithCredentials,ajaxHeaders:C.ajaxHeaders?C.ajaxHeaders:f.ajaxHeaders,splitHashDataForPost:f.splitHashDataForPost,success:function(me){O(me.tileSource)}}),_.addHandler("open-failed",function(me){I(me)});else if(e.isPlainObject(_)||_.nodeType)if(_.crossOriginPolicy===void 0&&(C.crossOriginPolicy!==void 0||f.crossOriginPolicy!==void 0)&&(_.crossOriginPolicy=C.crossOriginPolicy!==void 0?C.crossOriginPolicy:f.crossOriginPolicy),_.ajaxWithCredentials===void 0&&(_.ajaxWithCredentials=f.ajaxWithCredentials),e.isFunction(_.getTileUrl)){var te=new e.TileSource(_);te.getTileUrl=_.getTileUrl,O(te)}else{var ae=e.TileSource.determineType(b,_);if(!ae){I({message:"Unable to load TileSource",source:_});return}var K=ae.prototype.configure.apply(b,[_]);Y(new ae(K),_)}else Y(_,_)})}function l(f,_){if(_ instanceof e.Overlay)return _;var C=null;if(_.element)C=e.getElement(_.element);else{var O=_.id?_.id:"openseadragon-overlay-"+Math.floor(Math.random()*1e7);C=e.getElement(_.id),C||(C=document.createElement("a"),C.href="#/overlay/"+O),C.id=O,e.addClass(C,_.className?_.className:"openseadragon-overlay")}var I=_.location,b=_.width,L=_.height;if(!I){var Y=_.x,te=_.y;if(_.px!==void 0){var ae=f.viewport.imageToViewportRectangle(new e.Rect(_.px,_.py,b||0,L||0));Y=ae.x,te=ae.y,b=b!==void 0?ae.width:void 0,L=L!==void 0?ae.height:void 0}I=new e.Point(Y,te)}var K=_.placement;return K&&e.type(K)==="string"&&(K=e.Placement[_.placement.toUpperCase()]),new e.Overlay({element:C,location:I,placement:K,onDraw:_.onDraw,checkResize:_.checkResize,width:b,height:L,rotationMode:_.rotationMode})}function a(f,_){var C;for(C=f.length-1;C>=0;C--)if(f[C].element===_)return C;return-1}function u(f,_){return e.requestAnimationFrame(function(){_(f)})}function c(f){e.requestAnimationFrame(function(){d(f)})}function h(f){f.autoHideControls&&(f.controlsShouldFade=!0,f.controlsFadeBeginTime=e.now()+f.controlsFadeDelay,window.setTimeout(function(){c(f)},f.controlsFadeDelay))}function d(f){var _,C,O,I;if(f.controlsShouldFade){for(_=e.now(),C=_-f.controlsFadeBeginTime,O=1-C/f.controlsFadeLength,O=Math.min(1,O),O=Math.max(0,O),I=f.controls.length-1;I>=0;I--)f.controls[I].autoFade&&f.controls[I].setOpacity(O);O>0&&c(f)}}function m(f){var _;for(f.controlsShouldFade=!1,_=f.controls.length-1;_>=0;_--)f.controls[_].setOpacity(1)}function y(){m(this)}function T(){h(this)}function P(f){var _={tracker:f.eventSource,position:f.position,originalEvent:f.originalEvent,preventDefault:f.preventDefault};this.raiseEvent("canvas-contextmenu",_),f.preventDefault=_.preventDefault}function v(f){var _={originalEvent:f.originalEvent,preventDefaultAction:!1,preventVerticalPan:f.preventVerticalPan||!this.panVertical,preventHorizontalPan:f.preventHorizontalPan||!this.panHorizontal};if(this.raiseEvent("canvas-key",_),!_.preventDefaultAction&&!f.ctrl&&!f.alt&&!f.meta)switch(f.keyCode){case 38:_.preventVerticalPan||(f.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 40:_.preventVerticalPan||(f.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 37:_.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 39:_.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 187:this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),f.preventDefault=!0;break;case 189:this.viewport.zoomBy(.9),this.viewport.applyConstraints(),f.preventDefault=!0;break;case 48:this.viewport.goHome(),this.viewport.applyConstraints(),f.preventDefault=!0;break;case 87:_.preventVerticalPan||(f.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-40))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 83:_.preventVerticalPan||(f.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,40))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 65:_.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-40,0))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 68:_.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(40,0))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 82:f.shift?this.viewport.flipped?this.viewport.setRotation(this.viewport.getRotation()+this.rotationIncrement):this.viewport.setRotation(this.viewport.getRotation()-this.rotationIncrement):this.viewport.flipped?this.viewport.setRotation(this.viewport.getRotation()-this.rotationIncrement):this.viewport.setRotation(this.viewport.getRotation()+this.rotationIncrement),this.viewport.applyConstraints(),f.preventDefault=!0;break;case 70:this.viewport.toggleFlip(),f.preventDefault=!0;break;case 74:this.goToPreviousPage();break;case 75:this.goToNextPage();break;default:f.preventDefault=!1;break}else f.preventDefault=!1}function w(f){var _={originalEvent:f.originalEvent};this.raiseEvent("canvas-key-press",_)}function S(f){var _,C=document.activeElement===this.canvas;C||this.canvas.focus(),this.viewport.flipped&&(f.position.x=this.viewport.getContainerSize().x-f.position.x);var O={tracker:f.eventSource,position:f.position,quick:f.quick,shift:f.shift,originalEvent:f.originalEvent,originalTarget:f.originalTarget,preventDefaultAction:!1};this.raiseEvent("canvas-click",O),!O.preventDefaultAction&&this.viewport&&f.quick&&(_=this.gestureSettingsByDeviceType(f.pointerType),_.clickToZoom===!0&&(this.viewport.zoomBy(f.shift?1/this.zoomPerClick:this.zoomPerClick,_.zoomToRefPoint?this.viewport.pointFromPixel(f.position,!0):null),this.viewport.applyConstraints()),_.dblClickDragToZoom&&(n[this.hash].draggingToZoom===!0?(n[this.hash].lastClickTime=null,n[this.hash].draggingToZoom=!1):n[this.hash].lastClickTime=e.now()))}function R(f){var _,C={tracker:f.eventSource,position:f.position,shift:f.shift,originalEvent:f.originalEvent,preventDefaultAction:!1};this.raiseEvent("canvas-double-click",C),!C.preventDefaultAction&&this.viewport&&(_=this.gestureSettingsByDeviceType(f.pointerType),_.dblClickToZoom&&(this.viewport.zoomBy(f.shift?1/this.zoomPerClick:this.zoomPerClick,_.zoomToRefPoint?this.viewport.pointFromPixel(f.position,!0):null),this.viewport.applyConstraints()))}function k(f){var _,C={tracker:f.eventSource,pointerType:f.pointerType,position:f.position,delta:f.delta,speed:f.speed,direction:f.direction,shift:f.shift,originalEvent:f.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag",C),_=this.gestureSettingsByDeviceType(f.pointerType),!C.preventDefaultAction&&this.viewport){if(_.dblClickDragToZoom&&n[this.hash].draggingToZoom){var O=Math.pow(this.zoomPerDblClickDrag,f.delta.y/50);this.viewport.zoomBy(O)}else if(_.dragToPan&&!n[this.hash].draggingToZoom){if(this.panHorizontal||(f.delta.x=0),this.panVertical||(f.delta.y=0),this.viewport.flipped&&(f.delta.x=-f.delta.x),this.constrainDuringPan){var I=this.viewport.deltaPointsFromPixels(f.delta.negate());this.viewport.centerSpringX.target.value+=I.x,this.viewport.centerSpringY.target.value+=I.y;var b=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=I.x,this.viewport.centerSpringY.target.value-=I.y,b.xConstrained&&(f.delta.x=0),b.yConstrained&&(f.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(f.delta.negate()),_.flickEnabled&&!this.constrainDuringPan)}}}function F(f){var _,C={tracker:f.eventSource,pointerType:f.pointerType,position:f.position,speed:f.speed,direction:f.direction,shift:f.shift,originalEvent:f.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag-end",C),_=this.gestureSettingsByDeviceType(f.pointerType),!C.preventDefaultAction&&this.viewport){if(!n[this.hash].draggingToZoom&&_.dragToPan&&_.flickEnabled&&f.speed>=_.flickMinSpeed){var O=0;this.panHorizontal&&(O=_.flickMomentum*f.speed*Math.cos(f.direction));var I=0;this.panVertical&&(I=_.flickMomentum*f.speed*Math.sin(f.direction));var b=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),L=this.viewport.pointFromPixel(new e.Point(b.x-O,b.y-I));this.viewport.panTo(L,!1)}this.viewport.applyConstraints()}_.dblClickDragToZoom&&n[this.hash].draggingToZoom===!0&&(n[this.hash].draggingToZoom=!1)}function N(f){this.raiseEvent("canvas-enter",{tracker:f.eventSource,pointerType:f.pointerType,position:f.position,buttons:f.buttons,pointers:f.pointers,insideElementPressed:f.insideElementPressed,buttonDownAny:f.buttonDownAny,originalEvent:f.originalEvent})}function B(f){this.raiseEvent("canvas-exit",{tracker:f.eventSource,pointerType:f.pointerType,position:f.position,buttons:f.buttons,pointers:f.pointers,insideElementPressed:f.insideElementPressed,buttonDownAny:f.buttonDownAny,originalEvent:f.originalEvent})}function j(f){var _;if(this.raiseEvent("canvas-press",{tracker:f.eventSource,pointerType:f.pointerType,position:f.position,insideElementPressed:f.insideElementPressed,insideElementReleased:f.insideElementReleased,originalEvent:f.originalEvent}),_=this.gestureSettingsByDeviceType(f.pointerType),_.dblClickDragToZoom){var C=n[this.hash].lastClickTime,O=e.now();if(C===null)return;O-C<this.dblClickTimeThreshold&&(n[this.hash].draggingToZoom=!0),n[this.hash].lastClickTime=null}}function U(f){this.raiseEvent("canvas-release",{tracker:f.eventSource,pointerType:f.pointerType,position:f.position,insideElementPressed:f.insideElementPressed,insideElementReleased:f.insideElementReleased,originalEvent:f.originalEvent})}function X(f){this.raiseEvent("canvas-nonprimary-press",{tracker:f.eventSource,position:f.position,pointerType:f.pointerType,button:f.button,buttons:f.buttons,originalEvent:f.originalEvent})}function q(f){this.raiseEvent("canvas-nonprimary-release",{tracker:f.eventSource,position:f.position,pointerType:f.pointerType,button:f.button,buttons:f.buttons,originalEvent:f.originalEvent})}function re(f){var _,C,O,I,b={tracker:f.eventSource,pointerType:f.pointerType,gesturePoints:f.gesturePoints,lastCenter:f.lastCenter,center:f.center,lastDistance:f.lastDistance,distance:f.distance,shift:f.shift,originalEvent:f.originalEvent,preventDefaultPanAction:!1,preventDefaultZoomAction:!1,preventDefaultRotateAction:!1};if(this.raiseEvent("canvas-pinch",b),this.viewport&&(_=this.gestureSettingsByDeviceType(f.pointerType),_.pinchToZoom&&(!b.preventDefaultPanAction||!b.preventDefaultZoomAction)&&(C=this.viewport.pointFromPixel(f.center,!0),_.zoomToRefPoint&&!b.preventDefaultPanAction&&(O=this.viewport.pointFromPixel(f.lastCenter,!0),I=O.minus(C),this.panHorizontal||(I.x=0),this.panVertical||(I.y=0),this.viewport.panBy(I,!0)),b.preventDefaultZoomAction||this.viewport.zoomBy(f.distance/f.lastDistance,C,!0),this.viewport.applyConstraints()),_.pinchRotate&&!b.preventDefaultRotateAction)){var L=Math.atan2(f.gesturePoints[0].currentPos.y-f.gesturePoints[1].currentPos.y,f.gesturePoints[0].currentPos.x-f.gesturePoints[1].currentPos.x),Y=Math.atan2(f.gesturePoints[0].lastPos.y-f.gesturePoints[1].lastPos.y,f.gesturePoints[0].lastPos.x-f.gesturePoints[1].lastPos.x);C=this.viewport.pointFromPixel(f.center,!0),this.viewport.rotateTo(this.viewport.getRotation(!0)+(L-Y)*(180/Math.PI),C,!0)}}function we(f){this.raiseEvent("canvas-focus",{tracker:f.eventSource,originalEvent:f.originalEvent})}function Te(f){this.raiseEvent("canvas-blur",{tracker:f.eventSource,originalEvent:f.originalEvent})}function Ee(f){var _,C,O,I,b;I=e.now(),b=I-this._lastScrollTime,b>this.minScrollDeltaTime?(this._lastScrollTime=I,_={tracker:f.eventSource,position:f.position,scroll:f.scroll,shift:f.shift,originalEvent:f.originalEvent,preventDefaultAction:!1,preventDefault:!0},this.raiseEvent("canvas-scroll",_),!_.preventDefaultAction&&this.viewport&&(this.viewport.flipped&&(f.position.x=this.viewport.getContainerSize().x-f.position.x),C=this.gestureSettingsByDeviceType(f.pointerType),C.scrollToZoom&&(O=Math.pow(this.zoomPerScroll,f.scroll),this.viewport.zoomBy(O,C.zoomToRefPoint?this.viewport.pointFromPixel(f.position,!0):null),this.viewport.applyConstraints())),f.preventDefault=_.preventDefault):f.preventDefault=!0}function xe(f){n[this.hash].mouseInside=!0,m(this),this.raiseEvent("container-enter",{tracker:f.eventSource,pointerType:f.pointerType,position:f.position,buttons:f.buttons,pointers:f.pointers,insideElementPressed:f.insideElementPressed,buttonDownAny:f.buttonDownAny,originalEvent:f.originalEvent})}function A(f){f.pointers<1&&(n[this.hash].mouseInside=!1,n[this.hash].animating||h(this)),this.raiseEvent("container-exit",{tracker:f.eventSource,pointerType:f.pointerType,position:f.position,buttons:f.buttons,pointers:f.pointers,insideElementPressed:f.insideElementPressed,buttonDownAny:f.buttonDownAny,originalEvent:f.originalEvent})}function G(f){se(f),f.isOpen()?f._updateRequestId=u(f,G):f._updateRequestId=!1}function Z(f,_){var C=f.viewport,O=C.getZoom(),I=C.getCenter();C.resize(_,f.preserveImageSizeOnResize),C.panTo(I,!0);var b;if(f.preserveImageSizeOnResize)b=n[f.hash].prevContainerSize.x/_.x;else{var L=new e.Point(0,0),Y=new e.Point(n[f.hash].prevContainerSize.x,n[f.hash].prevContainerSize.y).distanceTo(L),te=new e.Point(_.x,_.y).distanceTo(L);b=te/Y*n[f.hash].prevContainerSize.x/_.x}C.zoomTo(O*b,null,!0),n[f.hash].prevContainerSize=_,n[f.hash].forceRedraw=!0,n[f.hash].needsResize=!1,n[f.hash].forceResize=!1}function se(f){if(!(f._opening||!n[f.hash])){if(f.autoResize||n[f.hash].forceResize){var _;if(f._autoResizePolling){_=o(f.container);var C=n[f.hash].prevContainerSize;_.equals(C)||(n[f.hash].needsResize=!0)}n[f.hash].needsResize&&Z(f,_||o(f.container))}var O=f.viewport.update(),I=f.world.update(O)||O;O&&f.raiseEvent("viewport-change"),f.referenceStrip&&(I=f.referenceStrip.update(f.viewport)||I);var b=n[f.hash].animating;!b&&I&&(f.raiseEvent("animation-start"),m(f));var L=b&&!I;L&&(n[f.hash].animating=!1),(I||L||n[f.hash].forceRedraw||f.world.needsDraw())&&(pe(f),f._drawOverlays(),f.navigator&&f.navigator.update(f.viewport),n[f.hash].forceRedraw=!1,I&&f.raiseEvent("animation")),L&&(f.raiseEvent("animation-finish"),n[f.hash].mouseInside||h(f)),n[f.hash].animating=I}}function pe(f){f.imageLoader.clear(),f.world.draw(),f.raiseEvent("update-viewport",{})}function Q(f,_){return f?f+_:_}function Je(){n[this.hash].lastZoomTime=e.now(),n[this.hash].zoomFactor=this.zoomPerSecond,n[this.hash].zooming=!0,st(this)}function kt(){n[this.hash].lastZoomTime=e.now(),n[this.hash].zoomFactor=1/this.zoomPerSecond,n[this.hash].zooming=!0,st(this)}function $e(){n[this.hash].zooming=!1}function st(f){e.requestAnimationFrame(e.delegate(f,On))}function On(){var f,_,C;n[this.hash].zooming&&this.viewport&&(f=e.now(),_=f-n[this.hash].lastZoomTime,C=Math.pow(n[this.hash].zoomFactor,_/1e3),this.viewport.zoomBy(C),this.viewport.applyConstraints(),n[this.hash].lastZoomTime=f,st(this))}function Kr(){this.viewport&&(n[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function zn(){this.viewport&&(n[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function Mn(){this.buttonGroup&&(this.buttonGroup.emulateEnter(),this.buttonGroup.emulateLeave())}function Jr(){this.viewport&&this.viewport.goHome()}function Nn(){this.isFullPage()&&!e.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttonGroup&&this.buttonGroup.emulateLeave(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function $r(){if(this.viewport){var f=this.viewport.getRotation();this.viewport.flipped?f+=this.rotationIncrement:f-=this.rotationIncrement,this.viewport.setRotation(f)}}function Ui(){if(this.viewport){var f=this.viewport.getRotation();this.viewport.flipped?f-=this.rotationIncrement:f+=this.rotationIncrement,this.viewport.setRotation(f)}}function ci(){this.viewport.toggleFlip()}e.determineDrawer=function(f){for(let _ in i){const C=i[_],O=C.prototype;if(O&&O instanceof i.DrawerBase&&e.isFunction(O.getType)&&O.getType.call(C)===f)return C}return null}}(i),function(e){e.Navigator=function(u){var c=u.viewer,h=this,d,m;u.element||u.id?(u.element?(u.id&&e.console.warn("Given option.id for Navigator was ignored since option.element was provided and is being used instead."),u.element.id?u.id=u.element.id:u.id="navigator-"+e.now(),this.element=u.element):this.element=document.getElementById(u.id),u.controlOptions={anchor:e.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(u.id="navigator-"+e.now(),this.element=e.makeNeutralElement("div"),u.controlOptions={anchor:e.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:u.autoFade},u.position&&(u.position==="BOTTOM_RIGHT"?u.controlOptions.anchor=e.ControlAnchor.BOTTOM_RIGHT:u.position==="BOTTOM_LEFT"?u.controlOptions.anchor=e.ControlAnchor.BOTTOM_LEFT:u.position==="TOP_RIGHT"?u.controlOptions.anchor=e.ControlAnchor.TOP_RIGHT:u.position==="TOP_LEFT"?u.controlOptions.anchor=e.ControlAnchor.TOP_LEFT:u.position==="ABSOLUTE"&&(u.controlOptions.anchor=e.ControlAnchor.ABSOLUTE,u.controlOptions.top=u.top,u.controlOptions.left=u.left,u.controlOptions.height=u.height,u.controlOptions.width=u.width))),this.element.id=u.id,this.element.className+=" navigator",u=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.navigatorSizeRatio},u,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:u.animationTime,autoResize:!1,minZoomImageRatio:1,background:u.background,opacity:u.opacity,borderColor:u.borderColor,displayRegionColor:u.displayRegionColor}),u.minPixelRatio=this.minPixelRatio=c.minPixelRatio,e.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new e.Point(1,1),this.totalBorderWidths=new e.Point(this.borderWidth*2,this.borderWidth*2).minus(this.fudge),u.controlOptions.anchor!==e.ControlAnchor.NONE&&function(P,v){P.margin="0px",P.border=v+"px solid "+u.borderColor,P.padding="0px",P.background=u.background,P.opacity=u.opacity,P.overflow="hidden"}(this.element.style,this.borderWidth),this.displayRegion=e.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(P,v){P.position="relative",P.top="0px",P.left="0px",P.fontSize="0px",P.overflow="hidden",P.border=v+"px solid "+u.displayRegionColor,P.margin="0px",P.padding="0px",P.background="transparent",P.float="left",P.cssFloat="left",P.zIndex=999999999,P.cursor="default",P.boxSizing="content-box"}(this.displayRegion.style,this.borderWidth),e.setElementPointerEventsNone(this.displayRegion),e.setElementTouchActionNone(this.displayRegion),this.displayRegionContainer=e.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",e.setElementPointerEventsNone(this.displayRegionContainer),e.setElementTouchActionNone(this.displayRegionContainer),c.addControl(this.element,u.controlOptions),this._resizeWithViewer=u.controlOptions.anchor!==e.ControlAnchor.ABSOLUTE&&u.controlOptions.anchor!==e.ControlAnchor.NONE,u.width&&u.height?(this.setWidth(u.width),this.setHeight(u.height)):this._resizeWithViewer&&(d=e.getElementSize(c.element),this.element.style.height=Math.round(d.y*u.sizeRatio)+"px",this.element.style.width=Math.round(d.x*u.sizeRatio)+"px",this.oldViewerSize=d,m=e.getElementSize(this.element),this.elementArea=m.x*m.y),this.oldContainerSize=new e.Point(0,0),e.Viewer.apply(this,[u]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer);function y(P,v){l(h.displayRegionContainer,P),l(h.displayRegion,-P),h.viewport.setRotation(P,v)}if(u.navigatorRotate){var T=u.viewer.viewport?u.viewer.viewport.getRotation():u.viewer.degrees||0;y(T,!0),u.viewer.addHandler("rotate",function(P){y(P.degrees,P.immediately)})}this.innerTracker.destroy(),this.innerTracker=new e.MouseTracker({userData:"Navigator.innerTracker",element:this.element,dragHandler:e.delegate(this,r),clickHandler:e.delegate(this,n),releaseHandler:e.delegate(this,o),scrollHandler:e.delegate(this,s),preProcessEventHandler:function(P){P.eventType==="wheel"&&(P.preventDefault=!0)}}),this.outerTracker.userData="Navigator.outerTracker",e.setElementPointerEventsNone(this.canvas),e.setElementPointerEventsNone(this.container),this.addHandler("reset-size",function(){h.viewport&&h.viewport.goHome(!0)}),c.world.addHandler("item-index-change",function(P){window.setTimeout(function(){var v=h.world.getItemAt(P.previousIndex);h.world.setItemIndex(v,P.newIndex)},1)}),c.world.addHandler("remove-item",function(P){var v=P.item,w=h._getMatchingItem(v);w&&h.world.removeItem(w)}),this.update(c.viewport)},e.extend(e.Navigator.prototype,e.EventSource.prototype,e.Viewer.prototype,{updateSize:function(){if(this.viewport){var u=new e.Point(this.container.clientWidth===0?1:this.container.clientWidth,this.container.clientHeight===0?1:this.container.clientHeight);u.equals(this.oldContainerSize)||(this.viewport.resize(u,!0),this.viewport.goHome(!0),this.oldContainerSize=u,this.world.update(),this.world.draw(),this.update(this.viewer.viewport))}},setWidth:function(u){this.width=u,this.element.style.width=typeof u=="number"?u+"px":u,this._resizeWithViewer=!1,this.updateSize()},setHeight:function(u){this.height=u,this.element.style.height=typeof u=="number"?u+"px":u,this._resizeWithViewer=!1,this.updateSize()},setFlip:function(u){return this.viewport.setFlip(u),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(u){a(this.displayRegion,u),a(this.canvas,u),a(this.element,u)},update:function(u){var c,h,d,m,y,T;if(u||(u=this.viewer.viewport),c=e.getElementSize(this.viewer.element),this._resizeWithViewer&&c.x&&c.y&&!c.equals(this.oldViewerSize)&&(this.oldViewerSize=c,this.maintainSizeRatio||!this.elementArea?(h=c.x*this.sizeRatio,d=c.y*this.sizeRatio):(h=Math.sqrt(this.elementArea*(c.x/c.y)),d=this.elementArea/h),this.element.style.width=Math.round(h)+"px",this.element.style.height=Math.round(d)+"px",this.elementArea||(this.elementArea=h*d),this.updateSize()),u&&this.viewport){if(m=u.getBoundsNoRotate(!0),y=this.viewport.pixelFromPointNoRotate(m.getTopLeft(),!1),T=this.viewport.pixelFromPointNoRotate(m.getBottomRight(),!1).minus(this.totalBorderWidths),!this.navigatorRotate){var P=u.getRotation(!0);l(this.displayRegion,-P)}var v=this.displayRegion.style;v.display=this.world.getItemCount()?"block":"none",v.top=y.y.toFixed(2)+"px",v.left=y.x.toFixed(2)+"px";var w=T.x-y.x,S=T.y-y.y;v.width=Math.round(Math.max(w,0))+"px",v.height=Math.round(Math.max(S,0))+"px"}},addTiledImage:function(u){var c=this,h=u.originalTiledImage;delete u.original;var d=e.extend({},u,{success:function(m){var y=m.item;y._originalForNavigator=h,c._matchBounds(y,h,!0),c._matchOpacity(y,h),c._matchCompositeOperation(y,h);function T(){c._matchBounds(y,h)}function P(){c._matchOpacity(y,h)}function v(){c._matchCompositeOperation(y,h)}h.addHandler("bounds-change",T),h.addHandler("clip-change",T),h.addHandler("opacity-change",P),h.addHandler("composite-operation-change",v)}});return e.Viewer.prototype.addTiledImage.apply(this,[d])},destroy:function(){return e.Viewer.prototype.destroy.apply(this)},_getMatchingItem:function(u){for(var c=this.world.getItemCount(),h,d=0;d<c;d++)if(h=this.world.getItemAt(d),h._originalForNavigator===u)return h;return null},_matchBounds:function(u,c,h){var d=c.getBoundsNoRotate();u.setPosition(d.getTopLeft(),h),u.setWidth(d.width,h),u.setRotation(c.getRotation(),h),u.setClip(c.getClip()),u.setFlip(c.getFlip())},_matchOpacity:function(u,c){u.setOpacity(c.opacity)},_matchCompositeOperation:function(u,c){u.setCompositeOperation(c.compositeOperation)}});function n(u){var c={tracker:u.eventSource,position:u.position,quick:u.quick,shift:u.shift,originalEvent:u.originalEvent,preventDefaultAction:!1};if(this.viewer.raiseEvent("navigator-click",c),!c.preventDefaultAction&&u.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(u.position.x=this.viewport.getContainerSize().x-u.position.x);var h=this.viewport.pointFromPixel(u.position);this.panVertical?this.panHorizontal||(h.x=this.viewer.viewport.getCenter(!0).x):h.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(h),this.viewer.viewport.applyConstraints()}}function r(u){var c={tracker:u.eventSource,position:u.position,delta:u.delta,speed:u.speed,direction:u.direction,shift:u.shift,originalEvent:u.originalEvent,preventDefaultAction:!1};this.viewer.raiseEvent("navigator-drag",c),!c.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(u.delta.x=0),this.panVertical||(u.delta.y=0),this.viewer.viewport.flipped&&(u.delta.x=-u.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(u.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function o(u){u.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function s(u){var c={tracker:u.eventSource,position:u.position,scroll:u.scroll,shift:u.shift,originalEvent:u.originalEvent,preventDefault:u.preventDefault};this.viewer.raiseEvent("navigator-scroll",c),u.preventDefault=c.preventDefault}function l(u,c){a(u,"rotate("+c+"deg)")}function a(u,c){u.style.webkitTransform=c,u.style.mozTransform=c,u.style.msTransform=c,u.style.oTransform=c,u.style.transform=c}}(i),function(e){var n={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};e.extend(e,{getString:function(r){var o=r.split("."),s=null,l=arguments,a=n,u;for(u=0;u<o.length-1;u++)a=a[o[u]]||{};return s=a[o[u]],typeof s!="string"&&(e.console.error("Untranslated source string:",r),s=""),s.replace(/\{\d+\}/g,function(c){var h=parseInt(c.match(/\d+/),10)+1;return h<l.length?l[h]:""})},setString:function(r,o){var s=r.split("."),l=n,a;for(a=0;a<s.length-1;a++)l[s[a]]||(l[s[a]]={}),l=l[s[a]];l[s[a]]=o}})}(i),function(e){e.Point=function(n,r){this.x=typeof n=="number"?n:0,this.y=typeof r=="number"?r:0},e.Point.prototype={clone:function(){return new e.Point(this.x,this.y)},plus:function(n){return new e.Point(this.x+n.x,this.y+n.y)},minus:function(n){return new e.Point(this.x-n.x,this.y-n.y)},times:function(n){return new e.Point(this.x*n,this.y*n)},divide:function(n){return new e.Point(this.x/n,this.y/n)},negate:function(){return new e.Point(-this.x,-this.y)},distanceTo:function(n){return Math.sqrt(Math.pow(this.x-n.x,2)+Math.pow(this.y-n.y,2))},squaredDistanceTo:function(n){return Math.pow(this.x-n.x,2)+Math.pow(this.y-n.y,2)},apply:function(n){return new e.Point(n(this.x),n(this.y))},equals:function(n){return n instanceof e.Point&&this.x===n.x&&this.y===n.y},rotate:function(n,r){r=r||new e.Point(0,0);var o,s;if(n%90===0){var l=e.positiveModulo(n,360);switch(l){case 0:o=1,s=0;break;case 90:o=0,s=1;break;case 180:o=-1,s=0;break;case 270:o=0,s=-1;break}}else{var a=n*Math.PI/180;o=Math.cos(a),s=Math.sin(a)}var u=o*(this.x-r.x)-s*(this.y-r.y)+r.x,c=s*(this.x-r.x)+o*(this.y-r.y)+r.y;return new e.Point(u,c)},toString:function(){return"("+Math.round(this.x*100)/100+","+Math.round(this.y*100)/100+")"}}}(i),function(e){e.TileSource=function(r,o,s,l,a,u){var c=this,h=arguments,d,m;if(e.isPlainObject(r)?d=r:d={width:h[0],height:h[1],tileSize:h[2],tileOverlap:h[3],minLevel:h[4],maxLevel:h[5]},e.EventSource.call(this),e.extend(!0,this,d),!this.success){for(m=0;m<arguments.length;m++)if(e.isFunction(arguments[m])){this.success=arguments[m];break}}this.success&&this.addHandler("ready",function(y){c.success(y)}),e.type(arguments[0])==="string"&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new e.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=d.width&&d.height?d.width/d.height:1,this.dimensions=new e.Point(d.width,d.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=d.tileOverlap?d.tileOverlap:0,this.minLevel=d.minLevel?d.minLevel:0,this.maxLevel=d.maxLevel!==void 0&&d.maxLevel!==null?d.maxLevel:d.width&&d.height?Math.ceil(Math.log(Math.max(d.width,d.height))/Math.log(2)):0,this.success&&e.isFunction(this.success)&&this.success(this))},e.TileSource.prototype={getTileSize:function(r){return e.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(r){return this._tileWidth?this._tileWidth:this.getTileSize(r)},getTileHeight:function(r){return this._tileHeight?this._tileHeight:this.getTileSize(r)},setMaxLevel:function(r){this.maxLevel=r,this._memoizeLevelScale()},getLevelScale:function(r){return this._memoizeLevelScale(),this.getLevelScale(r)},_memoizeLevelScale:function(){var r={},o;for(o=0;o<=this.maxLevel;o++)r[o]=1/Math.pow(2,this.maxLevel-o);this.getLevelScale=function(s){return r[s]}},getNumTiles:function(r){var o=this.getLevelScale(r),s=Math.ceil(o*this.dimensions.x/this.getTileWidth(r)),l=Math.ceil(o*this.dimensions.y/this.getTileHeight(r));return new e.Point(s,l)},getPixelRatio:function(r){var o=this.dimensions.times(this.getLevelScale(r)),s=1/o.x*e.pixelDensityRatio,l=1/o.y*e.pixelDensityRatio;return new e.Point(s,l)},getClosestLevel:function(){var r,o;for(r=this.minLevel+1;r<=this.maxLevel&&(o=this.getNumTiles(r),!(o.x>1||o.y>1));r++);return r-1},getTileAtPoint:function(r,o){var s=o.x>=0&&o.x<=1&&o.y>=0&&o.y<=1/this.aspectRatio;e.console.assert(s,"[TileSource.getTileAtPoint] must be called with a valid point.");var l=this.dimensions.x*this.getLevelScale(r),a=o.x*l,u=o.y*l,c=Math.floor(a/this.getTileWidth(r)),h=Math.floor(u/this.getTileHeight(r));o.x>=1&&(c=this.getNumTiles(r).x-1);var d=1e-15;return o.y>=1/this.aspectRatio-d&&(h=this.getNumTiles(r).y-1),new e.Point(c,h)},getTileBounds:function(r,o,s,l){var a=this.dimensions.times(this.getLevelScale(r)),u=this.getTileWidth(r),c=this.getTileHeight(r),h=o===0?0:u*o-this.tileOverlap,d=s===0?0:c*s-this.tileOverlap,m=u+(o===0?1:2)*this.tileOverlap,y=c+(s===0?1:2)*this.tileOverlap,T=1/a.x;return m=Math.min(m,a.x-h),y=Math.min(y,a.y-d),l?new e.Rect(0,0,m,y):new e.Rect(h*T,d*T,m*T,y*T)},getImageInfo:function(r){var o=this,s,l,a,u,c,h,d;r&&(c=r.split("/"),h=c[c.length-1],d=h.lastIndexOf("."),d>-1&&(c[c.length-1]=h.slice(0,d)));var m=null;if(this.splitHashDataForPost){var y=r.indexOf("#");y!==-1&&(m=r.substring(y+1),r=r.substr(0,y))}l=function(T){typeof T=="string"&&(T=e.parseXml(T));var P=e.TileSource.determineType(o,T,r);if(!P){o.raiseEvent("open-failed",{message:"Unable to load TileSource",source:r});return}u=P.prototype.configure.apply(o,[T,r,m]),u.ajaxWithCredentials===void 0&&(u.ajaxWithCredentials=o.ajaxWithCredentials),a=new P(u),o.ready=!0,o.raiseEvent("ready",{tileSource:a})},r.match(/\.js$/)?(s=r.split("/").pop().replace(".js",""),e.jsonp({url:r,async:!1,callbackName:s,callback:l})):e.makeAjaxRequest({url:r,postData:m,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(T){var P=n(T);l(P)},error:function(T,P){var v;try{v="HTTP "+T.status+" attempting to load TileSource: "+r}catch{var w;typeof P>"u"||!P.toString?w="Unknown error":w=P.toString(),v=w+" attempting to load TileSource: "+r}e.console.error(v),o.raiseEvent("open-failed",{message:v,source:r,postData:m})}})},supports:function(r,o){return!1},configure:function(r,o,s){throw new Error("Method not implemented.")},getTileUrl:function(r,o,s){throw new Error("Method not implemented.")},getTilePostData:function(r,o,s){return null},getTileAjaxHeaders:function(r,o,s){return{}},getTileHashKey:function(r,o,s,l,a,u){function c(h){return a?h+"+"+JSON.stringify(a):h}return c(typeof l!="string"?r+"/"+o+"_"+s:l)},tileExists:function(r,o,s){var l=this.getNumTiles(r);return r>=this.minLevel&&r<=this.maxLevel&&o>=0&&s>=0&&o<l.x&&s<l.y},hasTransparency:function(r,o,s,l){return!!r||o.match(".png")},downloadTileStart:function(r){var o=r.userData,s=new Image;o.image=s,o.request=null;var l=function(a){if(!s){r.finish(null,o.request,"Image load failed: undefined Image instance.");return}s.onload=s.onerror=s.onabort=null,r.finish(a?null:s,o.request,a)};s.onload=function(){l()},s.onabort=s.onerror=function(){l("Image load aborted.")},r.loadWithAjax?o.request=e.makeAjaxRequest({url:r.src,withCredentials:r.ajaxWithCredentials,headers:r.ajaxHeaders,responseType:"arraybuffer",postData:r.postData,success:function(a){var u;try{u=new window.Blob([a.response])}catch(d){var c=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(d.name==="TypeError"&&c){var h=new c;h.append(a.response),u=h.getBlob()}}u.size===0?l("Empty image response."):s.src=(window.URL||window.webkitURL).createObjectURL(u)},error:function(a){l("Image load aborted - XHR error")}}):(r.crossOriginPolicy!==!1&&(s.crossOrigin=r.crossOriginPolicy),s.src=r.src)},downloadTileAbort:function(r){r.userData.request&&r.userData.request.abort();var o=r.userData.image;r.userData.image&&(o.onload=o.onerror=o.onabort=null)},createTileCache:function(r,o,s){r._data=o},destroyTileCache:function(r){r._data=null,r._renderedContext=null},getTileCacheData:function(r){return r._data},getTileCacheDataAsImage:function(r){return r._data},getTileCacheDataAsContext2D:function(r){if(!r._renderedContext){var o=document.createElement("canvas");o.width=r._data.width,o.height=r._data.height,r._renderedContext=o.getContext("2d"),r._renderedContext.drawImage(r._data,0,0),r._data=null}return r._renderedContext}},e.extend(!0,e.TileSource.prototype,e.EventSource.prototype);function n(r){var o=r.responseText,s=r.status,l,a;if(r){if(r.status!==200&&r.status!==0)throw s=r.status,l=s===404?"Not Found":r.statusText,new Error(e.getString("Errors.Status",s,l))}else throw new Error(e.getString("Errors.Security"));if(o.match(/^\s*<.*/))try{a=r.responseXML&&r.responseXML.documentElement?r.responseXML:e.parseXml(o)}catch{a=r.responseText}else if(o.match(/\s*[{[].*/))try{a=e.parseJSON(o)}catch{a=o}else a=o;return a}e.TileSource.determineType=function(r,o,s){var l;for(l in i)if(l.match(/.+TileSource$/)&&e.isFunction(i[l])&&e.isFunction(i[l].prototype.supports)&&i[l].prototype.supports.call(r,o,s))return i[l];return e.console.error("No TileSource was able to open %s %s",s,o),null}}(i),function(e){e.DziTileSource=function(o,s,l,a,u,c,h,d,m){var y,T,P,v;if(e.isPlainObject(o)?v=o:v={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=v.tilesUrl,this.fileFormat=v.fileFormat,this.displayRects=v.displayRects,this.displayRects)for(y=this.displayRects.length-1;y>=0;y--)for(T=this.displayRects[y],P=T.minLevel;P<=T.maxLevel;P++)this._levelRects[P]||(this._levelRects[P]=[]),this._levelRects[P].push(T);e.TileSource.apply(this,[v])},e.extend(e.DziTileSource.prototype,e.TileSource.prototype,{supports:function(o,s){var l;return o.Image?l=o.Image.xmlns:o.documentElement&&(o.documentElement.localName==="Image"||o.documentElement.tagName==="Image")&&(l=o.documentElement.namespaceURI),l=(l||"").toLowerCase(),l.indexOf("schemas.microsoft.com/deepzoom/2008")!==-1||l.indexOf("schemas.microsoft.com/deepzoom/2009")!==-1},configure:function(o,s,l){var a;return e.isPlainObject(o)?a=r(this,o):a=n(this,o),s&&!a.tilesUrl&&(a.tilesUrl=s.replace(/([^/]+?)(\.(dzi|xml|js)?(\?[^/]*)?)?\/?$/,"$1_files/"),s.search(/\.(dzi|xml|js)\?/)!==-1?a.queryParams=s.match(/\?.*/):a.queryParams=""),a},getTileUrl:function(o,s,l){return[this.tilesUrl,o,"/",s,"_",l,".",this.fileFormat,this.queryParams].join("")},tileExists:function(o,s,l){var a=this._levelRects[o],u,c,h,d,m,y,T;if(this.minLevel&&o<this.minLevel||this.maxLevel&&o>this.maxLevel)return!1;if(!a||!a.length)return!0;for(T=a.length-1;T>=0;T--)if(u=a[T],!(o<u.minLevel||o>u.maxLevel)&&(c=this.getLevelScale(o),h=u.x*c,d=u.y*c,m=h+u.width*c,y=d+u.height*c,h=Math.floor(h/this._tileWidth),d=Math.floor(d/this._tileWidth),m=Math.ceil(m/this._tileWidth),y=Math.ceil(y/this._tileWidth),h<=s&&s<m&&d<=l&&l<y))return!0;return!1}});function n(o,s){if(!s||!s.documentElement)throw new Error(e.getString("Errors.Xml"));var l=s.documentElement,a=l.localName||l.tagName,u=s.documentElement.namespaceURI,c=null,h=[],d,m,y,T,P;if(a==="Image")try{if(T=l.getElementsByTagName("Size")[0],T===void 0&&(T=l.getElementsByTagNameNS(u,"Size")[0]),c={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:l.getAttribute("Url"),Format:l.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(l.getAttribute("Overlap"),10),TileSize:parseInt(l.getAttribute("TileSize"),10),Size:{Height:parseInt(T.getAttribute("Height"),10),Width:parseInt(T.getAttribute("Width"),10)}}},!e.imageFormatSupported(c.Image.Format))throw new Error(e.getString("Errors.ImageFormat",c.Image.Format.toUpperCase()));for(d=l.getElementsByTagName("DisplayRect"),d===void 0&&(d=l.getElementsByTagNameNS(u,"DisplayRect")[0]),P=0;P<d.length;P++)m=d[P],y=m.getElementsByTagName("Rect")[0],y===void 0&&(y=m.getElementsByTagNameNS(u,"Rect")[0]),h.push({Rect:{X:parseInt(y.getAttribute("X"),10),Y:parseInt(y.getAttribute("Y"),10),Width:parseInt(y.getAttribute("Width"),10),Height:parseInt(y.getAttribute("Height"),10),MinLevel:parseInt(m.getAttribute("MinLevel"),10),MaxLevel:parseInt(m.getAttribute("MaxLevel"),10)}});return h.length&&(c.Image.DisplayRect=h),r(o,c)}catch(S){throw S instanceof Error?S:new Error(e.getString("Errors.Dzi"))}else{if(a==="Collection")throw new Error(e.getString("Errors.Dzc"));if(a==="Error"){var v=l.getElementsByTagName("Message")[0],w=v.firstChild.nodeValue;throw new Error(w)}}throw new Error(e.getString("Errors.Dzi"))}function r(o,s){var l=s.Image,a=l.Url,u=l.Format,c=l.Size,h=l.DisplayRect||[],d=parseInt(c.Width,10),m=parseInt(c.Height,10),y=parseInt(l.TileSize,10),T=parseInt(l.Overlap,10),P=[],v,w;for(w=0;w<h.length;w++)v=h[w].Rect,P.push(new e.DisplayRect(parseInt(v.X,10),parseInt(v.Y,10),parseInt(v.Width,10),parseInt(v.Height,10),parseInt(v.MinLevel,10),parseInt(v.MaxLevel,10)));return e.extend(!0,{width:d,height:m,tileSize:y,tileOverlap:T,minLevel:null,maxLevel:null,tilesUrl:a,fileFormat:u,displayRects:P},s)}}(i),function(e){e.IIIFTileSource=function(l){if(e.extend(!0,this,l),this._id=this["@id"]||this.id||this.identifier||null,!(this.height&&this.width&&this._id))throw new Error("IIIF required parameters (width, height, or id) not provided.");if(l.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=l.version,this.tile_width&&this.tile_height)l.tileWidth=this.tile_width,l.tileHeight=this.tile_height;else if(this.tile_width)l.tileSize=this.tile_width;else if(this.tile_height)l.tileSize=this.tile_height;else if(this.tiles)if(this.tiles.length===1)l.tileWidth=this.tiles[0].width,l.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var a=0;a<this.tiles.length;a++)for(var u=0;u<this.tiles[a].scaleFactors.length;u++){var c=this.tiles[a].scaleFactors[u];this.scale_factors.push(c),l.tileSizePerScaleFactor[c]={width:this.tiles[a].width,height:this.tiles[a].height||this.tiles[a].width}}}else if(n(l)){for(var h=Math.min(this.height,this.width),d=[256,512,1024],m=[],y=0;y<d.length;y++)d[y]<=h&&m.push(d[y]);m.length>0?l.tileSize=Math.max.apply(null,m):l.tileSize=h}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,l.levels=r(this),e.extend(!0,l,{width:l.levels[l.levels.length-1].width,height:l.levels[l.levels.length-1].height,tileSize:Math.max(l.height,l.width),tileOverlap:0,minLevel:0,maxLevel:l.levels.length-1}),this.levels=l.levels):e.console.error("Nothing in the info.json to construct image pyramids from");if(!l.maxLevel&&!this.emulateLegacyImagePyramid)if(!this.scale_factors)l.maxLevel=Number(Math.round(Math.log(Math.max(this.width,this.height),2)));else{var T=Math.max.apply(null,this.scale_factors);l.maxLevel=Math.round(Math.log(T)*Math.LOG2E)}if(this.sizes){var P=this.sizes.length;(P===l.maxLevel||P===l.maxLevel+1)&&(this.levelSizes=this.sizes.slice().sort((v,w)=>v.width-w.width),P===l.maxLevel&&this.levelSizes.push({width:this.width,height:this.height}))}e.TileSource.apply(this,[l])},e.extend(e.IIIFTileSource.prototype,e.TileSource.prototype,{supports:function(l,a){return l.protocol&&l.protocol==="http://iiif.io/api/image"||l["@context"]&&(l["@context"]==="http://library.stanford.edu/iiif/image-api/1.1/context.json"||l["@context"]==="http://iiif.io/api/image/1/context.json")||l.profile&&l.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")===0||l.identifier&&l.width&&l.height?!0:!!(l.documentElement&&l.documentElement.tagName==="info"&&l.documentElement.namespaceURI==="http://library.stanford.edu/iiif/image-api/ns/")},configure:function(l,a,u){if(e.isPlainObject(l)){if(!l["@context"])l["@context"]="http://iiif.io/api/image/1.0/context.json",l["@id"]=a.replace("/info.json",""),l.version=1;else{var h=l["@context"];if(Array.isArray(h)){for(var d=0;d<h.length;d++)if(typeof h[d]=="string"&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(h[d])||h[d]==="http://library.stanford.edu/iiif/image-api/1.1/context.json")){h=h[d];break}}switch(h){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":l.version=1;break;case"http://iiif.io/api/image/2/context.json":l.version=2;break;case"http://iiif.io/api/image/3/context.json":l.version=3;break;default:e.console.error("Data has a @context property which contains no known IIIF context URI.")}}if(l.preferredFormats){for(var m=0;m<l.preferredFormats.length;m++)if(i.imageFormatSupported(l.preferredFormats[m])){l.tileFormat=l.preferredFormats[m];break}}return l}else{var c=o(l);return c["@context"]="http://iiif.io/api/image/1.0/context.json",c["@id"]=a.replace("/info.xml",""),c.version=1,c}},getTileWidth:function(l){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileWidth.call(this,l);var a=Math.pow(2,this.maxLevel-l);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[a]?this.tileSizePerScaleFactor[a].width:this._tileWidth},getTileHeight:function(l){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileHeight.call(this,l);var a=Math.pow(2,this.maxLevel-l);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[a]?this.tileSizePerScaleFactor[a].height:this._tileHeight},getLevelScale:function(l){if(this.emulateLegacyImagePyramid){var a=NaN;return this.levels.length>0&&l>=this.minLevel&&l<=this.maxLevel&&(a=this.levels[l].width/this.levels[this.maxLevel].width),a}return e.TileSource.prototype.getLevelScale.call(this,l)},getNumTiles:function(l){if(this.emulateLegacyImagePyramid){var a=this.getLevelScale(l);return a?new e.Point(1,1):new e.Point(0,0)}if(this.levelSizes){var u=this.levelSizes[l],c=Math.ceil(u.width/this.getTileWidth(l)),h=Math.ceil(u.height/this.getTileHeight(l));return new e.Point(c,h)}else return e.TileSource.prototype.getNumTiles.call(this,l)},getTileAtPoint:function(l,a){if(this.emulateLegacyImagePyramid)return new e.Point(0,0);if(this.levelSizes){var u=a.x>=0&&a.x<=1&&a.y>=0&&a.y<=1/this.aspectRatio;e.console.assert(u,"[TileSource.getTileAtPoint] must be called with a valid point.");var c=this.levelSizes[l].width,h=a.x*c,d=a.y*c,m=Math.floor(h/this.getTileWidth(l)),y=Math.floor(d/this.getTileHeight(l));a.x>=1&&(m=this.getNumTiles(l).x-1);var T=1e-15;return a.y>=1/this.aspectRatio-T&&(y=this.getNumTiles(l).y-1),new e.Point(m,y)}return e.TileSource.prototype.getTileAtPoint.call(this,l,a)},getTileUrl:function(l,a,u){if(this.emulateLegacyImagePyramid){var c=null;return this.levels.length>0&&l>=this.minLevel&&l<=this.maxLevel&&(c=this.levels[l].url),c}var h="0",d=Math.pow(.5,this.maxLevel-l),m,y,T,P,v,w,S,R,k,F,N,B,j,U,X,q;return this.levelSizes?(m=this.levelSizes[l].width,y=this.levelSizes[l].height):(m=Math.ceil(this.width*d),y=Math.ceil(this.height*d)),T=this.getTileWidth(l),P=this.getTileHeight(l),v=Math.round(T/d),w=Math.round(P/d),this.version===1?X="native."+this.tileFormat:X="default."+this.tileFormat,m<T&&y<P?(this.version===2&&m===this.width?B="full":this.version===3&&m===this.width&&y===this.height?B="max":this.version===3?B=m+","+y:B=m+",",S="full"):(R=a*v,k=u*w,F=Math.min(v,this.width-R),N=Math.min(w,this.height-k),a===0&&u===0&&F===this.width&&N===this.height?S="full":S=[R,k,F,N].join(","),j=Math.min(T,m-a*T),U=Math.min(P,y-u*P),this.version===2&&j===this.width?B="full":this.version===3&&j===this.width&&U===this.height?B="max":this.version===3?B=j+","+U:B=j+","),q=[this._id,S,B,h,X].join("/"),q},__testonly__:{canBeTiled:n,constructLevels:r}});function n(l){var a=["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"],u=Array.isArray(l.profile)?l.profile[0]:l.profile,c=a.indexOf(u)!==-1,h=!1;return l.version===2&&l.profile.length>1&&l.profile[1].supports&&(h=l.profile[1].supports.indexOf("sizeByW")!==-1),l.version===3&&l.extraFeatures&&(h=l.extraFeatures.indexOf("sizeByWh")!==-1),!c||h}function r(l){for(var a=[],u=0;u<l.sizes.length;u++)a.push({url:l._id+"/full/"+l.sizes[u].width+","+(l.version===3?l.sizes[u].height:"")+"/0/default."+l.tileFormat,width:l.sizes[u].width,height:l.sizes[u].height});return a.sort(function(c,h){return c.width-h.width})}function o(l){if(!l||!l.documentElement)throw new Error(e.getString("Errors.Xml"));var a=l.documentElement,u=a.tagName,c=null;if(u==="info")try{return c={},s(a,c),c}catch(h){throw h instanceof Error?h:new Error(e.getString("Errors.IIIF"))}throw new Error(e.getString("Errors.IIIF"))}function s(l,a,u){var c,h;if(l.nodeType===3&&u)h=l.nodeValue.trim(),h.match(/^\d*$/)&&(h=Number(h)),a[u]?(e.isArray(a[u])||(a[u]=[a[u]]),a[u].push(h)):a[u]=h;else if(l.nodeType===1)for(c=0;c<l.childNodes.length;c++)s(l.childNodes[c],a,l.nodeName)}}(i),function(e){e.OsmTileSource=function(n,r,o,s,l){var a;e.isPlainObject(n)?a=n:a={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]},(!a.width||!a.height)&&(a.width=65572864,a.height=65572864),a.tileSize||(a.tileSize=256,a.tileOverlap=0),a.tilesUrl||(a.tilesUrl="http://tile.openstreetmap.org/"),a.minLevel=8,e.TileSource.apply(this,[a])},e.extend(e.OsmTileSource.prototype,e.TileSource.prototype,{supports:function(n,r){return n.type&&n.type==="openstreetmaps"},configure:function(n,r,o){return n},getTileUrl:function(n,r,o){return this.tilesUrl+(n-8)+"/"+r+"/"+o+".png"}})}(i),function(e){e.TmsTileSource=function(n,r,o,s,l){var a;e.isPlainObject(n)?a=n:a={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var u=Math.ceil(a.width/256)*256,c=Math.ceil(a.height/256)*256,h;u>c?h=u/256:h=c/256,a.maxLevel=Math.ceil(Math.log(h)/Math.log(2))-1,a.tileSize=256,a.width=u,a.height=c,e.TileSource.apply(this,[a])},e.extend(e.TmsTileSource.prototype,e.TileSource.prototype,{supports:function(n,r){return n.type&&n.type==="tiledmapservice"},configure:function(n,r,o){return n},getTileUrl:function(n,r,o){var s=this.getNumTiles(n).y-1;return this.tilesUrl+n+"/"+r+"/"+(s-o)+".png"}})}(i),function(e){e.ZoomifyTileSource=function(n){typeof n.tileSize>"u"&&(n.tileSize=256),typeof n.fileFormat>"u"&&(n.fileFormat="jpg",this.fileFormat=n.fileFormat);var r={x:n.width,y:n.height};for(n.imageSizes=[{x:n.width,y:n.height}],n.gridSize=[this._getGridSize(n.width,n.height,n.tileSize)];parseInt(r.x,10)>n.tileSize||parseInt(r.y,10)>n.tileSize;)r.x=Math.floor(r.x/2),r.y=Math.floor(r.y/2),n.imageSizes.push({x:r.x,y:r.y}),n.gridSize.push(this._getGridSize(r.x,r.y,n.tileSize));n.imageSizes.reverse(),n.gridSize.reverse(),n.minLevel=0,n.maxLevel=n.gridSize.length-1,i.TileSource.apply(this,[n])},e.extend(e.ZoomifyTileSource.prototype,e.TileSource.prototype,{_getGridSize:function(n,r,o){return{x:Math.ceil(n/o),y:Math.ceil(r/o)}},_calculateAbsoluteTileNumber:function(n,r,o){for(var s=0,l={},a=0;a<n;a++)l=this.gridSize[a],s+=l.x*l.y;return l=this.gridSize[n],s+=l.x*o+r,s},supports:function(n,r){return n.type&&n.type==="zoomifytileservice"},configure:function(n,r,o){return n},getTileUrl:function(n,r,o){var s=0,l=this._calculateAbsoluteTileNumber(n,r,o);return s=Math.floor(l/256),this.tilesUrl+"TileGroup"+s+"/"+n+"-"+r+"-"+o+"."+this.fileFormat}})}(i),function(e){e.LegacyTileSource=function(s){var l,a,u;e.isArray(s)&&(l={type:"legacy-image-pyramid",levels:s}),l.levels=n(l.levels),l.levels.length>0?(a=l.levels[l.levels.length-1].width,u=l.levels[l.levels.length-1].height):(a=0,u=0,e.console.error("No supported image formats found")),e.extend(!0,l,{width:a,height:u,tileSize:Math.max(u,a),tileOverlap:0,minLevel:0,maxLevel:l.levels.length>0?l.levels.length-1:0}),e.TileSource.apply(this,[l]),this.levels=l.levels},e.extend(e.LegacyTileSource.prototype,e.TileSource.prototype,{supports:function(s,l){return s.type&&s.type==="legacy-image-pyramid"||s.documentElement&&s.documentElement.getAttribute("type")==="legacy-image-pyramid"},configure:function(s,l,a){var u;return e.isPlainObject(s)?u=o(this,s):u=r(this,s),u},getLevelScale:function(s){var l=NaN;return this.levels.length>0&&s>=this.minLevel&&s<=this.maxLevel&&(l=this.levels[s].width/this.levels[this.maxLevel].width),l},getNumTiles:function(s){var l=this.getLevelScale(s);return l?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(s,l,a){var u=null;return this.levels.length>0&&s>=this.minLevel&&s<=this.maxLevel&&(u=this.levels[s].url),u}});function n(s){var l=[],a,u;for(u=0;u<s.length;u++)a=s[u],a.height&&a.width&&a.url?l.push({url:a.url,width:Number(a.width),height:Number(a.height)}):e.console.error("Unsupported image format: %s",a.url?a.url:"<no URL>");return l.sort(function(c,h){return c.height-h.height})}function r(s,l){if(!l||!l.documentElement)throw new Error(e.getString("Errors.Xml"));var a=l.documentElement,u=a.tagName,c=null,h=[],d,m;if(u==="image")try{for(c={type:a.getAttribute("type"),levels:[]},h=a.getElementsByTagName("level"),m=0;m<h.length;m++)d=h[m],c.levels.push({url:d.getAttribute("url"),width:parseInt(d.getAttribute("width"),10),height:parseInt(d.getAttribute("height"),10)});return o(s,c)}catch(y){throw y instanceof Error?y:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if(u==="collection")throw new Error("Legacy Image Pyramid Collections not yet supported.");if(u==="error")throw new Error("Error: "+l)}throw new Error("Unknown element "+u)}function o(s,l){return l.levels}}(i),function(e){e.ImageTileSource=function(n){n=e.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1},n),e.TileSource.apply(this,[n])},e.extend(e.ImageTileSource.prototype,e.TileSource.prototype,{supports:function(n,r){return n.type&&n.type==="image"},configure:function(n,r,o){return n},getImageInfo:function(n){var r=this._image=new Image,o=this;this.crossOriginPolicy&&(r.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(r.useCredentials=this.ajaxWithCredentials),e.addEvent(r,"load",function(){o.width=r.naturalWidth,o.height=r.naturalHeight,o.aspectRatio=o.width/o.height,o.dimensions=new e.Point(o.width,o.height),o._tileWidth=o.width,o._tileHeight=o.height,o.tileOverlap=0,o.minLevel=0,o.levels=o._buildLevels(),o.maxLevel=o.levels.length-1,o.ready=!0,o.raiseEvent("ready",{tileSource:o})}),e.addEvent(r,"error",function(){o.raiseEvent("open-failed",{message:"Error loading image at "+n,source:n})}),r.src=n},getLevelScale:function(n){var r=NaN;return n>=this.minLevel&&n<=this.maxLevel&&(r=this.levels[n].width/this.levels[this.maxLevel].width),r},getNumTiles:function(n){var r=this.getLevelScale(n);return r?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(n,r,o){var s=null;return n>=this.minLevel&&n<=this.maxLevel&&(s=this.levels[n].url),s},getContext2D:function(n,r,o){var s=null;return n>=this.minLevel&&n<=this.maxLevel&&(s=this.levels[n].context2D),s},destroy:function(n){this._freeupCanvasMemory(n)},_buildLevels:function(){var n=[{url:this._image.src,width:this._image.naturalWidth,height:this._image.naturalHeight}];if(!this.buildPyramid||!e.supportsCanvas)return delete this._image,n;var r=this._image.naturalWidth,o=this._image.naturalHeight,s=document.createElement("canvas"),l=s.getContext("2d");if(s.width=r,s.height=o,l.drawImage(this._image,0,0,r,o),n[0].context2D=l,delete this._image,e.isCanvasTainted(s))return n;for(;r>=2&&o>=2;){r=Math.floor(r/2),o=Math.floor(o/2);var a=document.createElement("canvas"),u=a.getContext("2d");a.width=r,a.height=o,u.drawImage(s,0,0,r,o),n.splice(0,0,{context2D:u,width:r,height:o}),s=a,l=u}return n},_freeupCanvasMemory:function(n){for(var r=0;r<this.levels.length;r++)this.levels[r].context2D&&(this.levels[r].context2D.canvas.height=0,this.levels[r].context2D.canvas.width=0,n&&n.raiseEvent("image-unloaded",{context2D:this.levels[r].context2D}))}})}(i),function(e){e.TileSourceCollection=function(n,r,o,s){e.console.error("TileSourceCollection is deprecated; use World instead")}}(i),function(e){e.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},e.Button=function(u){var c=this;e.EventSource.call(this),e.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null,userData:null},u),this.element=u.element||e.makeNeutralElement("div"),u.element||(this.imgRest=e.makeTransparentImage(this.srcRest),this.imgGroup=e.makeTransparentImage(this.srcGroup),this.imgHover=e.makeTransparentImage(this.srcHover),this.imgDown=e.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,e.setElementPointerEventsNone(this.imgRest),e.setElementPointerEventsNone(this.imgGroup),e.setElementPointerEventsNone(this.imgHover),e.setElementPointerEventsNone(this.imgDown),this.element.style.position="relative",e.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=e.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new e.MouseTracker({userData:"Button.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(h){h.insideElementPressed?(l(c,e.ButtonState.DOWN),c.raiseEvent("enter",{originalEvent:h.originalEvent})):h.buttonDownAny||l(c,e.ButtonState.HOVER)},focusHandler:function(h){c.tracker.enterHandler(h),c.raiseEvent("focus",{originalEvent:h.originalEvent})},leaveHandler:function(h){a(c,e.ButtonState.GROUP),h.insideElementPressed&&c.raiseEvent("exit",{originalEvent:h.originalEvent})},blurHandler:function(h){c.tracker.leaveHandler(h),c.raiseEvent("blur",{originalEvent:h.originalEvent})},pressHandler:function(h){l(c,e.ButtonState.DOWN),c.raiseEvent("press",{originalEvent:h.originalEvent})},releaseHandler:function(h){h.insideElementPressed&&h.insideElementReleased?(a(c,e.ButtonState.HOVER),c.raiseEvent("release",{originalEvent:h.originalEvent})):h.insideElementPressed?a(c,e.ButtonState.GROUP):l(c,e.ButtonState.HOVER)},clickHandler:function(h){h.quick&&c.raiseEvent("click",{originalEvent:h.originalEvent})},keyHandler:function(h){h.keyCode===13?(c.raiseEvent("click",{originalEvent:h.originalEvent}),c.raiseEvent("release",{originalEvent:h.originalEvent}),h.preventDefault=!0):h.preventDefault=!1}}),a(this,e.ButtonState.REST)},e.extend(e.Button.prototype,e.EventSource.prototype,{notifyGroupEnter:function(){l(this,e.ButtonState.GROUP)},notifyGroupExit:function(){a(this,e.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,this.tracker.setTracking(!1),e.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,this.tracker.setTracking(!0),e.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()},destroy:function(){this.imgRest&&(this.element.removeChild(this.imgRest),this.imgRest=null),this.imgGroup&&(this.element.removeChild(this.imgGroup),this.imgGroup=null),this.imgHover&&(this.element.removeChild(this.imgHover),this.imgHover=null),this.imgDown&&(this.element.removeChild(this.imgDown),this.imgDown=null),this.removeAllHandlers(),this.tracker.destroy(),this.element=null}});function n(u){e.requestAnimationFrame(function(){r(u)})}function r(u){var c,h,d;u.shouldFade&&(c=e.now(),h=c-u.fadeBeginTime,d=1-h/u.fadeLength,d=Math.min(1,d),d=Math.max(0,d),u.imgGroup&&e.setElementOpacity(u.imgGroup,d,!0),d>0&&n(u))}function o(u){u.shouldFade=!0,u.fadeBeginTime=e.now()+u.fadeDelay,window.setTimeout(function(){n(u)},u.fadeDelay)}function s(u){u.shouldFade=!1,u.imgGroup&&e.setElementOpacity(u.imgGroup,1,!0)}function l(u,c){u.element.disabled||(c>=e.ButtonState.GROUP&&u.currentState===e.ButtonState.REST&&(s(u),u.currentState=e.ButtonState.GROUP),c>=e.ButtonState.HOVER&&u.currentState===e.ButtonState.GROUP&&(u.imgHover&&(u.imgHover.style.visibility=""),u.currentState=e.ButtonState.HOVER),c>=e.ButtonState.DOWN&&u.currentState===e.ButtonState.HOVER&&(u.imgDown&&(u.imgDown.style.visibility=""),u.currentState=e.ButtonState.DOWN))}function a(u,c){u.element.disabled||(c<=e.ButtonState.HOVER&&u.currentState===e.ButtonState.DOWN&&(u.imgDown&&(u.imgDown.style.visibility="hidden"),u.currentState=e.ButtonState.HOVER),c<=e.ButtonState.GROUP&&u.currentState===e.ButtonState.HOVER&&(u.imgHover&&(u.imgHover.style.visibility="hidden"),u.currentState=e.ButtonState.GROUP),c<=e.ButtonState.REST&&u.currentState===e.ButtonState.GROUP&&(o(u),u.currentState=e.ButtonState.REST))}}(i),function(e){e.ButtonGroup=function(n){e.extend(!0,this,{buttons:[],clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},n);var r=this.buttons.concat([]),o=this,s;if(this.element=n.element||e.makeNeutralElement("div"),!n.group)for(this.element.style.display="inline-block",s=0;s<r.length;s++)this.element.appendChild(r[s].element);e.setElementTouchActionNone(this.element),this.tracker=new e.MouseTracker({userData:"ButtonGroup.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(l){var a;for(a=0;a<o.buttons.length;a++)o.buttons[a].notifyGroupEnter()},leaveHandler:function(l){var a;if(!l.insideElementPressed)for(a=0;a<o.buttons.length;a++)o.buttons[a].notifyGroupExit()}})},e.ButtonGroup.prototype={addButton:function(n){this.buttons.push(n),this.element.appendChild(n.element)},emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateLeave:function(){this.tracker.leaveHandler({eventSource:this.tracker})},destroy:function(){for(;this.buttons.length;){var n=this.buttons.pop();this.element.removeChild(n.element),n.destroy()}this.tracker.destroy(),this.element=null}}}(i),function(e){e.Rect=function(n,r,o,s,l){this.x=typeof n=="number"?n:0,this.y=typeof r=="number"?r:0,this.width=typeof o=="number"?o:0,this.height=typeof s=="number"?s:0,this.degrees=typeof l=="number"?l:0,this.degrees=e.positiveModulo(this.degrees,360);var a,u;this.degrees>=270?(a=this.getTopRight(),this.x=a.x,this.y=a.y,u=this.height,this.height=this.width,this.width=u,this.degrees-=270):this.degrees>=180?(a=this.getBottomRight(),this.x=a.x,this.y=a.y,this.degrees-=180):this.degrees>=90&&(a=this.getBottomLeft(),this.x=a.x,this.y=a.y,u=this.height,this.height=this.width,this.width=u,this.degrees-=90)},e.Rect.fromSummits=function(n,r,o){var s=n.distanceTo(r),l=n.distanceTo(o),a=r.minus(n),u=Math.atan(a.y/a.x);return a.x<0?u+=Math.PI:a.y<0&&(u+=2*Math.PI),new e.Rect(n.x,n.y,s,l,u/Math.PI*180)},e.Rect.prototype={clone:function(){return new e.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new e.Point(this.x,this.y)},getBottomRight:function(){return new e.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new e.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new e.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new e.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new e.Point(this.width,this.height)},equals:function(n){return n instanceof e.Rect&&this.x===n.x&&this.y===n.y&&this.width===n.width&&this.height===n.height&&this.degrees===n.degrees},times:function(n){return new e.Rect(this.x*n,this.y*n,this.width*n,this.height*n,this.degrees)},translate:function(n){return new e.Rect(this.x+n.x,this.y+n.y,this.width,this.height,this.degrees)},union:function(n){var r=this.getBoundingBox(),o=n.getBoundingBox(),s=Math.min(r.x,o.x),l=Math.min(r.y,o.y),a=Math.max(r.x+r.width,o.x+o.width),u=Math.max(r.y+r.height,o.y+o.height);return new e.Rect(s,l,a-s,u-l)},intersection:function(n){var r=1e-10,o=[],s=this.getTopLeft();n.containsPoint(s,r)&&o.push(s);var l=this.getTopRight();n.containsPoint(l,r)&&o.push(l);var a=this.getBottomLeft();n.containsPoint(a,r)&&o.push(a);var u=this.getBottomRight();n.containsPoint(u,r)&&o.push(u);var c=n.getTopLeft();this.containsPoint(c,r)&&o.push(c);var h=n.getTopRight();this.containsPoint(h,r)&&o.push(h);var d=n.getBottomLeft();this.containsPoint(d,r)&&o.push(d);var m=n.getBottomRight();this.containsPoint(m,r)&&o.push(m);for(var y=this._getSegments(),T=n._getSegments(),P=0;P<y.length;P++)for(var v=y[P],w=0;w<T.length;w++){var S=T[w],R=k(v[0],v[1],S[0],S[1]);R&&o.push(R)}function k(q,re,we,Te){var Ee=re.minus(q),xe=Te.minus(we),A=-xe.x*Ee.y+Ee.x*xe.y;if(A===0)return null;var G=(Ee.x*(q.y-we.y)-Ee.y*(q.x-we.x))/A,Z=(xe.x*(q.y-we.y)-xe.y*(q.x-we.x))/A;return-r<=G&&G<=1-r&&-r<=Z&&Z<=1-r?new e.Point(q.x+Z*Ee.x,q.y+Z*Ee.y):null}if(o.length===0)return null;for(var F=o[0].x,N=o[0].x,B=o[0].y,j=o[0].y,U=1;U<o.length;U++){var X=o[U];X.x<F&&(F=X.x),X.x>N&&(N=X.x),X.y<B&&(B=X.y),X.y>j&&(j=X.y)}return new e.Rect(F,B,N-F,j-B)},_getSegments:function(){var n=this.getTopLeft(),r=this.getTopRight(),o=this.getBottomLeft(),s=this.getBottomRight();return[[n,r],[r,s],[s,o],[o,n]]},rotate:function(n,r){if(n=e.positiveModulo(n,360),n===0)return this.clone();r=r||this.getCenter();var o=this.getTopLeft().rotate(n,r),s=this.getTopRight().rotate(n,r),l=s.minus(o);l=l.apply(function(u){var c=1e-15;return Math.abs(u)<c?0:u});var a=Math.atan(l.y/l.x);return l.x<0?a+=Math.PI:l.y<0&&(a+=2*Math.PI),new e.Rect(o.x,o.y,this.width,this.height,a/Math.PI*180)},getBoundingBox:function(){if(this.degrees===0)return this.clone();var n=this.getTopLeft(),r=this.getTopRight(),o=this.getBottomLeft(),s=this.getBottomRight(),l=Math.min(n.x,r.x,o.x,s.x),a=Math.max(n.x,r.x,o.x,s.x),u=Math.min(n.y,r.y,o.y,s.y),c=Math.max(n.y,r.y,o.y,s.y);return new e.Rect(l,u,a-l,c-u)},getIntegerBoundingBox:function(){var n=this.getBoundingBox(),r=Math.floor(n.x),o=Math.floor(n.y),s=Math.ceil(n.width+n.x-r),l=Math.ceil(n.height+n.y-o);return new e.Rect(r,o,s,l)},containsPoint:function(n,r){r=r||0;var o=this.getTopLeft(),s=this.getTopRight(),l=this.getBottomLeft(),a=s.minus(o),u=l.minus(o);return(n.x-o.x)*a.x+(n.y-o.y)*a.y>=-r&&(n.x-s.x)*a.x+(n.y-s.y)*a.y<=r&&(n.x-o.x)*u.x+(n.y-o.y)*u.y>=-r&&(n.x-l.x)*u.x+(n.y-l.y)*u.y<=r},toString:function(){return"["+Math.round(this.x*100)/100+", "+Math.round(this.y*100)/100+", "+Math.round(this.width*100)/100+"x"+Math.round(this.height*100)/100+", "+Math.round(this.degrees*100)/100+"deg]"}}}(i),function(e){var n={};e.ReferenceStrip=function(d){var m=this,y=d.viewer,T=e.getElementSize(y.element),P,v,w;for(d.id||(d.id="referencestrip-"+e.now(),this.element=e.makeNeutralElement("div"),this.element.id=d.id,this.element.className="referencestrip"),d=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.referenceStripSizeRatio,position:e.DEFAULT_SETTINGS.referenceStripPosition,scroll:e.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold},d,{element:this.element}),e.extend(this,d),n[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,this.element.tabIndex=0,v=this.element.style,v.marginTop="0px",v.marginRight="0px",v.marginBottom="0px",v.marginLeft="0px",v.left="0px",v.bottom="0px",v.border="0px",v.background="#000",v.position="relative",e.setElementTouchActionNone(this.element),e.setElementOpacity(this.element,.8),this.viewer=y,this.tracker=new e.MouseTracker({userData:"ReferenceStrip.tracker",element:this.element,clickHandler:e.delegate(this,r),dragHandler:e.delegate(this,o),scrollHandler:e.delegate(this,s),enterHandler:e.delegate(this,a),leaveHandler:e.delegate(this,u),keyDownHandler:e.delegate(this,c),keyHandler:e.delegate(this,h),preProcessEventHandler:function(S){S.eventType==="wheel"&&(S.preventDefault=!0)}}),d.width&&d.height?(this.element.style.width=d.width+"px",this.element.style.height=d.height+"px",y.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):d.scroll==="horizontal"?(this.element.style.width=T.x*d.sizeRatio*y.tileSources.length+12*y.tileSources.length+"px",this.element.style.height=T.y*d.sizeRatio+"px",y.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=T.y*d.sizeRatio*y.tileSources.length+12*y.tileSources.length+"px",this.element.style.width=T.x*d.sizeRatio+"px",y.addControl(this.element,{anchor:e.ControlAnchor.TOP_LEFT})),this.panelWidth=T.x*this.sizeRatio+8,this.panelHeight=T.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},w=0;w<y.tileSources.length;w++)P=e.makeNeutralElement("div"),P.id=this.element.id+"-"+w,P.style.width=m.panelWidth+"px",P.style.height=m.panelHeight+"px",P.style.display="inline",P.style.float="left",P.style.cssFloat="left",P.style.padding="2px",e.setElementTouchActionNone(P),e.setElementPointerEventsNone(P),this.element.appendChild(P),P.activePanel=!1,this.panels.push(P);l(this,this.scroll==="vertical"?T.y:T.x,0),this.setFocus(0)},e.ReferenceStrip.prototype={setFocus:function(d){var m=this.element.querySelector("#"+this.element.id+"-"+d),y=e.getElementSize(this.viewer.canvas),T=Number(this.element.style.width.replace("px","")),P=Number(this.element.style.height.replace("px","")),v=-Number(this.element.style.marginLeft.replace("px","")),w=-Number(this.element.style.marginTop.replace("px","")),S;this.currentSelected!==m&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=m,this.currentSelected.style.background="#999",this.scroll==="horizontal"?(S=Number(d)*(this.panelWidth+3),S>v+y.x-this.panelWidth?(S=Math.min(S,T-y.x),this.element.style.marginLeft=-S+"px",l(this,y.x,-S)):S<v&&(S=Math.max(0,S-y.x/2),this.element.style.marginLeft=-S+"px",l(this,y.x,-S))):(S=Number(d)*(this.panelHeight+3),S>w+y.y-this.panelHeight?(S=Math.min(S,P-y.y),this.element.style.marginTop=-S+"px",l(this,y.y,-S)):S<w&&(S=Math.max(0,S-y.y/2),this.element.style.marginTop=-S+"px",l(this,y.y,-S))),this.currentPage=d,a.call(this,{eventSource:this.tracker}))},update:function(){return!!n[this.id].animating},destroy:function(){if(this.miniViewers)for(var d in this.miniViewers)this.miniViewers[d].destroy();this.tracker.destroy(),this.element&&this.viewer.removeControl(this.element)}};function r(d){if(d.quick){var m;this.scroll==="horizontal"?m=Math.floor(d.position.x/(this.panelWidth+4)):m=Math.floor(d.position.y/this.panelHeight),this.viewer.goToPage(m)}this.element.focus()}function o(d){if(this.dragging=!0,this.element){var m=Number(this.element.style.marginLeft.replace("px","")),y=Number(this.element.style.marginTop.replace("px","")),T=Number(this.element.style.width.replace("px","")),P=Number(this.element.style.height.replace("px","")),v=e.getElementSize(this.viewer.canvas);this.scroll==="horizontal"?-d.delta.x>0?m>-(T-v.x)&&(this.element.style.marginLeft=m+d.delta.x*2+"px",l(this,v.x,m+d.delta.x*2)):-d.delta.x<0&&m<0&&(this.element.style.marginLeft=m+d.delta.x*2+"px",l(this,v.x,m+d.delta.x*2)):-d.delta.y>0?y>-(P-v.y)&&(this.element.style.marginTop=y+d.delta.y*2+"px",l(this,v.y,y+d.delta.y*2)):-d.delta.y<0&&y<0&&(this.element.style.marginTop=y+d.delta.y*2+"px",l(this,v.y,y+d.delta.y*2))}}function s(d){if(this.element){var m=Number(this.element.style.marginLeft.replace("px","")),y=Number(this.element.style.marginTop.replace("px","")),T=Number(this.element.style.width.replace("px","")),P=Number(this.element.style.height.replace("px","")),v=e.getElementSize(this.viewer.canvas);this.scroll==="horizontal"?d.scroll>0?m>-(T-v.x)&&(this.element.style.marginLeft=m-d.scroll*60+"px",l(this,v.x,m-d.scroll*60)):d.scroll<0&&m<0&&(this.element.style.marginLeft=m-d.scroll*60+"px",l(this,v.x,m-d.scroll*60)):d.scroll<0?y>v.y-P&&(this.element.style.marginTop=y+d.scroll*60+"px",l(this,v.y,y+d.scroll*60)):d.scroll>0&&y<0&&(this.element.style.marginTop=y+d.scroll*60+"px",l(this,v.y,y+d.scroll*60)),d.preventDefault=!0}}function l(d,m,y){var T,P,v,w,S,R;for(d.scroll==="horizontal"?T=d.panelWidth:T=d.panelHeight,P=Math.ceil(m/T)+5,v=Math.ceil((Math.abs(y)+m)/T)+1,P=v-P,P=P<0?0:P,S=P;S<v&&S<d.panels.length;S++)if(R=d.panels[S],!R.activePanel){var k,F=d.viewer.tileSources[S];F.referenceStripThumbnailUrl?k={type:"image",url:F.referenceStripThumbnailUrl}:k=F,w=new e.Viewer({id:R.id,tileSources:[k],element:R,navigatorSizeRatio:d.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:d.viewer.loadTilesWithAjax,ajaxHeaders:d.viewer.ajaxHeaders,drawer:"canvas"}),e.setElementPointerEventsNone(w.canvas),e.setElementPointerEventsNone(w.container),w.innerTracker.setTracking(!1),w.outerTracker.setTracking(!1),d.miniViewers[R.id]=w,R.activePanel=!0}}function a(d){var m=d.eventSource.element;this.scroll==="horizontal"?m.style.marginBottom="0px":m.style.marginLeft="0px"}function u(d){var m=d.eventSource.element;this.scroll==="horizontal"?m.style.marginBottom="-"+e.getElementSize(m).y/2+"px":m.style.marginLeft="-"+e.getElementSize(m).x/2+"px"}function c(d){if(!d.ctrl&&!d.alt&&!d.meta)switch(d.keyCode){case 38:s.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),d.preventDefault=!0;break;case 40:s.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),d.preventDefault=!0;break;case 37:s.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),d.preventDefault=!0;break;case 39:s.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),d.preventDefault=!0;break;default:d.preventDefault=!1;break}else d.preventDefault=!1}function h(d){if(!d.ctrl&&!d.alt&&!d.meta)switch(d.keyCode){case 61:s.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),d.preventDefault=!0;break;case 45:s.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),d.preventDefault=!0;break;case 48:case 119:case 87:s.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),d.preventDefault=!0;break;case 115:case 83:s.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),d.preventDefault=!0;break;case 97:s.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),d.preventDefault=!0;break;case 100:s.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),d.preventDefault=!0;break;default:d.preventDefault=!1;break}else d.preventDefault=!1}}(i),function(e){e.DisplayRect=function(n,r,o,s,l,a){e.Rect.apply(this,[n,r,o,s]),this.minLevel=l,this.maxLevel=a},e.extend(e.DisplayRect.prototype,e.Rect.prototype)}(i),function(e){e.Spring=function(r){var o=arguments;typeof r!="object"&&(r={initial:o.length&&typeof o[0]=="number"?o[0]:void 0,springStiffness:o.length>1?o[1].springStiffness:5,animationTime:o.length>1?o[1].animationTime:1.5}),e.console.assert(typeof r.springStiffness=="number"&&r.springStiffness!==0,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),e.console.assert(typeof r.animationTime=="number"&&r.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),r.exponential&&(this._exponential=!0,delete r.exponential),e.extend(!0,this,r),this.current={value:typeof this.initial=="number"?this.initial:this._exponential?0:1,time:e.now()},e.console.assert(!this._exponential||this.current.value!==0,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},e.Spring.prototype={resetTo:function(r){e.console.assert(!this._exponential||r!==0,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=r,this.start.time=this.target.time=this.current.time=e.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(r){e.console.assert(!this._exponential||r!==0,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=r,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(r){this.start.value+=r,this.target.value+=r,this._exponential&&(e.console.assert(this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(r){this._exponential=r,this._exponential&&(e.console.assert(this.current.value!==0&&this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){this.current.time=e.now();let r,o;if(this._exponential?(r=this.start._logValue,o=this.target._logValue):(r=this.start.value,o=this.target.value),this.current.time>=this.target.time)this.current.value=this.target.value;else{let s=r+(o-r)*n(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time));this._exponential?this.current.value=Math.exp(s):this.current.value=s}return this.current.value!==this.target.value},isAtTargetValue:function(){return this.current.value===this.target.value}};function n(r,o){return(1-Math.exp(r*-o))/(1-Math.exp(-r))}}(i),function(e){e.ImageJob=function(r){e.extend(!0,this,{timeout:e.DEFAULT_SETTINGS.timeout,jobId:null,tries:0},r),this.data=null,this.userData={},this.errorMsg=null},e.ImageJob.prototype={start:function(){this.tries++;var r=this,o=this.abort;this.jobId=window.setTimeout(function(){r.finish(null,null,"Image load exceeded timeout ("+r.timeout+" ms)")},this.timeout),this.abort=function(){r.source.downloadTileAbort(r),typeof o=="function"&&o()},this.source.downloadTileStart(this)},finish:function(r,o,s){this.data=r,this.request=o,this.errorMsg=s,this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},e.ImageLoader=function(r){e.extend(!0,this,{jobLimit:e.DEFAULT_SETTINGS.imageLoaderLimit,timeout:e.DEFAULT_SETTINGS.timeout,jobQueue:[],failedTiles:[],jobsInProgress:0},r)},e.ImageLoader.prototype={addJob:function(r){if(!r.source){e.console.error("ImageLoader.prototype.addJob() requires [options.source]. TileSource since new API defines how images are fetched. Creating a dummy TileSource.");var o=e.TileSource.prototype;r.source={downloadTileStart:o.downloadTileStart,downloadTileAbort:o.downloadTileAbort}}var s=this,l=function(c){n(s,c,r.callback)},a={src:r.src,tile:r.tile||{},source:r.source,loadWithAjax:r.loadWithAjax,ajaxHeaders:r.loadWithAjax?r.ajaxHeaders:null,crossOriginPolicy:r.crossOriginPolicy,ajaxWithCredentials:r.ajaxWithCredentials,postData:r.postData,callback:l,abort:r.abort,timeout:this.timeout},u=new e.ImageJob(a);!this.jobLimit||this.jobsInProgress<this.jobLimit?(u.start(),this.jobsInProgress++):this.jobQueue.push(u)},clear:function(){for(var r=0;r<this.jobQueue.length;r++){var o=this.jobQueue[r];typeof o.abort=="function"&&o.abort()}this.jobQueue=[]}};function n(r,o,s){o.errorMsg!==""&&(o.data===null||o.data===void 0)&&o.tries<1+r.tileRetryMax&&r.failedTiles.push(o);var l;r.jobsInProgress--,(!r.jobLimit||r.jobsInProgress<r.jobLimit)&&r.jobQueue.length>0&&(l=r.jobQueue.shift(),l.start(),r.jobsInProgress++),r.tileRetryMax>0&&r.jobQueue.length===0&&(!r.jobLimit||r.jobsInProgress<r.jobLimit)&&r.failedTiles.length>0&&(l=r.failedTiles.shift(),setTimeout(function(){l.start()},r.tileRetryDelay),r.jobsInProgress++),s(o.data,o.errorMsg,o.request)}}(i),function(e){e.Tile=function(n,r,o,s,l,a,u,c,h,d,m,y){this.level=n,this.x=r,this.y=o,this.bounds=s,this.positionedBounds=new i.Rect(s.x,s.y,s.width,s.height),this.sourceBounds=d,this.exists=l,this._url=a,this.postData=m,this.context2D=u,this.loadWithAjax=c,this.ajaxHeaders=h,y===void 0&&(e.console.warn("Tile constructor needs 'cacheKey' variable: creation tile cache in Tile class is deprecated. TileSource.prototype.getTileHashKey will be used."),y=e.TileSource.prototype.getTileHashKey(n,r,o,a,h,m)),this.cacheKey=y,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.style=null,this.position=null,this.size=null,this.flipped=!1,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.hasTransparency=!1,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},e.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return console.warn("Tile.prototype._hasTransparencyChannel() has been deprecated and will be removed in the future. Use TileSource.prototype.hasTransparency() instead."),!!this.context2D||this.getUrl().match(".png")},get image(){return e.console.error("[Tile.image] property has been deprecated. Use [Tile.prototype.getImage] instead."),this.getImage()},get url(){return e.console.error("[Tile.url] property has been deprecated. Use [Tile.prototype.getUrl] instead."),this.getUrl()},getImage:function(){return this.cacheImageRecord.getImage()},getUrl:function(){return typeof this._url=="function"?this._url():this._url},getCanvasContext:function(){return this.context2D||this.cacheImageRecord&&this.cacheImageRecord.getRenderedContext()},getScaleForEdgeSmoothing:function(){var n;if(this.cacheImageRecord)n=this.cacheImageRecord.getRenderedContext();else if(this.context2D)n=this.context2D;else return e.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;return n.canvas.width/(this.size.x*e.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(n,r,o){var s=Math.max(1,Math.ceil((o.x-r.x)/2)),l=Math.max(1,Math.ceil((o.y-r.y)/2));return new e.Point(s,l).minus(this.position.times(e.pixelDensityRatio).times(n||1).apply(function(a){return a%1}))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(i),function(e){e.OverlayPlacement=e.Placement,e.OverlayRotationMode=e.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),e.Overlay=function(n,r,o){var s;e.isPlainObject(n)?s=n:s={element:n,location:r,placement:o},this.element=s.element,this.element.innerHTML="<div>"+this.element.innerHTML+"</div>",this.style=s.element.style,this._init(s)},e.Overlay.prototype={_init:function(n){this.location=n.location,this.placement=n.placement===void 0?e.Placement.TOP_LEFT:n.placement,this.onDraw=n.onDraw,this.checkResize=n.checkResize===void 0?!0:n.checkResize,this.width=n.width===void 0?null:n.width,this.height=n.height===void 0?null:n.height,this.rotationMode=n.rotationMode||e.OverlayRotationMode.EXACT,this.location instanceof e.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=e.Placement.TOP_LEFT),this.scales=this.width!==null&&this.height!==null,this.bounds=new e.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(n,r){var o=e.Placement.properties[this.placement];o&&(o.isHorizontallyCentered?n.x-=r.x/2:o.isRight&&(n.x-=r.x),o.isVerticallyCentered?n.y-=r.y/2:o.isBottom&&(n.y-=r.y))},destroy:function(){var n=this.element,r=this.style;n.parentNode&&(n.parentNode.removeChild(n),n.prevElementParent&&(r.display="none",document.body.appendChild(n))),this.onDraw=null,r.top="",r.left="",r.position="",this.width!==null&&(r.width=""),this.height!==null&&(r.height="");var o=e.getCssPropertyWithVendorPrefix("transformOrigin"),s=e.getCssPropertyWithVendorPrefix("transform");o&&s&&(r[o]="",r[s]="")},drawHTML:function(n,r){var o=this.element;o.parentNode!==n&&(o.prevElementParent=o.parentNode,o.prevNextSibling=o.nextSibling,n.appendChild(o),this.style.position="absolute",this.size=e.getElementSize(o));var s=this._getOverlayPositionAndSize(r),l=s.position,a=this.size=s.size,u="";r.overlayPreserveContentDirection&&(u=r.flipped?" scaleX(-1)":" scaleX(1)");var c=r.flipped?-s.rotate:s.rotate,h=r.flipped?" scaleX(-1)":"";if(this.onDraw)this.onDraw(l,a,this.element);else{var d=this.style,m=o.firstChild,y=m.style;d.left=l.x+"px",d.top=l.y+"px",this.width!==null&&(d.width=a.x+"px"),this.height!==null&&(d.height=a.y+"px");var T=e.getCssPropertyWithVendorPrefix("transformOrigin"),P=e.getCssPropertyWithVendorPrefix("transform");T&&P&&(c&&!r.flipped?(y[P]="",d[T]=this._getTransformOrigin(),d[P]="rotate("+c+"deg)"):!c&&r.flipped?(y[P]=u,d[T]=this._getTransformOrigin(),d[P]=h):c&&r.flipped?(y[P]=u,d[T]=this._getTransformOrigin(),d[P]="rotate("+c+"deg)"+h):(y[P]="",d[T]="",d[P]="")),d.display="block"}},_getOverlayPositionAndSize:function(n){var r=n.pixelFromPoint(this.location,!0),o=this._getSizeInPixels(n);this.adjust(r,o);var s=0;if(n.getRotation(!0)&&this.rotationMode!==e.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX&&this.width!==null&&this.height!==null){var l=new e.Rect(r.x,r.y,o.x,o.y),a=this._getBoundingBox(l,n.getRotation(!0));r=a.getTopLeft(),o=a.getSize()}else s=n.getRotation(!0);return n.flipped&&(r.x=n.getContainerSize().x-r.x),{position:r,size:o,rotate:s}},_getSizeInPixels:function(n){var r=this.size.x,o=this.size.y;if(this.width!==null||this.height!==null){var s=n.deltaPixelsFromPointsNoRotate(new e.Point(this.width||0,this.height||0),!0);this.width!==null&&(r=s.x),this.height!==null&&(o=s.y)}if(this.checkResize&&(this.width===null||this.height===null)){var l=this.size=e.getElementSize(this.element);this.width===null&&(r=l.x),this.height===null&&(o=l.y)}return new e.Point(r,o)},_getBoundingBox:function(n,r){var o=this._getPlacementPoint(n);return n.rotate(r,o).getBoundingBox()},_getPlacementPoint:function(n){var r=new e.Point(n.x,n.y),o=e.Placement.properties[this.placement];return o&&(o.isHorizontallyCentered?r.x+=n.width/2:o.isRight&&(r.x+=n.width),o.isVerticallyCentered?r.y+=n.height/2:o.isBottom&&(r.y+=n.height)),r},_getTransformOrigin:function(){var n="",r=e.Placement.properties[this.placement];return r&&(r.isLeft?n="left":r.isRight&&(n="right"),r.isTop?n+=" top":r.isBottom&&(n+=" bottom")),n},update:function(n,r){var o=e.isPlainObject(n)?n:{location:n,placement:r};this._init({location:o.location||this.location,placement:o.placement!==void 0?o.placement:this.placement,onDraw:o.onDraw||this.onDraw,checkResize:o.checkResize||this.checkResize,width:o.width!==void 0?o.width:this.width,height:o.height!==void 0?o.height:this.height,rotationMode:o.rotationMode||this.rotationMode})},getBounds:function(n){e.console.assert(n,"A viewport must now be passed to Overlay.getBounds.");var r=this.width,o=this.height;if(r===null||o===null){var s=n.deltaPointsFromPixelsNoRotate(this.size,!0);r===null&&(r=s.x),o===null&&(o=s.y)}var l=this.location.clone();return this.adjust(l,new e.Point(r,o)),this._adjustBoundsForRotation(n,new e.Rect(l.x,l.y,r,o))},_adjustBoundsForRotation:function(n,r){if(!n||n.getRotation(!0)===0||this.rotationMode===e.OverlayRotationMode.EXACT)return r;if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX){if(this.width===null||this.height===null)return r;var o=this._getOverlayPositionAndSize(n);return n.viewerElementToViewportRectangle(new e.Rect(o.position.x,o.position.y,o.size.x,o.size.y))}return r.rotate(-n.getRotation(!0),this._getPlacementPoint(r))}}}(i),function(e){const n=e;n.DrawerBase=class{constructor(o){e.console.assert(o.viewer,"[Drawer] options.viewer is required"),e.console.assert(o.viewport,"[Drawer] options.viewport is required"),e.console.assert(o.element,"[Drawer] options.element is required"),this.viewer=o.viewer,this.viewport=o.viewport,this.debugGridColor=typeof o.debugGridColor=="string"?[o.debugGridColor]:o.debugGridColor||e.DEFAULT_SETTINGS.debugGridColor,this.options=o.options||{},this.container=e.getElement(o.element),this._renderingTarget=this._createDrawingElement(),this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",this.canvas.style.left="0",e.setElementOpacity(this.canvas,this.viewer.opacity,!0),e.setElementPointerEventsNone(this.canvas),e.setElementTouchActionNone(this.canvas),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._checkForAPIOverrides()}get canvas(){return this._renderingTarget}get element(){return e.console.error("Drawer.element is deprecated. Use Drawer.container instead."),this.container}getType(){e.console.error("Drawer.getType must be implemented by child class")}static isSupported(){e.console.error("Drawer.isSupported must be implemented by child class")}_createDrawingElement(){return e.console.error("Drawer._createDrawingElement must be implemented by child class"),null}draw(o){e.console.error("Drawer.draw must be implemented by child class")}canRotate(){e.console.error("Drawer.canRotate must be implemented by child class")}destroy(){e.console.error("Drawer.destroy must be implemented by child class")}minimumOverlapRequired(o){return!1}setImageSmoothingEnabled(o){e.console.error("Drawer.setImageSmoothingEnabled must be implemented by child class")}drawDebuggingRect(o){e.console.warn("[drawer].drawDebuggingRect is not implemented by this drawer")}clear(){e.console.warn("[drawer].clear() is deprecated. The drawer is responsible for clearing itself as needed before drawing tiles.")}_checkForAPIOverrides(){if(this._createDrawingElement===e.DrawerBase.prototype._createDrawingElement)throw new Error("[drawer]._createDrawingElement must be implemented by child class");if(this.draw===e.DrawerBase.prototype.draw)throw new Error("[drawer].draw must be implemented by child class");if(this.canRotate===e.DrawerBase.prototype.canRotate)throw new Error("[drawer].canRotate must be implemented by child class");if(this.destroy===e.DrawerBase.prototype.destroy)throw new Error("[drawer].destroy must be implemented by child class");if(this.setImageSmoothingEnabled===e.DrawerBase.prototype.setImageSmoothingEnabled)throw new Error("[drawer].setImageSmoothingEnabled must be implemented by child class")}viewportToDrawerRectangle(o){var s=this.viewport.pixelFromPointNoRotate(o.getTopLeft(),!0),l=this.viewport.deltaPixelsFromPointsNoRotate(o.getSize(),!0);return new e.Rect(s.x*e.pixelDensityRatio,s.y*e.pixelDensityRatio,l.x*e.pixelDensityRatio,l.y*e.pixelDensityRatio)}viewportCoordToDrawerCoord(o){var s=this.viewport.pixelFromPointNoRotate(o,!0);return new e.Point(s.x*e.pixelDensityRatio,s.y*e.pixelDensityRatio)}_calculateCanvasSize(){var o=e.pixelDensityRatio,s=this.viewport.getContainerSize();return new n.Point(Math.round(s.x*o),Math.round(s.y*o))}_raiseTiledImageDrawnEvent(o,s){this.viewer&&this.viewer.raiseEvent("tiled-image-drawn",{tiledImage:o,tiles:s})}_raiseDrawerErrorEvent(o,s){this.viewer&&this.viewer.raiseEvent("drawer-error",{tiledImage:o,drawer:this,error:s})}}}(i),function(e){const n=e;class r extends n.DrawerBase{constructor(s){super(s),this.viewer.rejectEventHandler("tile-drawing","The HTMLDrawer does not raise the tile-drawing event"),this.viewer.allowEventHandler("tile-drawn")}static isSupported(){return!0}getType(){return"html"}minimumOverlapRequired(s){return!0}_createDrawingElement(){return e.makeNeutralElement("div")}draw(s){var l=this;this._prepareNewFrame(),s.forEach(function(a){a.opacity!==0&&l._drawTiles(a)})}canRotate(){return!1}destroy(){this.container.removeChild(this.canvas)}setImageSmoothingEnabled(){}_prepareNewFrame(){this.canvas.innerHTML=""}_drawTiles(s){var l=s.getTilesToDraw().map(c=>c.tile);if(!(s.opacity===0||l.length===0&&!s.placeholderFillStyle))for(var a=l.length-1;a>=0;a--){var u=l[a];this._drawTile(u),this.viewer&&this.viewer.raiseEvent("tile-drawn",{tiledImage:s,tile:u})}}_drawTile(s){e.console.assert(s,"[Drawer._drawTile] tile is required");let l=this.canvas;if(!s.cacheImageRecord){e.console.warn("[Drawer._drawTileToHTML] attempting to draw tile %s when it's not cached",s.toString());return}if(!s.loaded){e.console.warn("Attempting to draw tile %s when it's not yet loaded.",s.toString());return}if(!s.element){var a=s.getImage();if(!a)return;s.element=e.makeNeutralElement("div"),s.imgElement=a.cloneNode(),s.imgElement.style.msInterpolationMode="nearest-neighbor",s.imgElement.style.width="100%",s.imgElement.style.height="100%",s.style=s.element.style,s.style.position="absolute"}s.element.parentNode!==l&&l.appendChild(s.element),s.imgElement.parentNode!==s.element&&s.element.appendChild(s.imgElement),s.style.top=s.position.y+"px",s.style.left=s.position.x+"px",s.style.height=s.size.y+"px",s.style.width=s.size.x+"px",s.flipped&&(s.style.transform="scaleX(-1)"),e.setElementOpacity(s.element,s.opacity)}}e.HTMLDrawer=r}(i),function(e){const n=e;class r extends n.DrawerBase{constructor(c){super(c),this.context=this.canvas.getContext("2d"),this.sketchCanvas=null,this.sketchContext=null,this._imageSmoothingEnabled=!0,this.viewer.allowEventHandler("tile-drawn"),this.viewer.allowEventHandler("tile-drawing")}static isSupported(){return e.supportsCanvas}getType(){return"canvas"}_createDrawingElement(){let c=e.makeNeutralElement("canvas"),h=this._calculateCanvasSize();return c.width=h.x,c.height=h.y,c}draw(c){this._prepareNewFrame(),this.viewer.viewport.getFlip()!==this._viewportFlipped&&this._flip();for(const h of c)h.opacity!==0&&this._drawTiles(h)}canRotate(){return!0}destroy(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null,this.container.removeChild(this.canvas)}minimumOverlapRequired(c){return!0}setImageSmoothingEnabled(c){this._imageSmoothingEnabled=!!c,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw()}drawDebuggingRect(c){var h=this.context;h.save(),h.lineWidth=2*e.pixelDensityRatio,h.strokeStyle=this.debugGridColor[0],h.fillStyle=this.debugGridColor[0],h.strokeRect(c.x*e.pixelDensityRatio,c.y*e.pixelDensityRatio,c.width*e.pixelDensityRatio,c.height*e.pixelDensityRatio),h.restore()}get _viewportFlipped(){return this.context.getTransform().a<0}_raiseTileDrawingEvent(c,h,d,m){this.viewer.raiseEvent("tile-drawing",{tiledImage:c,context:h,tile:d,rendered:m})}_prepareNewFrame(){var c=this._calculateCanvasSize();if((this.canvas.width!==c.x||this.canvas.height!==c.y)&&(this.canvas.width=c.x,this.canvas.height=c.y,this._updateImageSmoothingEnabled(this.context),this.sketchCanvas!==null)){var h=this._calculateSketchCanvasSize();this.sketchCanvas.width=h.x,this.sketchCanvas.height=h.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}_clear(c,h){var d=this._getContext(c);if(h)d.clearRect(h.x,h.y,h.width,h.height);else{var m=d.canvas;d.clearRect(0,0,m.width,m.height)}}_drawTiles(c){var h=c.getTilesToDraw().map(q=>q.tile);if(!(c.opacity===0||h.length===0&&!c.placeholderFillStyle)){var d=h[0],m;d&&(m=c.opacity<1||c.compositeOperation&&c.compositeOperation!=="source-over"||!c._isBottomItem()&&c.source.hasTransparency(d.context2D,d.getUrl(),d.ajaxHeaders,d.postData));var y,T,P=this.viewport.getZoom(!0),v=c.viewportToImageZoom(P);h.length>1&&v>c.smoothTileEdgesMinZoom&&!c.iOSDevice&&c.getRotation(!0)%360===0&&(m=!0,y=d.getScaleForEdgeSmoothing(),T=d.getTranslationForEdgeSmoothing(y,this._getCanvasSize(!1),this._getCanvasSize(!0)));var w;m&&(y||(w=this.viewport.viewportToViewerElementRectangle(c.getClippedBounds(!0)).getIntegerBoundingBox(),w=w.times(e.pixelDensityRatio)),this._clear(!0,w)),y||this._setRotations(c,m);var S=!1;if(c._clip){this._saveContext(m);var R=c.imageToViewportRectangle(c._clip,!0);R=R.rotate(-c.getRotation(!0),c._getRotationPoint(!0));var k=this.viewportToDrawerRectangle(R);y&&(k=k.times(y)),T&&(k=k.translate(T)),this._setClip(k,m),S=!0}if(c._croppingPolygons){var F=this;S||this._saveContext(m);try{var N=c._croppingPolygons.map(function(q){return q.map(function(re){var we=c.imageToViewportCoordinates(re.x,re.y,!0).rotate(-c.getRotation(!0),c._getRotationPoint(!0)),Te=F.viewportCoordToDrawerCoord(we);return y&&(Te=Te.times(y)),T&&(Te=Te.plus(T)),Te})});this._clipWithPolygons(N,m)}catch(q){e.console.error(q)}S=!0}if(c._hasOpaqueTile=!1,c.placeholderFillStyle&&c._hasOpaqueTile===!1){let q=this.viewportToDrawerRectangle(c.getBoundsNoRotate(!0));y&&(q=q.times(y)),T&&(q=q.translate(T));let re=null;typeof c.placeholderFillStyle=="function"?re=c.placeholderFillStyle(c,this.context):re=c.placeholderFillStyle,this._drawRectangle(q,re,m)}var B=a(c.subPixelRoundingForTransparency),j=!1;if(B===e.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS)j=!0;else if(B===e.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST){var U=this.viewer&&this.viewer.isAnimating();j=!U}for(var X=0;X<h.length;X++)d=h[X],this._drawTile(d,c,m,y,T,j,c.source),this.viewer&&this.viewer.raiseEvent("tile-drawn",{tiledImage:c,tile:d});S&&this._restoreContext(m),y||(c.getRotation(!0)%360!==0&&this._restoreRotationChanges(m),this.viewport.getRotation(!0)%360!==0&&this._restoreRotationChanges(m)),m&&(y&&this._setRotations(c),this.blendSketch({opacity:c.opacity,scale:y,translate:T,compositeOperation:c.compositeOperation,bounds:w}),y&&(c.getRotation(!0)%360!==0&&this._restoreRotationChanges(!1),this.viewport.getRotation(!0)%360!==0&&this._restoreRotationChanges(!1))),this._drawDebugInfo(c,h),this._raiseTiledImageDrawnEvent(c,h)}}_drawDebugInfo(c,h){if(c.debugMode)for(var d=h.length-1;d>=0;d--){var m=h[d];try{this._drawDebugInfoOnTile(m,h.length,d,c)}catch(y){e.console.error(y)}}}_clipWithPolygons(c,h){var d=this._getContext(h);d.beginPath();for(const m of c)for(const[y,T]of m.entries())d[y===0?"moveTo":"lineTo"](T.x,T.y);d.clip()}_drawTile(c,h,d,m,y,T,P){e.console.assert(c,"[Drawer._drawTile] tile is required"),e.console.assert(h,"[Drawer._drawTile] drawingHandler is required");var v=this._getContext(d);m=m||1,this._drawTileToCanvas(c,v,h,m,y,T,P)}_drawTileToCanvas(c,h,d,m,y,T,P){var v=c.position.times(e.pixelDensityRatio),w=c.size.times(e.pixelDensityRatio),S;if(!c.context2D&&!c.cacheImageRecord){e.console.warn("[Drawer._drawTileToCanvas] attempting to draw tile %s when it's not cached",c.toString());return}if(S=c.getCanvasContext(),!c.loaded||!S){e.console.warn("Attempting to draw tile %s when it's not yet loaded.",c.toString());return}h.save(),typeof m=="number"&&m!==1&&(v=v.times(m),w=w.times(m)),y instanceof e.Point&&(v=v.plus(y)),h.globalAlpha===1&&c.hasTransparency&&(T&&(v.x=Math.round(v.x),v.y=Math.round(v.y),w.x=Math.round(w.x),w.y=Math.round(w.y)),h.clearRect(v.x,v.y,w.x,w.y)),this._raiseTileDrawingEvent(d,h,c,S);var R,k;c.sourceBounds?(R=Math.min(c.sourceBounds.width,S.canvas.width),k=Math.min(c.sourceBounds.height,S.canvas.height)):(R=S.canvas.width,k=S.canvas.height),h.translate(v.x+w.x/2,0),c.flipped&&h.scale(-1,1),h.drawImage(S.canvas,0,0,R,k,-w.x/2,v.y,w.x,w.y),h.restore()}_getContext(c){var h=this.context;if(c){if(this.sketchCanvas===null){this.sketchCanvas=document.createElement("canvas");var d=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=d.x,this.sketchCanvas.height=d.y,this.sketchContext=this.sketchCanvas.getContext("2d"),this.viewport.getRotation()===0){var m=this;this.viewer.addHandler("rotate",function y(){if(m.viewport.getRotation()!==0){m.viewer.removeHandler("rotate",y);var T=m._calculateSketchCanvasSize();m.sketchCanvas.width=T.x,m.sketchCanvas.height=T.y}})}this._updateImageSmoothingEnabled(this.sketchContext)}h=this.sketchContext}return h}_saveContext(c){this._getContext(c).save()}_restoreContext(c){this._getContext(c).restore()}_setClip(c,h){var d=this._getContext(h);d.beginPath(),d.rect(c.x,c.y,c.width,c.height),d.clip()}_drawRectangle(c,h,d){var m=this._getContext(d);m.save(),m.fillStyle=h,m.fillRect(c.x,c.y,c.width,c.height),m.restore()}blendSketch(c,h,d,m){var y=c;e.isPlainObject(y)||(y={opacity:c,scale:h,translate:d,compositeOperation:m}),c=y.opacity,m=y.compositeOperation;var T=y.bounds;if(this.context.save(),this.context.globalAlpha=c,m&&(this.context.globalCompositeOperation=m),T)T.x<0&&(T.width+=T.x,T.x=0),T.x+T.width>this.canvas.width&&(T.width=this.canvas.width-T.x),T.y<0&&(T.height+=T.y,T.y=0),T.y+T.height>this.canvas.height&&(T.height=this.canvas.height-T.y),this.context.drawImage(this.sketchCanvas,T.x,T.y,T.width,T.height,T.x,T.y,T.width,T.height);else{h=y.scale||1,d=y.translate;var P=d instanceof e.Point?d:new e.Point(0,0),v=0,w=0;if(d){var S=this.sketchCanvas.width-this.canvas.width,R=this.sketchCanvas.height-this.canvas.height;v=Math.round(S/2),w=Math.round(R/2)}this.context.drawImage(this.sketchCanvas,P.x-v*h,P.y-w*h,(this.canvas.width+2*v)*h,(this.canvas.height+2*w)*h,-v,-w,this.canvas.width+2*v,this.canvas.height+2*w)}this.context.restore()}_drawDebugInfoOnTile(c,h,d,m){var y=this.viewer.world.getIndexOfItem(m)%this.debugGridColor.length,T=this.context;T.save(),T.lineWidth=2*e.pixelDensityRatio,T.font="small-caps bold "+13*e.pixelDensityRatio+"px arial",T.strokeStyle=this.debugGridColor[y],T.fillStyle=this.debugGridColor[y],this._setRotations(m),this._viewportFlipped&&this._flip({point:c.position.plus(c.size.divide(2))}),T.strokeRect(c.position.x*e.pixelDensityRatio,c.position.y*e.pixelDensityRatio,c.size.x*e.pixelDensityRatio,c.size.y*e.pixelDensityRatio);var P=(c.position.x+c.size.x/2)*e.pixelDensityRatio,v=(c.position.y+c.size.y/2)*e.pixelDensityRatio;T.translate(P,v);const w=this.viewport.getRotation(!0);T.rotate(Math.PI/180*-w),T.translate(-P,-v),c.x===0&&c.y===0&&(T.fillText("Zoom: "+this.viewport.getZoom(),c.position.x*e.pixelDensityRatio,(c.position.y-30)*e.pixelDensityRatio),T.fillText("Pan: "+this.viewport.getBounds().toString(),c.position.x*e.pixelDensityRatio,(c.position.y-20)*e.pixelDensityRatio)),T.fillText("Level: "+c.level,(c.position.x+10)*e.pixelDensityRatio,(c.position.y+20)*e.pixelDensityRatio),T.fillText("Column: "+c.x,(c.position.x+10)*e.pixelDensityRatio,(c.position.y+30)*e.pixelDensityRatio),T.fillText("Row: "+c.y,(c.position.x+10)*e.pixelDensityRatio,(c.position.y+40)*e.pixelDensityRatio),T.fillText("Order: "+d+" of "+h,(c.position.x+10)*e.pixelDensityRatio,(c.position.y+50)*e.pixelDensityRatio),T.fillText("Size: "+c.size.toString(),(c.position.x+10)*e.pixelDensityRatio,(c.position.y+60)*e.pixelDensityRatio),T.fillText("Position: "+c.position.toString(),(c.position.x+10)*e.pixelDensityRatio,(c.position.y+70)*e.pixelDensityRatio),this.viewport.getRotation(!0)%360!==0&&this._restoreRotationChanges(),m.getRotation(!0)%360!==0&&this._restoreRotationChanges(),T.restore()}_updateImageSmoothingEnabled(c){c.msImageSmoothingEnabled=this._imageSmoothingEnabled,c.imageSmoothingEnabled=this._imageSmoothingEnabled}_getCanvasSize(c){var h=this._getContext(c).canvas;return new e.Point(h.width,h.height)}_getCanvasCenter(){return new e.Point(this.canvas.width/2,this.canvas.height/2)}_setRotations(c,h=!1){var d=!1;this.viewport.getRotation(!0)%360!==0&&(this._offsetForRotation({degrees:this.viewport.getRotation(!0),useSketch:h,saveContext:d}),d=!1),c.getRotation(!0)%360!==0&&this._offsetForRotation({degrees:c.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(c._getRotationPoint(!0),!0),useSketch:h,saveContext:d})}_offsetForRotation(c){var h=c.point?c.point.times(e.pixelDensityRatio):this._getCanvasCenter(),d=this._getContext(c.useSketch);d.save(),d.translate(h.x,h.y),d.rotate(Math.PI/180*c.degrees),d.translate(-h.x,-h.y)}_flip(c){c=c||{};var h=c.point?c.point.times(e.pixelDensityRatio):this._getCanvasCenter(),d=this._getContext(c.useSketch);d.translate(h.x,0),d.scale(-1,1),d.translate(-h.x,0)}_restoreRotationChanges(c){var h=this._getContext(c);h.restore()}_calculateCanvasSize(){var c=e.pixelDensityRatio,h=this.viewport.getContainerSize();return{x:Math.round(h.x*c),y:Math.round(h.y*c)}}_calculateSketchCanvasSize(){var c=this._calculateCanvasSize();if(this.viewport.getRotation()===0)return c;var h=Math.ceil(Math.sqrt(c.x*c.x+c.y*c.y));return{x:h,y:h}}}e.CanvasDrawer=r;var o=e.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER;function s(u){return u!==e.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS&&u!==e.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST&&u!==e.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER}function l(u){return s(u)?o:u}function a(u){if(typeof u=="number")return l(u);if(!u||!e.Browser)return o;var c=u[e.Browser.vendor];return s(c)&&(c=u["*"]),l(c)}}(i),function(e){const n=e;n.WebGLDrawer=class extends n.DrawerBase{constructor(o){super(o),this._destroyed=!1,this._TextureMap=new Map,this._TileMap=new Map,this._gl=null,this._firstPass=null,this._secondPass=null,this._glFrameBuffer=null,this._renderToTexture=null,this._glFramebufferToCanvasTransform=null,this._outputCanvas=null,this._outputContext=null,this._clippingCanvas=null,this._clippingContext=null,this._renderingCanvas=null,this._backupCanvasDrawer=null,this._boundToTileReady=s=>this._tileReadyHandler(s),this._boundToImageUnloaded=s=>this._imageUnloadedHandler(s),this.viewer.addHandler("tile-ready",this._boundToTileReady),this.viewer.addHandler("image-unloaded",this._boundToImageUnloaded),this.viewer.rejectEventHandler("tile-drawn","The WebGLDrawer does not raise the tile-drawn event"),this.viewer.rejectEventHandler("tile-drawing","The WebGLDrawer does not raise the tile-drawing event"),this._setupCanvases(),this._setupRenderer(),this.context=this._outputContext}destroy(){if(this._destroyed)return;let o=this._gl;var s=o.getParameter(o.MAX_TEXTURE_IMAGE_UNITS);for(let u=0;u<s;++u)o.activeTexture(o.TEXTURE0+u),o.bindTexture(o.TEXTURE_2D,null),o.bindTexture(o.TEXTURE_CUBE_MAP,null);o.bindBuffer(o.ARRAY_BUFFER,null),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,null),o.bindRenderbuffer(o.RENDERBUFFER,null),o.bindFramebuffer(o.FRAMEBUFFER,null),Array.from(this._TextureMap.keys()).forEach(u=>{this._cleanupImageData(u)}),o.deleteBuffer(this._secondPass.bufferOutputPosition),o.deleteFramebuffer(this._glFrameBuffer),this._renderingCanvas.width=this._renderingCanvas.height=1,this._clippingCanvas.width=this._clippingCanvas.height=1,this._outputCanvas.width=this._outputCanvas.height=1,this._renderingCanvas=null,this._clippingCanvas=this._clippingContext=null,this._outputCanvas=this._outputContext=null;let a=o.getExtension("WEBGL_lose_context");a&&a.loseContext(),this.viewer.removeHandler("tile-ready",this._boundToTileReady),this.viewer.removeHandler("image-unloaded",this._boundToImageUnloaded),this._gl=null,this._backupCanvasDrawer&&(this._backupCanvasDrawer.destroy(),this._backupCanvasDrawer=null),this.container.removeChild(this.canvas),this.viewer.drawer===this&&(this.viewer.drawer=null),this._destroyed=!0}canRotate(){return!0}static isSupported(){let o=document.createElement("canvas"),s=e.isFunction(o.getContext)&&o.getContext("webgl"),l=s&&s.getExtension("WEBGL_lose_context");return l&&l.loseContext(),!!s}getType(){return"webgl"}minimumOverlapRequired(o){return o.isTainted()}_createDrawingElement(){let o=e.makeNeutralElement("canvas"),s=this._calculateCanvasSize();return o.width=s.x,o.height=s.y,o}_getBackupCanvasDrawer(){return this._backupCanvasDrawer||(this._backupCanvasDrawer=this.viewer.requestDrawer("canvas",{mainDrawer:!1}),this._backupCanvasDrawer.canvas.style.setProperty("visibility","hidden")),this._backupCanvasDrawer}draw(o){let s=this._gl,l={bounds:this.viewport.getBoundsNoRotate(!0),center:this.viewport.getCenter(!0),rotation:this.viewport.getRotation(!0)*Math.PI/180},a=this.viewport.flipped?-1:1,u=e.Mat3.makeTranslation(-l.center.x,-l.center.y),c=e.Mat3.makeScaling(2/l.bounds.width*a,-2/l.bounds.height),h=e.Mat3.makeRotation(-l.rotation),d=c.multiply(h).multiply(u);s.bindFramebuffer(s.FRAMEBUFFER,null),s.clear(s.COLOR_BUFFER_BIT),this._outputContext.clearRect(0,0,this._outputCanvas.width,this._outputCanvas.height);let m=!1;o.forEach((y,T)=>{if(y.isTainted()){m&&(this._outputContext.drawImage(this._renderingCanvas,0,0),s.bindFramebuffer(s.FRAMEBUFFER,null),s.clear(s.COLOR_BUFFER_BIT),m=!1);const P=this._getBackupCanvasDrawer();P.draw([y]),this._outputContext.drawImage(P.canvas,0,0)}else{let P=y.getTilesToDraw();if(y.placeholderFillStyle&&y._hasOpaqueTile===!1&&this._drawPlaceholder(y),P.length===0||y.getOpacity()===0)return;let v=P[0],w=y.compositeOperation||this.viewer.compositeOperation||y._clip||y._croppingPolygons||y.debugMode,S=w||y.opacity<1||v.hasTransparency;w&&(m&&this._outputContext.drawImage(this._renderingCanvas,0,0),s.bindFramebuffer(s.FRAMEBUFFER,null),s.clear(s.COLOR_BUFFER_BIT)),s.useProgram(this._firstPass.shaderProgram),S?(s.bindFramebuffer(s.FRAMEBUFFER,this._glFrameBuffer),s.clear(s.COLOR_BUFFER_BIT)):s.bindFramebuffer(s.FRAMEBUFFER,null);let R=d,k=y.getRotation(!0);if(k%360!==0){let X=e.Mat3.makeRotation(-k*Math.PI/180),q=y.getBoundsNoRotate(!0).getCenter(),re=e.Mat3.makeTranslation(q.x,q.y),we=e.Mat3.makeTranslation(-q.x,-q.y),Te=re.multiply(X).multiply(we);R=d.multiply(Te)}let F=this._gl.getParameter(this._gl.MAX_TEXTURE_IMAGE_UNITS);if(F<=0)throw new Error(`WegGL error: bad value for gl parameter MAX_TEXTURE_IMAGE_UNITS (${F}). This could happen
                        if too many contexts have been created and not released, or there is another problem with the graphics card.`);let N=new Float32Array(F*12),B=new Array(F),j=new Array(F),U=new Array(F);for(let X=0;X<P.length;X++){let q=P[X].tile,re=X%F,we=re+1,Te=q.getCanvasContext(),Ee=Te?this._TextureMap.get(Te.canvas):null;if(Ee||(this._tileReadyHandler({tile:q,tiledImage:y}),Ee=Te?this._TextureMap.get(Te.canvas):null),Ee&&this._getTileData(q,y,Ee,R,re,N,B,j,U),we===F||X===P.length-1){for(let xe=0;xe<=we;xe++)s.activeTexture(s.TEXTURE0+xe),s.bindTexture(s.TEXTURE_2D,B[xe]);s.bindBuffer(s.ARRAY_BUFFER,this._firstPass.bufferTexturePosition),s.bufferData(s.ARRAY_BUFFER,N,s.DYNAMIC_DRAW),j.forEach((xe,A)=>{s.uniformMatrix3fv(this._firstPass.uTransformMatrices[A],!1,xe)}),s.uniform1fv(this._firstPass.uOpacities,new Float32Array(U)),s.bindBuffer(s.ARRAY_BUFFER,this._firstPass.bufferOutputPosition),s.vertexAttribPointer(this._firstPass.aOutputPosition,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ARRAY_BUFFER,this._firstPass.bufferTexturePosition),s.vertexAttribPointer(this._firstPass.aTexturePosition,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ARRAY_BUFFER,this._firstPass.bufferIndex),s.vertexAttribPointer(this._firstPass.aIndex,1,s.FLOAT,!1,0,0),s.drawArrays(s.TRIANGLES,0,6*we)}}S&&(s.useProgram(this._secondPass.shaderProgram),s.bindFramebuffer(s.FRAMEBUFFER,null),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,this._renderToTexture),this._gl.uniform1f(this._secondPass.uOpacityMultiplier,y.opacity),s.bindBuffer(s.ARRAY_BUFFER,this._secondPass.bufferTexturePosition),s.vertexAttribPointer(this._secondPass.aTexturePosition,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ARRAY_BUFFER,this._secondPass.bufferOutputPosition),s.vertexAttribPointer(this._firstPass.aOutputPosition,2,s.FLOAT,!1,0,0),s.drawArrays(s.TRIANGLES,0,6)),m=!0,w&&(this._applyContext2dPipeline(y,P,T),m=!1,s.bindFramebuffer(s.FRAMEBUFFER,null),s.clear(s.COLOR_BUFFER_BIT)),T===0&&this._raiseTiledImageDrawnEvent(y,P.map(X=>X.tile))}}),m&&this._outputContext.drawImage(this._renderingCanvas,0,0)}setImageSmoothingEnabled(o){}drawDebuggingRect(o){let s=this._outputContext;s.save(),s.lineWidth=2*e.pixelDensityRatio,s.strokeStyle=this.debugGridColor[0],s.fillStyle=this.debugGridColor[0],s.strokeRect(o.x*e.pixelDensityRatio,o.y*e.pixelDensityRatio,o.width*e.pixelDensityRatio,o.height*e.pixelDensityRatio),s.restore()}_getTextureDataFromTile(o){return o.getCanvasContext().canvas}_applyContext2dPipeline(o,s,l){if(this._outputContext.save(),this._outputContext.globalCompositeOperation=l===0?null:o.compositeOperation||this.viewer.compositeOperation,o._croppingPolygons||o._clip?(this._renderToClippingCanvas(o),this._outputContext.drawImage(this._clippingCanvas,0,0)):this._outputContext.drawImage(this._renderingCanvas,0,0),this._outputContext.restore(),o.debugMode){const a=this.viewer.viewport.getFlip();a&&this._flip(),this._drawDebugInfo(s,o,a),a&&this._flip()}}_getTileData(o,s,l,a,u,c,h,d,m){let y=l.texture,T=l.position;c.set(T,u*12);let P=this._calculateOverlapFraction(o,s),v=o.positionedBounds.width*P.x,w=o.positionedBounds.height*P.y,S=o.positionedBounds.x+(o.x===0?0:v),R=o.positionedBounds.y+(o.y===0?0:w),k=o.positionedBounds.x+o.positionedBounds.width-(o.isRightMost?0:v),F=o.positionedBounds.y+o.positionedBounds.height-(o.isBottomMost?0:w),N=k-S,B=F-R,j=new e.Mat3([N,0,0,0,B,0,S,R,1]);if(o.flipped){let X=e.Mat3.makeTranslation(.5,0),q=e.Mat3.makeTranslation(-.5,0),re=X.multiply(e.Mat3.makeScaling(-1,1)).multiply(q);j=j.multiply(re)}let U=a.multiply(j);m[u]=o.opacity,h[u]=y,d[u]=U.values}_setupRenderer(){let o=this._gl;o||e.console.error("_setupCanvases must be called before _setupRenderer"),this._unitQuad=this._makeQuadVertexBuffer(0,1,0,1),this._makeFirstPassShaderProgram(),this._makeSecondPassShaderProgram(),this._renderToTexture=o.createTexture(),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,this._renderToTexture),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,this._renderingCanvas.width,this._renderingCanvas.height,0,o.RGBA,o.UNSIGNED_BYTE,null),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),this._glFrameBuffer=o.createFramebuffer(),o.bindFramebuffer(o.FRAMEBUFFER,this._glFrameBuffer),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,this._renderToTexture,0),o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA)}_makeFirstPassShaderProgram(){let o=this._glNumTextures=this._gl.getParameter(this._gl.MAX_TEXTURE_IMAGE_UNITS),s=()=>[...Array(o).keys()].map(y=>`uniform mat3 u_matrix_${y};`).join(`
`),l=()=>[...Array(o).keys()].map(y=>`${y>0?"else ":""}if(int(a_index) == ${y}) { transform_matrix = u_matrix_${y}; }`).join(`
`);const a=`
            attribute vec2 a_output_position;
            attribute vec2 a_texture_position;
            attribute float a_index;

            ${s()} // create a uniform mat3 for each potential tile to draw

            varying vec2 v_texture_position;
            varying float v_image_index;

            void main() {

                mat3 transform_matrix; // value will be set by the if/elses in makeConditional()

                ${l()}

                gl_Position = vec4(transform_matrix * vec3(a_output_position, 1), 1);

                v_texture_position = a_texture_position;
                v_image_index = a_index;
            }
            `,u=`
            precision mediump float;

            // our textures
            uniform sampler2D u_images[${o}];
            // our opacities
            uniform float u_opacities[${o}];

            // the varyings passed in from the vertex shader.
            varying vec2 v_texture_position;
            varying float v_image_index;

            void main() {
                // can't index directly with a variable, need to use a loop iterator hack
                for(int i = 0; i < ${o}; ++i){
                    if(i == int(v_image_index)){
                        gl_FragColor = texture2D(u_images[i], v_texture_position) * u_opacities[i];
                    }
                }
            }
            `;let c=this._gl,h=this.constructor.initShaderProgram(c,a,u);c.useProgram(h),this._firstPass={shaderProgram:h,aOutputPosition:c.getAttribLocation(h,"a_output_position"),aTexturePosition:c.getAttribLocation(h,"a_texture_position"),aIndex:c.getAttribLocation(h,"a_index"),uTransformMatrices:[...Array(this._glNumTextures).keys()].map(y=>c.getUniformLocation(h,`u_matrix_${y}`)),uImages:c.getUniformLocation(h,"u_images"),uOpacities:c.getUniformLocation(h,"u_opacities"),bufferOutputPosition:c.createBuffer(),bufferTexturePosition:c.createBuffer(),bufferIndex:c.createBuffer()},c.uniform1iv(this._firstPass.uImages,[...Array(o).keys()]);let d=new Float32Array(o*12);for(let y=0;y<o;++y)d.set(Float32Array.from(this._unitQuad),y*12);c.bindBuffer(c.ARRAY_BUFFER,this._firstPass.bufferOutputPosition),c.bufferData(c.ARRAY_BUFFER,d,c.STATIC_DRAW),c.enableVertexAttribArray(this._firstPass.aOutputPosition),c.bindBuffer(c.ARRAY_BUFFER,this._firstPass.bufferTexturePosition),c.enableVertexAttribArray(this._firstPass.aTexturePosition),c.bindBuffer(c.ARRAY_BUFFER,this._firstPass.bufferIndex);let m=[...Array(this._glNumTextures).keys()].map(y=>Array(6).fill(y)).flat();c.bufferData(c.ARRAY_BUFFER,new Float32Array(m),c.STATIC_DRAW),c.enableVertexAttribArray(this._firstPass.aIndex)}_makeSecondPassShaderProgram(){const o=`
            attribute vec2 a_output_position;
            attribute vec2 a_texture_position;

            uniform mat3 u_matrix;

            varying vec2 v_texture_position;

            void main() {
                gl_Position = vec4(u_matrix * vec3(a_output_position, 1), 1);

                v_texture_position = a_texture_position;
            }
            `,s=`
            precision mediump float;

            // our texture
            uniform sampler2D u_image;

            // the texCoords passed in from the vertex shader.
            varying vec2 v_texture_position;

            // the opacity multiplier for the image
            uniform float u_opacity_multiplier;

            void main() {
                gl_FragColor = texture2D(u_image, v_texture_position);
                gl_FragColor *= u_opacity_multiplier;
            }
            `;let l=this._gl,a=this.constructor.initShaderProgram(l,o,s);l.useProgram(a),this._secondPass={shaderProgram:a,aOutputPosition:l.getAttribLocation(a,"a_output_position"),aTexturePosition:l.getAttribLocation(a,"a_texture_position"),uMatrix:l.getUniformLocation(a,"u_matrix"),uImage:l.getUniformLocation(a,"u_image"),uOpacityMultiplier:l.getUniformLocation(a,"u_opacity_multiplier"),bufferOutputPosition:l.createBuffer(),bufferTexturePosition:l.createBuffer()},l.bindBuffer(l.ARRAY_BUFFER,this._secondPass.bufferOutputPosition),l.bufferData(l.ARRAY_BUFFER,this._unitQuad,l.STATIC_DRAW),l.enableVertexAttribArray(this._secondPass.aOutputPosition),l.bindBuffer(l.ARRAY_BUFFER,this._secondPass.bufferTexturePosition),l.bufferData(l.ARRAY_BUFFER,this._unitQuad,l.DYNAMIC_DRAW),l.enableVertexAttribArray(this._secondPass.aTexturePosition);let u=e.Mat3.makeScaling(2,2).multiply(e.Mat3.makeTranslation(-.5,-.5));l.uniformMatrix3fv(this._secondPass.uMatrix,!1,u.values)}_resizeRenderer(){let o=this._gl,s=this._renderingCanvas.width,l=this._renderingCanvas.height;o.viewport(0,0,s,l),o.deleteTexture(this._renderToTexture),this._renderToTexture=o.createTexture(),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,this._renderToTexture),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,s,l,0,o.RGBA,o.UNSIGNED_BYTE,null),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.bindFramebuffer(o.FRAMEBUFFER,this._glFrameBuffer),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,this._renderToTexture,0)}_setupCanvases(){let o=this;this._outputCanvas=this.canvas,this._outputContext=this._outputCanvas.getContext("2d"),this._renderingCanvas=document.createElement("canvas"),this._clippingCanvas=document.createElement("canvas"),this._clippingContext=this._clippingCanvas.getContext("2d"),this._renderingCanvas.width=this._clippingCanvas.width=this._outputCanvas.width,this._renderingCanvas.height=this._clippingCanvas.height=this._outputCanvas.height,this._gl=this._renderingCanvas.getContext("webgl"),this.viewer.addHandler("resize",function(){o._outputCanvas!==o.viewer.drawer.canvas&&(o._outputCanvas.style.width=o.viewer.drawer.canvas.clientWidth+"px",o._outputCanvas.style.height=o.viewer.drawer.canvas.clientHeight+"px");let s=o._calculateCanvasSize();(o._outputCanvas.width!==s.x||o._outputCanvas.height!==s.y)&&(o._outputCanvas.width=s.x,o._outputCanvas.height=s.y),o._renderingCanvas.style.width=o._outputCanvas.clientWidth+"px",o._renderingCanvas.style.height=o._outputCanvas.clientHeight+"px",o._renderingCanvas.width=o._clippingCanvas.width=o._outputCanvas.width,o._renderingCanvas.height=o._clippingCanvas.height=o._outputCanvas.height,o._resizeRenderer()})}_makeQuadVertexBuffer(o,s,l,a){return new Float32Array([o,a,s,a,o,l,o,l,s,a,s,l])}_tileReadyHandler(o){let s=o.tile,l=o.tiledImage;if(l.isTainted())return;let a=s.getCanvasContext(),u=a&&a.canvas;if(!u||e.isCanvasTainted(u)){l.isTainted()||(l.setTainted(!0),e.console.warn("WebGL cannot be used to draw this TiledImage because it has tainted data. Does crossOriginPolicy need to be set?"),this._raiseDrawerErrorEvent(l,"Tainted data cannot be used by the WebGLDrawer. Falling back to CanvasDrawer for this TiledImage."));return}if(!this._TextureMap.get(u)){let h=this._gl,d=h.createTexture(),m,y=l.source.tileOverlap,T,P;if(s.sourceBounds?(T=Math.min(s.sourceBounds.width,u.width)/u.width,P=Math.min(s.sourceBounds.height,u.height)/u.height):(T=1,P=1),y>0){let w=this._calculateOverlapFraction(s,l),S=(s.x===0?0:w.x)*T,R=(s.y===0?0:w.y)*P,k=(s.isRightMost?1:1-w.x)*T,F=(s.isBottomMost?1:1-w.y)*P;m=this._makeQuadVertexBuffer(S,k,R,F)}else T===1&&P===1?m=this._unitQuad:m=this._makeQuadVertexBuffer(0,T,0,P);let v={texture:d,position:m};this._TextureMap.set(u,v),h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,d),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),this._uploadImageData(a)}}_calculateOverlapFraction(o,s){let l=s.source.tileOverlap,a=o.sourceBounds.width,u=o.sourceBounds.height,c=(o.x===0?0:l)+(o.isRightMost?0:l),h=(o.y===0?0:l)+(o.isBottomMost?0:l),d=l/(a+c),m=l/(u+h);return{x:d,y:m}}_uploadImageData(o){let s=this._gl,l=o.canvas;try{if(!l)throw o;s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,l)}catch(a){e.console.error("Error uploading image data to WebGL",a)}}_imageUnloadedHandler(o){let s=o.context2D.canvas;this._cleanupImageData(s)}_cleanupImageData(o){let s=this._TextureMap.get(o);this._TextureMap.delete(o),s&&this._gl.deleteTexture(s.texture)}_setClip(){}_renderToClippingCanvas(o){if(this._clippingContext.clearRect(0,0,this._clippingCanvas.width,this._clippingCanvas.height),this._clippingContext.save(),this.viewer.viewport.getFlip()){const s=new e.Point(this.canvas.width/2,this.canvas.height/2);this._clippingContext.translate(s.x,0),this._clippingContext.scale(-1,1),this._clippingContext.translate(-s.x,0)}if(o._clip){let l=[{x:o._clip.x,y:o._clip.y},{x:o._clip.x+o._clip.width,y:o._clip.y},{x:o._clip.x+o._clip.width,y:o._clip.y+o._clip.height},{x:o._clip.x,y:o._clip.y+o._clip.height}].map(a=>{let u=o.imageToViewportCoordinates(a.x,a.y,!0).rotate(this.viewer.viewport.getRotation(!0),this.viewer.viewport.getCenter(!0));return this.viewportCoordToDrawerCoord(u)});this._clippingContext.beginPath(),l.forEach((a,u)=>{this._clippingContext[u===0?"moveTo":"lineTo"](a.x,a.y)}),this._clippingContext.clip(),this._setClip()}if(o._croppingPolygons){let s=o._croppingPolygons.map(l=>l.map(a=>{let u=o.imageToViewportCoordinates(a.x,a.y,!0).rotate(this.viewer.viewport.getRotation(!0),this.viewer.viewport.getCenter(!0));return this.viewportCoordToDrawerCoord(u)}));this._clippingContext.beginPath(),s.forEach(l=>{l.forEach((a,u)=>{this._clippingContext[u===0?"moveTo":"lineTo"](a.x,a.y)})}),this._clippingContext.clip()}if(this.viewer.viewport.getFlip()){const s=new e.Point(this.canvas.width/2,this.canvas.height/2);this._clippingContext.translate(s.x,0),this._clippingContext.scale(-1,1),this._clippingContext.translate(-s.x,0)}this._clippingContext.drawImage(this._renderingCanvas,0,0),this._clippingContext.restore()}_setRotations(o){var s=!1;this.viewport.getRotation(!0)%360!==0&&(this._offsetForRotation({degrees:this.viewport.getRotation(!0),saveContext:s}),s=!1),o.getRotation(!0)%360!==0&&this._offsetForRotation({degrees:o.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(o._getRotationPoint(!0),!0),saveContext:s})}_offsetForRotation(o){var s=o.point?o.point.times(e.pixelDensityRatio):this._getCanvasCenter(),l=this._outputContext;l.save(),l.translate(s.x,s.y),l.rotate(Math.PI/180*o.degrees),l.translate(-s.x,-s.y)}_flip(o){o=o||{};var s=o.point?o.point.times(e.pixelDensityRatio):this._getCanvasCenter(),l=this._outputContext;l.translate(s.x,0),l.scale(-1,1),l.translate(-s.x,0)}_drawDebugInfo(o,s,l){for(var a=o.length-1;a>=0;a--){var u=o[a].tile;try{this._drawDebugInfoOnTile(u,o.length,a,s,l)}catch(c){e.console.error(c)}}}_drawDebugInfoOnTile(o,s,l,a,u){var c=this.viewer.world.getIndexOfItem(a)%this.debugGridColor.length,h=this.context;h.save(),h.lineWidth=2*e.pixelDensityRatio,h.font="small-caps bold "+13*e.pixelDensityRatio+"px arial",h.strokeStyle=this.debugGridColor[c],h.fillStyle=this.debugGridColor[c],this._setRotations(a),u&&this._flip({point:o.position.plus(o.size.divide(2))}),h.strokeRect(o.position.x*e.pixelDensityRatio,o.position.y*e.pixelDensityRatio,o.size.x*e.pixelDensityRatio,o.size.y*e.pixelDensityRatio);var d=(o.position.x+o.size.x/2)*e.pixelDensityRatio,m=(o.position.y+o.size.y/2)*e.pixelDensityRatio;h.translate(d,m);const y=this.viewport.getRotation(!0);h.rotate(Math.PI/180*-y),h.translate(-d,-m),o.x===0&&o.y===0&&(h.fillText("Zoom: "+this.viewport.getZoom(),o.position.x*e.pixelDensityRatio,(o.position.y-30)*e.pixelDensityRatio),h.fillText("Pan: "+this.viewport.getBounds().toString(),o.position.x*e.pixelDensityRatio,(o.position.y-20)*e.pixelDensityRatio)),h.fillText("Level: "+o.level,(o.position.x+10)*e.pixelDensityRatio,(o.position.y+20)*e.pixelDensityRatio),h.fillText("Column: "+o.x,(o.position.x+10)*e.pixelDensityRatio,(o.position.y+30)*e.pixelDensityRatio),h.fillText("Row: "+o.y,(o.position.x+10)*e.pixelDensityRatio,(o.position.y+40)*e.pixelDensityRatio),h.fillText("Order: "+l+" of "+s,(o.position.x+10)*e.pixelDensityRatio,(o.position.y+50)*e.pixelDensityRatio),h.fillText("Size: "+o.size.toString(),(o.position.x+10)*e.pixelDensityRatio,(o.position.y+60)*e.pixelDensityRatio),h.fillText("Position: "+o.position.toString(),(o.position.x+10)*e.pixelDensityRatio,(o.position.y+70)*e.pixelDensityRatio),this.viewport.getRotation(!0)%360!==0&&this._restoreRotationChanges(),a.getRotation(!0)%360!==0&&this._restoreRotationChanges(),h.restore()}_drawPlaceholder(o){const s=o.getBounds(!0),l=this.viewportToDrawerRectangle(o.getBounds(!0)),a=this._outputContext;let u;typeof o.placeholderFillStyle=="function"?u=o.placeholderFillStyle(o,a):u=o.placeholderFillStyle,this._offsetForRotation({degrees:this.viewer.viewport.getRotation(!0)}),a.fillStyle=u,a.translate(l.x,l.y),a.rotate(Math.PI/180*s.degrees),a.translate(-l.x,-l.y),a.fillRect(l.x,l.y,l.width,l.height),this._restoreRotationChanges()}_getCanvasCenter(){return new e.Point(this.canvas.width/2,this.canvas.height/2)}_restoreRotationChanges(){var o=this._outputContext;o.restore()}static initShaderProgram(o,s,l){function a(d,m,y){const T=d.createShader(m);return d.shaderSource(T,y),d.compileShader(T),d.getShaderParameter(T,d.COMPILE_STATUS)?T:(e.console.error(`An error occurred compiling the shaders: ${d.getShaderInfoLog(T)}`),d.deleteShader(T),null)}const u=a(o,o.VERTEX_SHADER,s),c=a(o,o.FRAGMENT_SHADER,l),h=o.createProgram();return o.attachShader(h,u),o.attachShader(h,c),o.linkProgram(h),o.getProgramParameter(h,o.LINK_STATUS)?h:(e.console.error(`Unable to initialize the shader program: ${o.getProgramInfoLog(h)}`),null)}}}(i),function(e){e.Viewport=function(n){var r=arguments;r.length&&r[0]instanceof e.Point&&(n={containerSize:r[0],contentSize:r[1],config:r[2]}),n.config&&(e.extend(!0,n,n.config),delete n.config),this._margins=e.extend({left:0,top:0,right:0,bottom:0},n.margins||{}),delete n.margins,n.initialDegrees=n.degrees,delete n.degrees,e.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,rotationPivot:null,viewer:null,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:e.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:e.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:e.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:e.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:e.DEFAULT_SETTINGS.maxZoomLevel,initialDegrees:e.DEFAULT_SETTINGS.degrees,flipped:e.DEFAULT_SETTINGS.flipped,homeFillsViewer:e.DEFAULT_SETTINGS.homeFillsViewer,silenceMultiImageWarnings:e.DEFAULT_SETTINGS.silenceMultiImageWarnings},n),this._updateContainerInnerSize(),this.centerSpringX=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new e.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.degreesSpring=new e.Spring({initial:n.initialDegrees,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._oldDegrees=this.degreesSpring.current.value,this._setContentBounds(new e.Rect(0,0,1,1),1),this.goHome(!0),this.update()},e.Viewport.prototype={get degrees(){return e.console.warn("Accessing [Viewport.degrees] is deprecated. Use viewport.getRotation instead."),this.getRotation()},set degrees(n){e.console.warn("Setting [Viewport.degrees] is deprecated. Use viewport.rotateTo, viewport.rotateBy, or viewport.setRotation instead."),this.rotateTo(n)},resetContentSize:function(n){return e.console.assert(n,"[Viewport.resetContentSize] contentSize is required"),e.console.assert(n instanceof e.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),e.console.assert(n.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),e.console.assert(n.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new e.Rect(0,0,1,n.y/n.x),n.x),this},setHomeBounds:function(n,r){e.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(n,r)},_setContentBounds:function(n,r){e.console.assert(n,"[Viewport._setContentBounds] bounds is required"),e.console.assert(n instanceof e.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),e.console.assert(n.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),e.console.assert(n.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=n.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(r),this._contentBounds=n.rotate(this.getRotation()).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(r),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:r,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var n=this._contentAspectRatio/this.getAspectRatio(),r;return this.homeFillsViewer?r=n>=1?n:1:r=n>=1?1:n,r/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var n=this._contentBounds.getCenter(),r=1/this.getHomeZoom(),o=r/this.getAspectRatio();return new e.Rect(n.x-r/2,n.y-o/2,r,o)},goHome:function(n){return this.viewer&&this.viewer.raiseEvent("home",{immediately:n}),this.fitBounds(this.getHomeBounds(),n)},getMinZoom:function(){var n=this.getHomeZoom(),r=this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*n;return r},getMaxZoom:function(){var n=this.maxZoomLevel;return n||(n=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,n/=this._contentBounds.width),Math.max(n,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new e.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return e.extend({},this._margins)},setMargins:function(n){e.console.assert(e.type(n)==="object","[Viewport.setMargins] margins must be an object"),this._margins=e.extend({left:0,top:0,right:0,bottom:0},n),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(n){return this.getBoundsNoRotate(n).rotate(-this.getRotation(n))},getBoundsNoRotate:function(n){var r=this.getCenter(n),o=1/this.getZoom(n),s=o/this.getAspectRatio();return new e.Rect(r.x-o/2,r.y-s/2,o,s)},getBoundsWithMargins:function(n){return this.getBoundsNoRotateWithMargins(n).rotate(-this.getRotation(n),this.getCenter(n))},getBoundsNoRotateWithMargins:function(n){var r=this.getBoundsNoRotate(n),o=this._containerInnerSize.x*this.getZoom(n);return r.x-=this._margins.left/o,r.y-=this._margins.top/o,r.width+=(this._margins.left+this._margins.right)/o,r.height+=(this._margins.top+this._margins.bottom)/o,r},getCenter:function(n){var r=new e.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),o=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value),s,l,a,u,c,h,d,m;return n?r:this.zoomPoint?(s=this.pixelFromPoint(this.zoomPoint,!0),l=this.getZoom(),a=1/l,u=a/this.getAspectRatio(),c=new e.Rect(r.x-a/2,r.y-u/2,a,u),h=this._pixelFromPoint(this.zoomPoint,c),d=h.minus(s).rotate(-this.getRotation(!0)),m=d.divide(this._containerInnerSize.x*l),o.plus(m)):o},getZoom:function(n){return n?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(n){return Math.max(Math.min(n,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(n){var r=this.viewportToViewerElementRectangle(n).getBoundingBox(),o=this.viewportToViewerElementRectangle(this._contentBoundsNoRotate).getBoundingBox(),s=!1,l=!1;if(!this.wrapHorizontal){var a=r.x+r.width,u=o.x+o.width,c,h,d;r.width>o.width?c=this.visibilityRatio*o.width:c=this.visibilityRatio*r.width,h=o.x-a+c,d=u-r.x-c,c>o.width?(r.x+=(h+d)/2,s=!0):d<0?(r.x+=d,s=!0):h>0&&(r.x+=h,s=!0)}if(!this.wrapVertical){var m=r.y+r.height,y=o.y+o.height,T,P,v;r.height>o.height?T=this.visibilityRatio*o.height:T=this.visibilityRatio*r.height,P=o.y-m+T,v=y-r.y-T,T>o.height?(r.y+=(P+v)/2,l=!0):v<0?(r.y+=v,l=!0):P>0&&(r.y+=P,l=!0)}var w=s||l,S=w?this.viewerElementToViewportRectangle(r):n.clone();return S.xConstrained=s,S.yConstrained=l,S.constraintApplied=w,S},_raiseConstraintsEvent:function(n){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:n})},applyConstraints:function(n){var r=this.getZoom(),o=this._applyZoomConstraints(r);r!==o&&this.zoomTo(o,this.zoomPoint,n);var s=this.getConstrainedBounds(!1);return s.constraintApplied&&(this.fitBounds(s,n),this._raiseConstraintsEvent(n)),this},ensureVisible:function(n){return this.applyConstraints(n)},_fitBounds:function(n,r){r=r||{};var o=r.immediately||!1,s=r.constraints||!1,l=this.getAspectRatio(),a=n.getCenter(),u=new e.Rect(n.x,n.y,n.width,n.height,n.degrees+this.getRotation()).getBoundingBox();u.getAspectRatio()>=l?u.height=u.width/l:u.width=u.height*l,u.x=a.x-u.width/2,u.y=a.y-u.height/2;var c=1/u.width;if(o)return this.panTo(a,!0),this.zoomTo(c,null,!0),s&&this.applyConstraints(!0),this;var h=this.getCenter(!0),d=this.getZoom(!0);this.panTo(h,!0),this.zoomTo(d,null,!0);var m=this.getBounds(),y=this.getZoom();if(y===0||Math.abs(c/y-1)<1e-8)return this.zoomTo(c,null,!0),this.panTo(a,o),s&&this.applyConstraints(!1),this;if(s){this.panTo(a,!1),c=this._applyZoomConstraints(c),this.zoomTo(c,null,!1);var T=this.getConstrainedBounds();this.panTo(h,!0),this.zoomTo(d,null,!0),this.fitBounds(T)}else{var P=u.rotate(-this.getRotation()),v=P.getTopLeft().times(c).minus(m.getTopLeft().times(y)).divide(c-y);this.zoomTo(c,v,o)}return this},fitBounds:function(n,r){return this._fitBounds(n,{immediately:r,constraints:!1})},fitBoundsWithConstraints:function(n,r){return this._fitBounds(n,{immediately:r,constraints:!0})},fitVertically:function(n){var r=new e.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(r,n)},fitHorizontally:function(n){var r=new e.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(r,n)},getConstrainedBounds:function(n){var r,o;return r=this.getBounds(n),o=this._applyBoundaryConstraints(r),o},panBy:function(n,r){var o=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(o.plus(n),r)},panTo:function(n,r){return r?(this.centerSpringX.resetTo(n.x),this.centerSpringY.resetTo(n.y)):(this.centerSpringX.springTo(n.x),this.centerSpringY.springTo(n.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:n,immediately:r}),this},zoomBy:function(n,r,o){return this.zoomTo(this.zoomSpring.target.value*n,r,o)},zoomTo:function(n,r,o){var s=this;return this.zoomPoint=r instanceof e.Point&&!isNaN(r.x)&&!isNaN(r.y)?r:null,o?this._adjustCenterSpringsForZoomPoint(function(){s.zoomSpring.resetTo(n)}):this.zoomSpring.springTo(n),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:n,refPoint:r,immediately:o}),this},setRotation:function(n,r){return this.rotateTo(n,null,r)},getRotation:function(n){return n?this.degreesSpring.current.value:this.degreesSpring.target.value},setRotationWithPivot:function(n,r,o){return this.rotateTo(n,r,o)},rotateTo:function(n,r,o){if(!this.viewer||!this.viewer.drawer.canRotate())return this;if(this.degreesSpring.target.value===n&&this.degreesSpring.isAtTargetValue())return this;if(this.rotationPivot=r instanceof e.Point&&!isNaN(r.x)&&!isNaN(r.y)?r:null,o)if(this.rotationPivot){var s=n-this._oldDegrees;if(!s)return this.rotationPivot=null,this;this._rotateAboutPivot(n)}else this.degreesSpring.resetTo(n);else{var l=e.positiveModulo(this.degreesSpring.current.value,360),a=e.positiveModulo(n,360),u=a-l;u>180?a-=360:u<-180&&(a+=360);var c=l-a;this.degreesSpring.resetTo(n+c),this.degreesSpring.springTo(n)}return this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:n,immediately:!!o,pivot:this.rotationPivot||this.getCenter()}),this},rotateBy:function(n,r,o){return this.rotateTo(this.degreesSpring.target.value+n,r,o)},resize:function(n,r){var o=this.getBoundsNoRotate(),s=o,l;this.containerSize.x=n.x,this.containerSize.y=n.y,this._updateContainerInnerSize(),r&&(l=n.x/this.containerSize.x,s.width=o.width*l,s.height=s.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:n,maintain:r});var a=this.fitBounds(s,!0);return this.viewer&&this.viewer.raiseEvent("after-resize",{newContainerSize:n,maintain:r}),a},_updateContainerInnerSize:function(){this._containerInnerSize=new e.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var n=this;this._adjustCenterSpringsForZoomPoint(function(){n.zoomSpring.update()}),this.degreesSpring.isAtTargetValue()&&(this.rotationPivot=null),this.centerSpringX.update(),this.centerSpringY.update(),this.rotationPivot?this._rotateAboutPivot(!0):this.degreesSpring.update();var r=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom||this.degreesSpring.current.value!==this._oldDegrees;this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._oldDegrees=this.degreesSpring.current.value;var o=r||!this.zoomSpring.isAtTargetValue()||!this.centerSpringX.isAtTargetValue()||!this.centerSpringY.isAtTargetValue()||!this.degreesSpring.isAtTargetValue();return o},_rotateAboutPivot:function(n){var r=n===!0,o=this.rotationPivot.minus(this.getCenter());this.centerSpringX.shiftBy(o.x),this.centerSpringY.shiftBy(o.y),r?this.degreesSpring.update():this.degreesSpring.resetTo(n);var s=this.degreesSpring.current.value-this._oldDegrees,l=o.rotate(s*-1).times(-1);this.centerSpringX.shiftBy(l.x),this.centerSpringY.shiftBy(l.y)},_adjustCenterSpringsForZoomPoint:function(n){if(this.zoomPoint){var r=this.pixelFromPoint(this.zoomPoint,!0);n();var o=this.pixelFromPoint(this.zoomPoint,!0),s=o.minus(r),l=this.deltaPointsFromPixels(s,!0);this.centerSpringX.shiftBy(l.x),this.centerSpringY.shiftBy(l.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else n()},deltaPixelsFromPointsNoRotate:function(n,r){return n.times(this._containerInnerSize.x*this.getZoom(r))},deltaPixelsFromPoints:function(n,r){return this.deltaPixelsFromPointsNoRotate(n.rotate(this.getRotation(r)),r)},deltaPointsFromPixelsNoRotate:function(n,r){return n.divide(this._containerInnerSize.x*this.getZoom(r))},deltaPointsFromPixels:function(n,r){return this.deltaPointsFromPixelsNoRotate(n,r).rotate(-this.getRotation(r))},pixelFromPointNoRotate:function(n,r){return this._pixelFromPointNoRotate(n,this.getBoundsNoRotate(r))},pixelFromPoint:function(n,r){return this._pixelFromPoint(n,this.getBoundsNoRotate(r))},_pixelFromPointNoRotate:function(n,r){return n.minus(r.getTopLeft()).times(this._containerInnerSize.x/r.width).plus(new e.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(n,r){return this._pixelFromPointNoRotate(n.rotate(this.getRotation(!0),this.getCenter(!0)),r)},pointFromPixelNoRotate:function(n,r){var o=this.getBoundsNoRotate(r);return n.minus(new e.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/o.width).plus(o.getTopLeft())},pointFromPixel:function(n,r){return this.pointFromPixelNoRotate(n,r).rotate(-this.getRotation(r),this.getCenter(r))},_viewportToImageDelta:function(n,r){var o=this._contentBoundsNoRotate.width;return new e.Point(n*this._contentSizeNoRotate.x/o,r*this._contentSizeNoRotate.x/o)},viewportToImageCoordinates:function(n,r){if(n instanceof e.Point)return this.viewportToImageCoordinates(n.x,n.y);if(this.viewer){var o=this.viewer.world.getItemCount();if(o>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(o===1){var s=this.viewer.world.getItemAt(0);return s.viewportToImageCoordinates(n,r,!0)}}return this._viewportToImageDelta(n-this._contentBoundsNoRotate.x,r-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(n,r){var o=this._contentBoundsNoRotate.width;return new e.Point(n/this._contentSizeNoRotate.x*o,r/this._contentSizeNoRotate.x*o)},imageToViewportCoordinates:function(n,r){if(n instanceof e.Point)return this.imageToViewportCoordinates(n.x,n.y);if(this.viewer){var o=this.viewer.world.getItemCount();if(o>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(o===1){var s=this.viewer.world.getItemAt(0);return s.imageToViewportCoordinates(n,r,!0)}}var l=this._imageToViewportDelta(n,r);return l.x+=this._contentBoundsNoRotate.x,l.y+=this._contentBoundsNoRotate.y,l},imageToViewportRectangle:function(n,r,o,s){var l=n;if(l instanceof e.Rect||(l=new e.Rect(n,r,o,s)),this.viewer){var a=this.viewer.world.getItemCount();if(a>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(a===1){var u=this.viewer.world.getItemAt(0);return u.imageToViewportRectangle(n,r,o,s,!0)}}var c=this.imageToViewportCoordinates(l.x,l.y),h=this._imageToViewportDelta(l.width,l.height);return new e.Rect(c.x,c.y,h.x,h.y,l.degrees)},viewportToImageRectangle:function(n,r,o,s){var l=n;if(l instanceof e.Rect||(l=new e.Rect(n,r,o,s)),this.viewer){var a=this.viewer.world.getItemCount();if(a>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(a===1){var u=this.viewer.world.getItemAt(0);return u.viewportToImageRectangle(n,r,o,s,!0)}}var c=this.viewportToImageCoordinates(l.x,l.y),h=this._viewportToImageDelta(l.width,l.height);return new e.Rect(c.x,c.y,h.x,h.y,l.degrees)},viewerElementToImageCoordinates:function(n){var r=this.pointFromPixel(n,!0);return this.viewportToImageCoordinates(r)},imageToViewerElementCoordinates:function(n){var r=this.imageToViewportCoordinates(n);return this.pixelFromPoint(r,!0)},windowToImageCoordinates:function(n){e.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var r=n.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(r)},imageToWindowCoordinates:function(n){e.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer.");var r=this.imageToViewerElementCoordinates(n);return r.plus(e.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(n){return this.pointFromPixel(n,!0)},viewportToViewerElementCoordinates:function(n){return this.pixelFromPoint(n,!0)},viewerElementToViewportRectangle:function(n){return e.Rect.fromSummits(this.pointFromPixel(n.getTopLeft(),!0),this.pointFromPixel(n.getTopRight(),!0),this.pointFromPixel(n.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(n){return e.Rect.fromSummits(this.pixelFromPoint(n.getTopLeft(),!0),this.pixelFromPoint(n.getTopRight(),!0),this.pixelFromPoint(n.getBottomLeft(),!0))},windowToViewportCoordinates:function(n){e.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var r=n.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(r)},viewportToWindowCoordinates:function(n){e.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer.");var r=this.viewportToViewerElementCoordinates(n);return r.plus(e.getElementPosition(this.viewer.element))},viewportToImageZoom:function(n){if(this.viewer){var r=this.viewer.world.getItemCount();if(r>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(r===1){var o=this.viewer.world.getItemAt(0);return o.viewportToImageZoom(n)}}var s=this._contentSizeNoRotate.x,l=this._containerInnerSize.x,a=this._contentBoundsNoRotate.width,u=l/s*a;return n*u},imageToViewportZoom:function(n){if(this.viewer){var r=this.viewer.world.getItemCount();if(r>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image. Instead, use [TiledImage.imageToViewportZoom] for the specific image of interest");else if(r===1){var o=this.viewer.world.getItemAt(0);return o.imageToViewportZoom(n)}}var s=this._contentSizeNoRotate.x,l=this._containerInnerSize.x,a=this._contentBoundsNoRotate.width,u=s/l/a;return n*u},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(n){return this.flipped===n?this:(this.flipped=n,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:n}),this)},getMaxZoomPixelRatio:function(){return this.maxZoomPixelRatio},setMaxZoomPixelRatio:function(n,r=!0,o=!1){e.console.assert(!isNaN(n),"[Viewport.setMaxZoomPixelRatio] ratio must be a number"),!isNaN(n)&&(this.maxZoomPixelRatio=n,r&&this.getZoom()>this.getMaxZoom()&&this.applyConstraints(o))}}}(i),function(e){e.TiledImage=function(n){this._initialized=!1,e.console.assert(n.tileCache,"[TiledImage] options.tileCache is required"),e.console.assert(n.drawer,"[TiledImage] options.drawer is required"),e.console.assert(n.viewer,"[TiledImage] options.viewer is required"),e.console.assert(n.imageLoader,"[TiledImage] options.imageLoader is required"),e.console.assert(n.source,"[TiledImage] options.source is required"),e.console.assert(!n.clip||n.clip instanceof e.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),e.EventSource.call(this),this._tileCache=n.tileCache,delete n.tileCache,this._drawer=n.drawer,delete n.drawer,this._imageLoader=n.imageLoader,delete n.imageLoader,n.clip instanceof e.Rect&&(this._clip=n.clip.clone()),delete n.clip;var r=n.x||0;delete n.x;var o=n.y||0;delete n.y,this.normHeight=n.source.dimensions.y/n.source.dimensions.x,this.contentAspectX=n.source.dimensions.x/n.source.dimensions.y;var s=1;n.width?(s=n.width,delete n.width,n.height&&(e.console.error("specifying both width and height to a tiledImage is not supported"),delete n.height)):n.height&&(s=n.height/this.normHeight,delete n.height);var l=n.fitBounds;delete n.fitBounds;var a=n.fitBoundsPlacement||i.Placement.CENTER;delete n.fitBoundsPlacement;var u=n.degrees||0;delete n.degrees;var c=n.ajaxHeaders;delete n.ajaxHeaders,e.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_needsDraw:!0,_needsUpdate:!0,_hasOpaqueTile:!1,_tilesLoading:0,_tilesToDraw:[],_lastDrawn:[],_isBlending:!1,_wasBlending:!1,_isTainted:!1,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,immediateRender:e.DEFAULT_SETTINGS.immediateRender,blendTime:e.DEFAULT_SETTINGS.blendTime,alwaysBlend:e.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:e.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:e.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:e.DEFAULT_SETTINGS.iOSDevice,debugMode:e.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:e.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:e.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:e.DEFAULT_SETTINGS.placeholderFillStyle,opacity:e.DEFAULT_SETTINGS.opacity,preload:e.DEFAULT_SETTINGS.preload,compositeOperation:e.DEFAULT_SETTINGS.compositeOperation,subPixelRoundingForTransparency:e.DEFAULT_SETTINGS.subPixelRoundingForTransparency,maxTilesPerFrame:e.DEFAULT_SETTINGS.maxTilesPerFrame},n),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new e.Spring({initial:r,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new e.Spring({initial:o,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new e.Spring({initial:s,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new e.Spring({initial:u,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),l&&this.fitBounds(l,a,!0),this._ownAjaxHeaders={},this.setAjaxHeaders(c,!1),this._initialized=!0},e.extend(e.TiledImage.prototype,e.EventSource.prototype,{needsDraw:function(){return this._needsDraw},redraw:function(){this._needsDraw=!0},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(n){n!==this._fullyLoaded&&(this._fullyLoaded=n,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=e.now(),this._needsDraw=!0},update:function(n){let r=this._xSpring.update(),o=this._ySpring.update(),s=this._scaleSpring.update(),l=this._degreesSpring.update(),a=r||o||s||l||this._needsUpdate;if(a||n||!this._fullyLoaded){let u=this._updateLevelsForViewport();this._setFullyLoaded(u)}return this._needsUpdate=!1,a?(this._updateForScale(),this._raiseBoundsChange(),this._needsDraw=!0,!0):!1},setDrawn:function(){return this._needsDraw=this._isBlending||this._wasBlending,this._needsDraw},setTainted(n){this._isTainted=n},isTainted(){return this._isTainted},destroy:function(){this.reset(),this.source.destroy&&this.source.destroy(this.viewer)},getBounds:function(n){return this.getBoundsNoRotate(n).rotate(this.getRotation(n),this._getRotationPoint(n))},getBoundsNoRotate:function(n){return n?new e.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new e.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return e.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(n){var r=this.getBoundsNoRotate(n);if(this._clip){var o=n?this._worldWidthCurrent:this._worldWidthTarget,s=o/this.source.dimensions.x,l=this._clip.times(s);r=new e.Rect(r.x+l.x,r.y+l.y,l.width,l.height)}return r.rotate(this.getRotation(n),this._getRotationPoint(n))},getTileBounds:function(n,r,o){var s=this.source.getNumTiles(n),l=(s.x+r%s.x)%s.x,a=(s.y+o%s.y)%s.y,u=this.source.getTileBounds(n,l,a);return this.getFlip()&&(u.x=Math.max(0,1-u.x-u.width)),u.x+=(r-l)/s.x,u.y+=this._worldHeightCurrent/this._worldWidthCurrent*((o-a)/s.y),u},getContentSize:function(){return new e.Point(this.source.dimensions.x,this.source.dimensions.y)},getSizeInWindowCoordinates:function(){var n=this.imageToWindowCoordinates(new e.Point(0,0)),r=this.imageToWindowCoordinates(this.getContentSize());return new e.Point(r.x-n.x,r.y-n.y)},_viewportToImageDelta:function(n,r,o){var s=o?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(n*(this.source.dimensions.x/s),r*(this.source.dimensions.y*this.contentAspectX/s))},viewportToImageCoordinates:function(n,r,o){var s;return n instanceof e.Point?(o=r,s=n):s=new e.Point(n,r),s=s.rotate(-this.getRotation(o),this._getRotationPoint(o)),o?this._viewportToImageDelta(s.x-this._xSpring.current.value,s.y-this._ySpring.current.value):this._viewportToImageDelta(s.x-this._xSpring.target.value,s.y-this._ySpring.target.value)},_imageToViewportDelta:function(n,r,o){var s=o?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(n/this.source.dimensions.x*s,r/this.source.dimensions.y/this.contentAspectX*s)},imageToViewportCoordinates:function(n,r,o){n instanceof e.Point&&(o=r,r=n.y,n=n.x);var s=this._imageToViewportDelta(n,r,o);return o?(s.x+=this._xSpring.current.value,s.y+=this._ySpring.current.value):(s.x+=this._xSpring.target.value,s.y+=this._ySpring.target.value),s.rotate(this.getRotation(o),this._getRotationPoint(o))},imageToViewportRectangle:function(n,r,o,s,l){var a=n;a instanceof e.Rect?l=r:a=new e.Rect(n,r,o,s);var u=this.imageToViewportCoordinates(a.getTopLeft(),l),c=this._imageToViewportDelta(a.width,a.height,l);return new e.Rect(u.x,u.y,c.x,c.y,a.degrees+this.getRotation(l))},viewportToImageRectangle:function(n,r,o,s,l){var a=n;n instanceof e.Rect?l=r:a=new e.Rect(n,r,o,s);var u=this.viewportToImageCoordinates(a.getTopLeft(),l),c=this._viewportToImageDelta(a.width,a.height,l);return new e.Rect(u.x,u.y,c.x,c.y,a.degrees-this.getRotation(l))},viewerElementToImageCoordinates:function(n){var r=this.viewport.pointFromPixel(n,!0);return this.viewportToImageCoordinates(r)},imageToViewerElementCoordinates:function(n){var r=this.imageToViewportCoordinates(n);return this.viewport.pixelFromPoint(r,!0)},windowToImageCoordinates:function(n){var r=n.minus(i.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(r)},imageToWindowCoordinates:function(n){var r=this.imageToViewerElementCoordinates(n);return r.plus(i.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(n){var r=this._scaleSpring.current.value;return n=n.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new e.Rect((n.x-this._xSpring.current.value)/r,(n.y-this._ySpring.current.value)/r,n.width/r,n.height/r,n.degrees)},viewportToImageZoom:function(n){var r=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return r*n},imageToViewportZoom:function(n){var r=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return n/r},setPosition:function(n,r){var o=this._xSpring.target.value===n.x&&this._ySpring.target.value===n.y;if(r){if(o&&this._xSpring.current.value===n.x&&this._ySpring.current.value===n.y)return;this._xSpring.resetTo(n.x),this._ySpring.resetTo(n.y),this._needsDraw=!0,this._needsUpdate=!0}else{if(o)return;this._xSpring.springTo(n.x),this._ySpring.springTo(n.y),this._needsDraw=!0,this._needsUpdate=!0}o||this._raiseBoundsChange()},setWidth:function(n,r){this._setScale(n,r)},setHeight:function(n,r){this._setScale(n/this.normHeight,r)},setCroppingPolygons:function(n){var r=function(s){return s instanceof e.Point||typeof s.x=="number"&&typeof s.y=="number"},o=function(s){return s.map(function(l){try{if(r(l))return{x:l.x,y:l.y};throw new Error}catch{throw new Error("A Provided cropping polygon point is not supported")}})};try{if(!e.isArray(n))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=n.map(function(s){return o(s)}),this._needsDraw=!0}catch(s){e.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),e.console.error(s),this.resetCroppingPolygons()}},resetCroppingPolygons:function(){this._croppingPolygons=null,this._needsDraw=!0},fitBounds:function(n,r,o){r=r||e.Placement.CENTER;var s=e.Placement.properties[r],l=this.contentAspectX,a=0,u=0,c=1,h=1;if(this._clip&&(l=this._clip.getAspectRatio(),c=this._clip.width/this.source.dimensions.x,h=this._clip.height/this.source.dimensions.y,n.getAspectRatio()>l?(a=this._clip.x/this._clip.height*n.height,u=this._clip.y/this._clip.height*n.height):(a=this._clip.x/this._clip.width*n.width,u=this._clip.y/this._clip.width*n.width)),n.getAspectRatio()>l){var d=n.height/h,m=0;s.isHorizontallyCentered?m=(n.width-n.height*l)/2:s.isRight&&(m=n.width-n.height*l),this.setPosition(new e.Point(n.x-a+m,n.y-u),o),this.setHeight(d,o)}else{var y=n.width/c,T=0;s.isVerticallyCentered?T=(n.height-n.width/l)/2:s.isBottom&&(T=n.height-n.width/l),this.setPosition(new e.Point(n.x-a,n.y-u+T),o),this.setWidth(y,o)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(n){e.console.assert(!n||n instanceof e.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),n instanceof e.Rect?this._clip=n.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getFlip:function(){return this.flipped},setFlip:function(n){this.flipped=n},get flipped(){return this._flipped},set flipped(n){let r=this._flipped!==!!n;this._flipped=!!n,r&&(this.update(!0),this._needsDraw=!0,this._raiseBoundsChange())},get wrapHorizontal(){return this._wrapHorizontal},set wrapHorizontal(n){let r=this._wrapHorizontal!==!!n;this._wrapHorizontal=!!n,this._initialized&&r&&(this.update(!0),this._needsDraw=!0)},get wrapVertical(){return this._wrapVertical},set wrapVertical(n){let r=this._wrapVertical!==!!n;this._wrapVertical=!!n,this._initialized&&r&&(this.update(!0),this._needsDraw=!0)},get debugMode(){return this._debugMode},set debugMode(n){this._debugMode=!!n,this._needsDraw=!0},getOpacity:function(){return this.opacity},setOpacity:function(n){this.opacity=n},get opacity(){return this._opacity},set opacity(n){n!==this.opacity&&(this._opacity=n,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(n){this._preload=!!n,this._needsDraw=!0},getRotation:function(n){return n?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(n,r){this._degreesSpring.target.value===n&&this._degreesSpring.isAtTargetValue()||(r?this._degreesSpring.resetTo(n):this._degreesSpring.springTo(n),this._needsDraw=!0,this._needsUpdate=!0,this._raiseBoundsChange())},getDrawArea:function(){if(this._opacity===0&&!this._preload)return!1;var n=this._viewportToTiledImageRectangle(this.viewport.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var r=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));n=n.intersection(r)}return n},getTilesToDraw:function(){let n=this._tilesToDraw.flat();return this._updateTilesInViewport(n),n=this._tilesToDraw.flat(),n.forEach(r=>{r.tile.beingDrawn=!0}),this._lastDrawn=n,n},_getRotationPoint:function(n){return this.getBoundsNoRotate(n).getCenter()},get compositeOperation(){return this._compositeOperation},set compositeOperation(n){n!==this._compositeOperation&&(this._compositeOperation=n,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this._compositeOperation}))},getCompositeOperation:function(){return this._compositeOperation},setCompositeOperation:function(n){this.compositeOperation=n},setAjaxHeaders:function(n,r){if(n===null&&(n={}),!e.isPlainObject(n)){console.error("[TiledImage.setAjaxHeaders] Ignoring invalid headers, must be a plain object");return}this._ownAjaxHeaders=n,this._updateAjaxHeaders(r)},_updateAjaxHeaders:function(n){if(n===void 0&&(n=!0),e.isPlainObject(this.viewer.ajaxHeaders)?this.ajaxHeaders=e.extend({},this.viewer.ajaxHeaders,this._ownAjaxHeaders):this.ajaxHeaders=this._ownAjaxHeaders,n){var r,o,s,l;for(var a in this.tilesMatrix){r=this.source.getNumTiles(a);for(var u in this.tilesMatrix[a]){o=(r.x+u%r.x)%r.x;for(var c in this.tilesMatrix[a][u])if(s=(r.y+c%r.y)%r.y,l=this.tilesMatrix[a][u][c],l.loadWithAjax=this.loadTilesWithAjax,l.loadWithAjax){var h=this.source.getTileAjaxHeaders(a,o,s);l.ajaxHeaders=e.extend({},this.ajaxHeaders,h)}else l.ajaxHeaders=null}}for(var d=0;d<this._imageLoader.jobQueue.length;d++){var m=this._imageLoader.jobQueue[d];m.loadWithAjax=m.tile.loadWithAjax,m.ajaxHeaders=m.tile.loadWithAjax?m.tile.ajaxHeaders:null}}},_setScale:function(n,r){var o=this._scaleSpring.target.value===n;if(r){if(o&&this._scaleSpring.current.value===n)return;this._scaleSpring.resetTo(n),this._updateForScale(),this._needsDraw=!0,this._needsUpdate=!0}else{if(o)return;this._scaleSpring.springTo(n),this._updateForScale(),this._needsDraw=!0,this._needsUpdate=!0}o||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var n=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),r=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,o=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(r/this.minPixelRatio)/Math.log(2))));return o=Math.max(o,this.source.minLevel||0),n=Math.min(n,o),{lowestLevel:n,highestLevel:o}},_updateLevelsForViewport:function(){var n=this._getLevelsInterval(),r=n.lowestLevel,o=n.highestLevel,s=[],l=this.getDrawArea(),a=e.now();if(this._lastDrawn.forEach(k=>{k.tile.beingDrawn=!1}),this._tilesToDraw=[],this._tilesLoading=0,this.loadingCoverage={},!l)return this._needsDraw=!1,this._fullyLoaded;var u=new Array(o-r+1);for(let k=0,F=o;F>=r;F--,k++)u[k]=F;for(let k=o+1;k<=this.source.maxLevel;k++){var c=this.tilesMatrix[k]&&this.tilesMatrix[k][0]&&this.tilesMatrix[k][0][0];if(c&&c.isBottomMost&&c.isRightMost&&c.loaded){u.push(k);break}}let h=!1;for(let k=0;k<u.length;k++){let F=u[k];var d=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(F),!0).x*this._scaleSpring.current.value;if(k===u.length-1||d>=this.minPixelRatio)h=!0;else if(!h)continue;var m=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(F),!1).x*this._scaleSpring.current.value,y=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,T=this.immediateRender?1:y,P=Math.min(1,(d-.5)/.5),v=T/Math.abs(T-m),w=this._updateLevel(F,P,v,l,a,s);s=w.bestTiles;var S=w.updatedTiles.filter(N=>N.loaded),R=function(N,B,j){return function(U){return{tile:U,level:N,levelOpacity:B,currentTime:j}}}(F,P,a);if(this._tilesToDraw[F]=S.map(R),this._providesCoverage(this.coverage,F))break}return s&&s.length>0?(s.forEach(function(k){k&&!k.context2D&&this._loadTile(k,a)},this),this._needsDraw=!0,!1):this._tilesLoading===0},_updateTilesInViewport:function(n){let r=e.now(),o=this;this._tilesLoading=0,this._wasBlending=this._isBlending,this._isBlending=!1,this.loadingCoverage={};let s=n.length?n[0].level:0;if(!this.getDrawArea())return;function a(c){let h=c.tile;if(h&&h.loaded){let d=o._blendTile(h,h.x,h.y,c.level,c.levelOpacity,r,s);o._isBlending=o._isBlending||d,o._needsDraw=o._needsDraw||d||o._wasBlending}}let u=0;for(let c=0;c<n.length;c++){let h=n[c];a(h),this._providesCoverage(this.coverage,h.level)&&(u=Math.max(u,h.level))}if(u>0)for(let c in this._tilesToDraw)c<u&&delete this._tilesToDraw[c]},_blendTile:function(n,r,o,s,l,a,u){let c=1e3*this.blendTime,h,d;return n.blendStart||(n.blendStart=a),h=a-n.blendStart,d=c?Math.min(1,h/c):1,s===u&&(d=1,h=c),this.alwaysBlend&&(d*=l),n.opacity=d,d===1&&(this._setCoverage(this.coverage,s,r,o,!0),this._hasOpaqueTile=!0),h<c},_updateLevel:function(n,r,o,s,l,a){var u=s.getBoundingBox().getTopLeft(),c=s.getBoundingBox().getBottomRight();this.viewer&&this.viewer.raiseEvent("update-level",{tiledImage:this,havedrawn:!0,level:n,opacity:r,visibility:o,drawArea:s,topleft:u,bottomright:c,currenttime:l,best:a}),this._resetCoverage(this.coverage,n),this._resetCoverage(this.loadingCoverage,n);var h=this._getCornerTiles(n,u,c),d=h.topLeft,m=h.bottomRight,y=this.source.getNumTiles(n),T=this.viewport.pixelFromPoint(this.viewport.getCenter());this.getFlip()&&(m.x+=1,this.wrapHorizontal||(m.x=Math.min(m.x,y.x-1)));for(var P=Math.max(0,(m.x-d.x)*(m.y-d.y)),v=new Array(P),w=0,S=d.x;S<=m.x;S++)for(var R=d.y;R<=m.y;R++){var k;if(this.getFlip()){var F=(y.x+S%y.x)%y.x;k=S+y.x-F-F-1}else k=S;if(s.intersection(this.getTileBounds(n,k,R))!==null){var N=this._updateTile(k,R,n,o,T,y,l,a);a=N.bestTiles,v[w]=N.tile,w+=1}}return{bestTiles:a,updatedTiles:v}},_positionTile:function(n,r,o,s,l){var a=n.bounds.getTopLeft();a.x*=this._scaleSpring.current.value,a.y*=this._scaleSpring.current.value,a.x+=this._xSpring.current.value,a.y+=this._ySpring.current.value;var u=n.bounds.getSize();u.x*=this._scaleSpring.current.value,u.y*=this._scaleSpring.current.value,n.positionedBounds.x=a.x,n.positionedBounds.y=a.y,n.positionedBounds.width=u.x,n.positionedBounds.height=u.y;var c=o.pixelFromPointNoRotate(a,!0),h=o.pixelFromPointNoRotate(a,!1),d=o.deltaPixelsFromPointsNoRotate(u,!0),m=o.deltaPixelsFromPointsNoRotate(u,!1),y=h.plus(m.divide(2)),T=s.squaredDistanceTo(y);this.viewer.drawer.minimumOverlapRequired(this)&&(r||(d=d.plus(new e.Point(1,1))),n.isRightMost&&this.wrapHorizontal&&(d.x+=.75),n.isBottomMost&&this.wrapVertical&&(d.y+=.75)),n.position=c,n.size=d,n.squaredDistance=T,n.visibility=l},_updateTile:function(n,r,o,s,l,a,u,c){var h=this._getTile(n,r,o,u,a);this.viewer&&this.viewer.raiseEvent("update-tile",{tiledImage:this,tile:h}),this._setCoverage(this.coverage,o,n,r,!1);var d=h.loaded||h.loading||this._isCovered(this.loadingCoverage,o,n,r);if(this._setCoverage(this.loadingCoverage,o,n,r,d),!h.exists)return{bestTiles:c,tile:h};if(h.loaded&&h.opacity===1&&this._setCoverage(this.coverage,o,n,r,!0),this._positionTile(h,this.source.tileOverlap,this.viewport,l,s),!h.loaded)if(h.context2D)this._setTileLoaded(h);else{var m=this._tileCache.getImageRecord(h.cacheKey);m&&this._setTileLoaded(h,m.getData())}return h.loading?this._tilesLoading++:d||(c=this._compareTiles(c,h,this.maxTilesPerFrame)),{bestTiles:c,tile:h}},_getCornerTiles:function(n,r,o){var s,l;this.wrapHorizontal?(s=e.positiveModulo(r.x,1),l=e.positiveModulo(o.x,1)):(s=Math.max(0,r.x),l=Math.min(1,o.x));var a,u,c=1/this.source.aspectRatio;this.wrapVertical?(a=e.positiveModulo(r.y,c),u=e.positiveModulo(o.y,c)):(a=Math.max(0,r.y),u=Math.min(c,o.y));var h=this.source.getTileAtPoint(n,new e.Point(s,a)),d=this.source.getTileAtPoint(n,new e.Point(l,u)),m=this.source.getNumTiles(n);return this.wrapHorizontal&&(h.x+=m.x*Math.floor(r.x),d.x+=m.x*Math.floor(o.x)),this.wrapVertical&&(h.y+=m.y*Math.floor(r.y/c),d.y+=m.y*Math.floor(o.y/c)),{topLeft:h,bottomRight:d}},_getTile:function(n,r,o,s,l){var a,u,c,h,d,m,y,T,P,v,w=this.tilesMatrix,S=this.source;return w[o]||(w[o]={}),w[o][n]||(w[o][n]={}),(!w[o][n][r]||!w[o][n][r].flipped!=!this.flipped)&&(a=(l.x+n%l.x)%l.x,u=(l.y+r%l.y)%l.y,c=this.getTileBounds(o,n,r),h=S.getTileBounds(o,a,u,!0),d=S.tileExists(o,a,u),m=S.getTileUrl(o,a,u),y=S.getTilePostData(o,a,u),this.loadTilesWithAjax?(T=S.getTileAjaxHeaders(o,a,u),e.isPlainObject(this.ajaxHeaders)&&(T=e.extend({},this.ajaxHeaders,T))):T=null,P=S.getContext2D?S.getContext2D(o,a,u):void 0,v=new e.Tile(o,n,r,c,d,m,P,this.loadTilesWithAjax,T,h,y,S.getTileHashKey(o,a,u,m,T,y)),this.getFlip()?a===0&&(v.isRightMost=!0):a===l.x-1&&(v.isRightMost=!0),u===l.y-1&&(v.isBottomMost=!0),v.flipped=this.flipped,w[o][n][r]=v),v=w[o][n][r],v.lastTouchTime=s,v},_loadTile:function(n,r){var o=this;n.loading=!0,this._imageLoader.addJob({src:n.getUrl(),tile:n,source:this.source,postData:n.postData,loadWithAjax:n.loadWithAjax,ajaxHeaders:n.ajaxHeaders,crossOriginPolicy:this.crossOriginPolicy,ajaxWithCredentials:this.ajaxWithCredentials,callback:function(s,l,a){o._onTileLoad(n,r,s,l,a)},abort:function(){n.loading=!1}})},_onTileLoad:function(n,r,o,s,l){if(o)n.exists=!0;else{e.console.error("Tile %s failed to load: %s - error: %s",n,n.getUrl(),s),this.viewer.raiseEvent("tile-load-failed",{tile:n,tiledImage:this,time:r,message:s,tileRequest:l}),n.loading=!1,n.exists=!1;return}if(r<this.lastResetTime){e.console.warn("Ignoring tile %s loaded before reset: %s",n,n.getUrl()),n.loading=!1;return}var a=this,u=function(){var c=a.source,h=c.getClosestLevel();a._setTileLoaded(n,o,h,l)};u()},_setTileLoaded:function(n,r,o,s){var l=0,a=!1,u=this;function c(){return a&&e.console.error("Event 'tile-loaded' argument getCompletionCallback must be called synchronously. Its return value should be called asynchronously."),l++,h}function h(){l--,l===0&&(n.loading=!1,n.loaded=!0,n.hasTransparency=u.source.hasTransparency(n.context2D,n.getUrl(),n.ajaxHeaders,n.postData),n.context2D||u._tileCache.cacheTile({data:r,tile:n,cutoff:o,tiledImage:u}),u.viewer.raiseEvent("tile-ready",{tile:n,tiledImage:u,tileRequest:s}),u._needsDraw=!0)}var d=c();this.viewer.raiseEvent("tile-loaded",{tile:n,tiledImage:this,tileRequest:s,get image(){return e.console.error("[tile-loaded] event 'image' has been deprecated. Use 'data' property instead."),r},data:r,getCompletionCallback:c}),a=!0,d()},_compareTiles:function(n,r,o){return n?(n.push(r),this._sortTiles(n),n.length>o&&n.pop(),n):[r]},_sortTiles:function(n){n.sort(function(r,o){return r===null?1:o===null?-1:r.visibility===o.visibility?r.squaredDistance-o.squaredDistance:o.visibility-r.visibility})},_providesCoverage:function(n,r,o,s){var l,a,u,c;if(!n[r])return!1;if(o===void 0||s===void 0){l=n[r];for(u in l)if(Object.prototype.hasOwnProperty.call(l,u)){a=l[u];for(c in a)if(Object.prototype.hasOwnProperty.call(a,c)&&!a[c])return!1}return!0}return n[r][o]===void 0||n[r][o][s]===void 0||n[r][o][s]===!0},_isCovered:function(n,r,o,s){return o===void 0||s===void 0?this._providesCoverage(n,r+1):this._providesCoverage(n,r+1,2*o,2*s)&&this._providesCoverage(n,r+1,2*o,2*s+1)&&this._providesCoverage(n,r+1,2*o+1,2*s)&&this._providesCoverage(n,r+1,2*o+1,2*s+1)},_setCoverage:function(n,r,o,s,l){if(!n[r]){e.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",r);return}n[r][o]||(n[r][o]={}),n[r][o][s]=l},_resetCoverage:function(n,r){n[r]={}}})}(i),function(e){var n=function(o){e.console.assert(o,"[TileCache.cacheTile] options is required"),e.console.assert(o.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(o.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=o.tile,this.tiledImage=o.tiledImage},r=function(o){e.console.assert(o,"[ImageRecord] options is required"),e.console.assert(o.data,"[ImageRecord] options.data is required"),this._tiles=[],o.create.apply(null,[this,o.data,o.ownerTile]),this._destroyImplementation=o.destroy.bind(null,this),this.getImage=o.getImage.bind(null,this),this.getData=o.getData.bind(null,this),this.getRenderedContext=o.getRenderedContext.bind(null,this)};r.prototype={destroy:function(){this._destroyImplementation(),this._tiles=null},addTile:function(o){e.console.assert(o,"[ImageRecord.addTile] tile is required"),this._tiles.push(o)},removeTile:function(o){for(var s=0;s<this._tiles.length;s++)if(this._tiles[s]===o){this._tiles.splice(s,1);return}e.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",o)},getTileCount:function(){return this._tiles.length}},e.TileCache=function(o){o=o||{},this._maxImageCacheCount=o.maxImageCacheCount||e.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},e.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(o){e.console.assert(o,"[TileCache.cacheTile] options is required"),e.console.assert(o.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(o.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),e.console.assert(o.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var s=o.cutoff||0,l=this._tilesLoaded.length,a=this._imagesLoaded[o.tile.cacheKey];if(a||(o.data||(e.console.error("[TileCache.cacheTile] options.image was renamed to options.data. '.image' attribute has been deprecated and will be removed in the future."),o.data=o.image),e.console.assert(o.data,"[TileCache.cacheTile] options.data is required to create an ImageRecord"),a=this._imagesLoaded[o.tile.cacheKey]=new r({data:o.data,ownerTile:o.tile,create:o.tiledImage.source.createTileCache,destroy:o.tiledImage.source.destroyTileCache,getImage:o.tiledImage.source.getTileCacheDataAsImage,getData:o.tiledImage.source.getTileCacheData,getRenderedContext:o.tiledImage.source.getTileCacheDataAsContext2D}),this._imagesLoadedCount++),a.addTile(o.tile),o.tile.cacheImageRecord=a,this._imagesLoadedCount>this._maxImageCacheCount){for(var u=null,c=-1,h=null,d,m,y,T,P,v,w=this._tilesLoaded.length-1;w>=0;w--)if(v=this._tilesLoaded[w],d=v.tile,!(d.level<=s||d.beingDrawn)){if(!u){u=d,c=w,h=v;continue}T=d.lastTouchTime,m=u.lastTouchTime,P=d.level,y=u.level,(T<m||T===m&&P>y)&&(u=d,c=w,h=v)}u&&c>=0&&(this._unloadTile(h),l=c)}this._tilesLoaded[l]=new n({tile:o.tile,tiledImage:o.tiledImage})},clearTilesFor:function(o){e.console.assert(o,"[TileCache.clearTilesFor] tiledImage is required");for(var s,l=0;l<this._tilesLoaded.length;++l)s=this._tilesLoaded[l],s.tiledImage===o&&(this._unloadTile(s),this._tilesLoaded.splice(l,1),l--)},getImageRecord:function(o){return e.console.assert(o,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[o]},_unloadTile:function(o){e.console.assert(o,"[TileCache._unloadTile] tileRecord is required");var s=o.tile,l=o.tiledImage;let a=s.getCanvasContext&&s.getCanvasContext();s.unload(),s.cacheImageRecord=null;var u=this._imagesLoaded[s.cacheKey];u&&(u.removeTile(s),u.getTileCount()||(u.destroy(),delete this._imagesLoaded[s.cacheKey],this._imagesLoadedCount--,a&&(a.canvas.width=0,a.canvas.height=0,l.viewer.raiseEvent("image-unloaded",{context2D:a,tile:s}))),l.viewer.raiseEvent("tile-unloaded",{tile:s,tiledImage:l}))}}}(i),function(e){e.World=function(n){var r=this;e.console.assert(n.viewer,"[World] options.viewer is required"),e.EventSource.call(this),this.viewer=n.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(o){r._autoRefigureSizes?r._figureSizes():r._needsSizesFigured=!0},this._figureSizes()},e.extend(e.World.prototype,e.EventSource.prototype,{addItem:function(n,r){if(e.console.assert(n,"[World.addItem] item is required"),e.console.assert(n instanceof e.TiledImage,"[World.addItem] only TiledImages supported at this time"),r=r||{},r.index!==void 0){var o=Math.max(0,Math.min(this._items.length,r.index));this._items.splice(o,0,n)}else this._items.push(n);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,n.addHandler("bounds-change",this._delegatedFigureSizes),n.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:n})},getItemAt:function(n){return e.console.assert(n!==void 0,"[World.getItemAt] index is required"),this._items[n]},getIndexOfItem:function(n){return e.console.assert(n,"[World.getIndexOfItem] item is required"),e.indexOf(this._items,n)},getItemCount:function(){return this._items.length},setItemIndex:function(n,r){e.console.assert(n,"[World.setItemIndex] item is required"),e.console.assert(r!==void 0,"[World.setItemIndex] index is required");var o=this.getIndexOfItem(n);if(r>=this._items.length)throw new Error("Index bigger than number of layers.");r===o||o===-1||(this._items.splice(o,1),this._items.splice(r,0,n),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:n,previousIndex:o,newIndex:r}))},removeItem:function(n){e.console.assert(n,"[World.removeItem] item is required");var r=e.indexOf(this._items,n);r!==-1&&(n.removeHandler("bounds-change",this._delegatedFigureSizes),n.removeHandler("clip-change",this._delegatedFigureSizes),n.destroy(),this._items.splice(r,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(n))},removeAll:function(){this.viewer._cancelPendingImages();var n,r;for(r=0;r<this._items.length;r++)n=this._items[r],n.removeHandler("bounds-change",this._delegatedFigureSizes),n.removeHandler("clip-change",this._delegatedFigureSizes),n.destroy();var o=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,r=0;r<o.length;r++)n=o[r],this._raiseRemoveItem(n)},resetItems:function(){for(var n=0;n<this._items.length;n++)this._items[n].reset()},update:function(n){for(var r=!1,o=0;o<this._items.length;o++)r=this._items[o].update(n)||r;return r},draw:function(){this.viewer.drawer.draw(this._items),this._needsDraw=!1,this._items.forEach(n=>{this._needsDraw=n.setDrawn()||this._needsDraw})},needsDraw:function(){for(var n=0;n<this._items.length;n++)if(this._items[n].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(n){this._autoRefigureSizes=n,n&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(n){n=n||{};var r=n.immediately||!1,o=n.layout||e.DEFAULT_SETTINGS.collectionLayout,s=n.rows||e.DEFAULT_SETTINGS.collectionRows,l=n.columns||e.DEFAULT_SETTINGS.collectionColumns,a=n.tileSize||e.DEFAULT_SETTINGS.collectionTileSize,u=n.tileMargin||e.DEFAULT_SETTINGS.collectionTileMargin,c=a+u,h;!n.rows&&l?h=l:h=Math.ceil(this._items.length/s);var d=0,m=0,y,T,P,v,w;this.setAutoRefigureSizes(!1);for(var S=0;S<this._items.length;S++)S&&S%h===0&&(o==="horizontal"?(m+=c,d=0):(d+=c,m=0)),y=this._items[S],T=y.getBounds(),T.width>T.height?P=a:P=a*(T.width/T.height),v=P*(T.height/T.width),w=new e.Point(d+(a-P)/2,m+(a-v)/2),y.setPosition(w,r),y.setWidth(P,r),o==="horizontal"?d+=c:m+=c;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var n=this._homeBounds?this._homeBounds.clone():null,r=this._contentSize?this._contentSize.clone():null,o=this._contentFactor||0;if(!this._items.length)this._homeBounds=new e.Rect(0,0,1,1),this._contentSize=new e.Point(1,1),this._contentFactor=1;else{var s=this._items[0],l=s.getBounds();this._contentFactor=s.getContentSize().x/l.width;for(var a=s.getClippedBounds().getBoundingBox(),u=a.x,c=a.y,h=a.x+a.width,d=a.y+a.height,m=1;m<this._items.length;m++)s=this._items[m],l=s.getBounds(),this._contentFactor=Math.max(this._contentFactor,s.getContentSize().x/l.width),a=s.getClippedBounds().getBoundingBox(),u=Math.min(u,a.x),c=Math.min(c,a.y),h=Math.max(h,a.x+a.width),d=Math.max(d,a.y+a.height);this._homeBounds=new e.Rect(u,c,h-u,d-c),this._contentSize=new e.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}(this._contentFactor!==o||!this._homeBounds.equals(n)||!this._contentSize.equals(r))&&this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(n){this.raiseEvent("remove-item",{item:n})}})}(i)})(Ac);var gf=Ac.exports;const mf=bc(gf);function vf(t,i){return ye.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:i},t),ye.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"}))}const yf=ye.forwardRef(vf);function wf(t,i){return ye.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:i},t),ye.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"}))}const Tf=ye.forwardRef(wf);function xf(t,i){return ye.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:i},t),ye.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"}))}const _f=ye.forwardRef(xf);function Ef(t,i){return ye.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:i},t),ye.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7"}))}const Sf=ye.forwardRef(Ef),Pf=({setCurrentPage:t})=>{const i=ye.useRef(null),e=ye.useRef(null),[n,r]=ye.useState(!1);ye.useEffect(()=>{i.current=mf({id:"main-viewer",prefixUrl:"/images/",tileSources:["https://cache.zoomhub.net/content/MVKk9.dzi","https://cache.zoomhub.net/content/LK8om.dzi","https://cache.zoomhub.net/content/w2DNl.dzi"],sequenceMode:!0,defaultZoomLevel:0,minZoomLevel:0,immediateRender:!0,maxZoomPixelRatio:20,timeout:5e3,blendTime:.1,pixelsPerWheelLine:30,showNavigator:!0,navigatorPosition:"ABSOLUTE",navigatorTop:"0px",navigatorLeft:"80%",navigatorHeight:"40%",navigatorWidth:"35%",navigatorAutoFade:!1,smoothTileEdgesMinZoom:1,showZoomControl:!1,showHomeControl:!1,showFullPageControl:!1,gestureSettingsTouch:{pinch:!0,doubletap:!0},gestureSettingsMouse:{clickToZoom:!0,scrollToZoom:!0,dblClickToZoom:!0},navigatorContainer:e.current}),i.current.addHandler("page",c=>{t(c.page)});const u=()=>{r(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",u),()=>{i.current&&i.current.destroy(),document.removeEventListener("fullscreenchange",u)}},[t]);const o=()=>{i.current&&i.current.viewport&&(i.current.viewport.zoomBy(2),i.current.viewport.applyConstraints())},s=()=>{i.current&&i.current.viewport&&(i.current.viewport.zoomBy(.4),i.current.viewport.applyConstraints())},l=()=>{i.current&&i.current.viewport&&i.current.viewport.goHome()},a=()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen().catch(u=>{console.error("Error attempting to enter fullscreen mode:",u)})};return J.jsxs("div",{className:"flex h-full w-full",children:[J.jsx("div",{id:"main-viewer",className:"h-full w-full"}),J.jsx("div",{ref:e,className:"w-1/4 p-2 bg-gray-100 m-4",id:"hubview-navigator",style:{height:"25vh"},children:J.jsx("div",{className:"flex justify-center text-sm text-gray-700 font-bold",children:"Hub View"})}),J.jsxs("div",{className:`fixed top-2 left-1/2 transform -translate-x-1/2 flex gap-2 p-1 bg-gray-100 rounded-md shadow-md ${n?"fullscreen-button":""}`,style:{zIndex:9999},children:[J.jsx("button",{onClick:o,className:"",children:J.jsx(_f,{className:"h-6 w-6"})}),J.jsx("button",{onClick:s,className:"",children:J.jsx(Sf,{className:"h-6 w-6"})}),J.jsx("button",{onClick:l,className:"",children:J.jsx(Tf,{className:"h-6 w-6"})}),J.jsx("button",{onClick:a,className:"",children:J.jsx(yf,{className:"h-6 w-6"})})]})]})},Cf=()=>{const t=ye.useRef(null),[i,e]=ye.useState(0);return J.jsxs("div",{className:"flex h-screen",children:[J.jsx("div",{className:"bg-gray-100 p-6 w-1/4 mr-4 border-r",children:J.jsx(pf,{currentPage:i})}),J.jsx("div",{className:"flex-grow",children:J.jsx(Pf,{hubViewerRef:t,setCurrentPage:e})})]})};function Rf(){return J.jsx(J.Fragment,{children:J.jsx(Cf,{})})}Ic(document.getElementById("root")).render(J.jsx(ye.StrictMode,{children:J.jsx(Rf,{})}));
